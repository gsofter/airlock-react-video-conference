(this.webpackJsonpsquareparty=this.webpackJsonpsquareparty||[]).push([[0],{220:function(e,t,n){e.exports=n(411)},225:function(e,t,n){},368:function(e,t,n){},369:function(e,t,n){},411:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),o=(n(225),n(71)),l=n(22),u=n(9),s=n(459),d=n(462),m=n(467),f=n(210),p=n(461),b=n(6),h=n(470),g=n(458),O=n(456),v=n(457),E=n(455),j=function(e){var t=e.isOpen,n=e.title,a=e.description,c=e.buttonText,i=e.handleClose;return r.a.createElement(h.a,{open:t,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(E.a,{id:"alert-dialog-title"},n),r.a.createElement(O.a,null,r.a.createElement(v.a,{id:"alert-dialog-description"},a)),r.a.createElement(g.a,null,r.a.createElement(s.a,{onClick:i,color:"secondary",className:"primary"},c||"Agree")))},y=n(13),k=n.n(y),x=n(23),w=n(475),C=n(45),S=n.n(C);function N(e,t){document.cookie=e+"="+t+"; Path=/;"}function I(){return function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}("airlock_token")}var A="http://localhost:5000/api",T=function(){var e=Object(x.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.post("".concat(A,"/login"),{passcode:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(x.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(),e.abrupt("return",S.a.get("".concat(A,"/user/check_auth"),{headers:{Authorization:"Bearer ".concat(t)}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){var t=I();return S.a.post("".concat(A,"/room/set_stream_url"),{url:e},{headers:{Authorization:"Bearer ".concat(t)}})},M=function(e){var t=I();return console.log("Token => ",t),S.a.post("".concat(A,"/room/unlock_request"),{to:e},{headers:{Authorization:"Bearer ".concat(t)}})},L=function(e){var t=I();return S.a.post("".concat(A,"/room/lock_request"),{to:e},{headers:{Authorization:"Bearer ".concat(t)}})},P=function(e){var t=I();return S.a.post("".concat(A,"/room/unlock_accept"),{to:e},{headers:{Authorization:"Bearer ".concat(t)}})},B=function(e){var t=I();return S.a.post("".concat(A,"/room/unlock_decline"),{to:e},{headers:{Authorization:"Bearer ".concat(t)}})},D=function(e,t){var n=I();return S.a.get("".concat(A,"/room/mic"),{params:{to:e,mic_on:t},headers:{Authorization:"Bearer ".concat(n)}})},W=function(e,t){var n=I();return S.a.post("".concat(A,"/room/message"),{to:e,message:t},{headers:{Authorization:"Bearer ".concat(n)}})},F=Object(w.a)("INIT_ROOM"),U=Object(w.a)("SET_STREAM_URL_SUCCESS"),z=Object(w.a)("SET_STREAM_URL_FAILED"),V=Object(w.a)("PARTICIPANT_JOINED"),q=Object(w.a)("PARTICIPANT_EXIT"),H=(Object(w.a)("INIT_PARTICIPANTS"),Object(w.a)("SET_PIN_SENT")),G=Object(w.a)("SET_PIN_UNLOCK"),K=Object(w.a)("SET_PIN_LOCK"),J=Object(w.a)("SET_PIN_MIC"),Q=Object(w.a)("SET_TWILIO_ROOM"),Y=Object(w.a)("OPEN_CHAT"),$=Object(w.a)("CLOSE_CHAT"),X=Object(w.a)("ADD_MESSAGE"),Z=(Object(w.a)("INIT_CHAT_ROOM"),Object(w.a)("SELECT_MAIN")),ee=Object(w.a)("RANDOMIZE_PINS"),te=function(e){var t=e.identity,n=e.isOn;return function(){var e=Object(x.a)(k.a.mark((function e(a,r){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t,n);case 3:a(J({identity:t,isOn:n})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},ne=function(e){var t=e.identity;return function(){var e=Object(x.a)(k.a.mark((function e(n,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:n(H({identity:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},ae=function(e){var t=e.identity;return function(){var e=Object(x.a)(k.a.mark((function e(n,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t);case 3:n(K({identity:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},re=function(e){var t=e.identity;return function(){var e=Object(x.a)(k.a.mark((function e(n,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(t);case 3:n(G({identity:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},ce=Object(w.a)("LOGIN_FAILED"),ie=Object(w.a)("LOGIN_SUCCESS"),oe=n(460),le=Object(oe.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",textAlign:"center"},submit:{padding:e.spacing(1.5)},logoImg:{width:e.spacing(10),height:e.spacing(10),maxWidth:e.spacing(10),maxHeight:e.spacing(10)},formTitle:{fontWeight:"700"}}})),ue=function(){var e=le(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],i=n[1],o=Object(b.b)(),l=Object(a.useState)(!1),h=Object(u.a)(l,2),g=h[0],O=h[1],v=Object(a.useState)(!1),E=Object(u.a)(v,2),y=E[0],w=E[1],C=Object(a.useCallback)((function(e){w(!1),i(e.target.value)}),[]),S=Object(a.useCallback)((function(e){e.preventDefault(),o(function(e){return function(){var t=Object(x.a)(k.a.mark((function t(n){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T(e);case 3:a=t.sent,n(ie(a.data)),n(U(a.data.stream_url)),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(0),n(ce()),n(F()),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(c)).then((function(){console.log("LOGIN SUCCESS")})).catch((function(e){w(!0)}))}),[o,c]);return r.a.createElement(p.a,{maxWidth:"xs"},r.a.createElement(d.a,null),r.a.createElement(j,{isOpen:g,title:"Access Failed",description:"Passcode doesn't exit!",buttonText:"OK",handleClose:function(){return O(!1)}}),r.a.createElement("div",{className:e.paper},r.a.createElement("img",{src:"/assets/Logo-thug.png",alt:"logo",className:e.logoImg}),r.a.createElement(f.a,{component:"h1",variant:"h4",className:e.formTitle},"Access the party"),r.a.createElement("form",{className:e.form,onSubmit:S},r.a.createElement(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"passcode",label:"Enter your unique code",value:c,onChange:C,error:y,helperText:y&&"Invalid access code"}),r.a.createElement(s.a,{type:"submit",fullWidth:!0,margin:"normal",variant:"contained",color:"primary",className:e.submit},"Access"),r.a.createElement(f.a,{component:"p",variant:"body2"},"If you don't have an access code? ",r.a.createElement("a",{href:"#"},"Buy a ticket ")))))},se=n(74),de=function(e){var t=e.children,n=Object(se.a)(e,["children"]),a=Object(b.c)((function(e){return e.user}));return r.a.createElement(l.b,Object.assign({},n,{render:function(e){var n=e.location;return a.token?r.a.createElement(l.a,{to:{pathname:"/",state:{from:n}}}):t}}))},me=function(e){var t=e.children,n=Object(se.a)(e,["children"]),a=Object(b.c)((function(e){return e.user}));return r.a.createElement(l.b,Object.assign({},n,{render:function(e){var n=e.location;return a.token?t:r.a.createElement(l.a,{to:{pathname:"/login",state:{from:n}}})}}))},fe=function(){var e=Object(b.b)();Object(a.useEffect)((function(){return console.log("AUTH CHECKING"),e(function(){var e=Object(x.a)(k.a.mark((function e(t,n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_();case 3:a=e.sent,t(ie(a.data)),t(U(a.data.stream_url)),e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(0),t(ce()),t(F()),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()).then((function(){console.log("AUTH SUCCESS")})).catch((function(e){console.log("AUTH FAILED")})),function(){}}),[e])},pe=n(7),be=n(57),he=n.n(be),ge=function(){return Object(b.c)((function(e){return e.user}))};var Oe=n(2),ve=n(473),Ee=n(27);function je(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){c(Array.from(e.tracks.values()));var t=function(e){return c((function(t){return[].concat(Object(Ee.a)(t),[e])}))},n=function(e){return c((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("trackPublished",t),e.on("trackUnpublished",n),function(){e.off("trackPublished",t),e.off("trackUnpublished",n)}}),[e]),r}function ye(e){var t=Object(a.useState)(e&&e.track),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(e&&e.track),e){var t=function(){return c(null)};return e.on("subscribed",c),e.on("unsubscribed",t),function(){e.off("subscribed",c),e.off("unsubscribed",t)}}}),[e]),r}var ke=Object(ve.a)("video")({width:"100%",maxHeight:"100%",objectFit:"contain"});function xe(e){var t=e.track,n=e.isLocal,c=Object(a.useRef)(null);Object(a.useEffect)((function(){if(t){var e=c.current;return t.attach(e),function(){t.detach(e)}}}),[t]);var i=n?{transform:"rotateY(180deg)"}:{};return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(ke,{ref:c,style:i}))}function we(e){var t=e.track;return Object(a.useEffect)((function(){return document.body.appendChild(t.attach()),function(){return t.detach().forEach((function(e){return e.remove()}))}}),[t]),null}function Ce(e){var t=e.publication,n=e.isLocal,a=e.disableAudio,c=e.videoPriority,i=ye(t);if(!i)return null;switch(i.kind){case"video":return r.a.createElement(xe,{track:i,priority:c,isLocal:"camera"===i.name&&n});case"audio":return a?null:r.a.createElement(we,{track:i});default:return null}}function Se(e){var t,n=e.participant,a=e.disableAudio,c=Object(b.c)((function(e){return e.room.room})),i=je(n),o=n===c.localParticipant;return t=i.filter((function(e){return"screen"!==e.trackName})),r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(Ce,{key:e.kind,publication:e,participant:n,isLocal:o,disableAudio:a})})))}var Ne=n(11),Ie=n(474),Ae=n(477),Te=n(191),_e=n.n(Te);function Re(e){var t=Object(a.useState)(!e||e.isEnabled),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(!e||e.isEnabled),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("enabled",t),e.on("disabled",n),function(){e.off("enabled",t),e.off("disabled",n)}}}),[e]),r}var Me,Le=0,Pe=window.AudioContext||window.webkitAudioContext;function Be(e){Me=Me||new Pe;var t=new MediaStream([e.mediaStreamTrack.clone()]),n=Me.createMediaStreamSource(t),a=Me.createAnalyser();return a.smoothingTimeConstant=.4,a.fftSize=512,n.connect(a),a}var De=r.a.memo((function(e){var t=e.size,n=e.audioTrack,c=e.background,i=t||24,o=Object(a.useRef)(null),l=Re(n);Object(a.useEffect)((function(){var e=o.current;if(n&&l&&e){var t=Be(n),a=function(){t=Be(n)};window.addEventListener("focus",a);var r=new Uint8Array(t.frequencyBinCount),c=Object(Ae.a)((function(){t.getByteFrequencyData(r);for(var n=0,a=r.length,c=0;c<a;c++)n+=r[c];var i=Math.min(21,Math.max(0,14*Math.log10(n/a/3)));e.setAttribute("y",String(21-i))}),50);return function(){e.setAttribute("y","21"),c.stop(),window.removeEventListener("focus",a)}}}),[n,l]);var u="audio-level-clip-".concat(Le++);return l?r.a.createElement("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",height:"".concat(i,"px"),width:"".concat(i,"px")},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:u},r.a.createElement("rect",{ref:o,x:"0",y:"21",width:"24",height:"24"}))),r.a.createElement("path",{fill:c||"rgba(255, 255, 255, 0.1)",d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),r.a.createElement("path",{fill:"#0c0",clipPath:"url(#".concat(u,")"),d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})):r.a.createElement(_e.a,{height:"".concat(i,"px"),width:"".concat(i,"px"),style:{width:"initial",height:"initial"},"data-cy-audio-mute-icon":!0})})),We=n(192),Fe=n.n(We),Ue=Object(ve.a)("div")({position:"absolute",zIndex:1,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),ze=Object(ve.a)("h3")({textAlign:"center",margin:"0.6em 0"});function Ve(){return r.a.createElement(Ue,null,r.a.createElement("div",null,r.a.createElement(Fe.a,{fontSize:"large"})),r.a.createElement(ze,null,"Insufficient Bandwidth"))}var qe=Object(ve.a)("div")({display:"flex",alignItems:"flex-end","& div":{width:"2px",border:"1px solid black",boxSizing:"content-box","&:not(:last-child)":{borderRight:"none"}}});function He(e){var t=e.qualityLevel;return null===t?null:r.a.createElement(qe,null,[0,1,2,3,4].map((function(e){return r.a.createElement("div",{key:e,style:{height:"".concat(3*(e+1),"px"),background:t>e?"#0c0":"#040"}})})))}var Ge=n(471),Ke=Object(oe.a)({indicator:{width:"10px",height:"10px",borderRadius:"100%",background:"#0c0",display:"inline-block",marginRight:"3px"},isReconnecting:{background:"#ffb100"}});function Je(e){var t=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("reconnecting",t),e.on("reconnected",n),function(){e.off("reconnecting",t),e.off("reconnected",n)}}),[e]),r}(e.participant),n=Ke();return r.a.createElement(Ge.a,{title:t?"Participant is reconnecting":"Participant is connected"},r.a.createElement("span",{className:Object(Oe.a)(n.indicator,Object(Ne.a)({},n.isReconnecting,t))}))}var Qe=n(194),Ye=n(134);function $e(){return r.a.createElement(Ge.a,{title:"Participant is pinned. Click to un-pin.",placement:"top"},r.a.createElement(Ye.a,{style:{float:"right",fontSize:"29px"}},r.a.createElement(Qe.a,null)))}var Xe=n(195),Ze=n.n(Xe),et=n(98),tt=n.n(et);function nt(e){var t=Object(a.useState)(e&&e.isSwitchedOff),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(e&&e.isSwitchedOff),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("switchedOff",t),e.on("switchedOn",n),function(){e.off("switchedOff",t),e.off("switchedOn",n)}}}),[e]),!!r}var at=Object(oe.a)((function(e){return Object(Ie.a)({container:Object(Ne.a)({position:"relative",display:"flex",alignItems:"center",height:"100%",overflow:"hidden",cursor:"pointer","& video":{filter:"none"},"& svg":{stroke:"black",strokeWidth:"0.8px"}},e.breakpoints.down("xs"),{height:e.sidebarMobileHeight,width:"".concat(16*e.sidebarMobileHeight/9,"px"),marginRight:"3px",fontSize:"10px"}),isVideoSwitchedOff:{"& video":{filter:"blur(4px) grayscale(1) brightness(1)"}},infoContainer:{position:"absolute",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:"0.4em",width:"100%",background:"transparent"},hideVideo:{},identity:{background:"rgba(0, 0, 0, 0.7)",padding:"0.1em 0.3em",margin:0,display:"flex",alignItems:"center"},infoRow:{display:"flex",justifyContent:"space-between"}})}));function rt(e){var t=e.participant,n=e.onClick,c=e.isSelected,i=e.children,o=je(t),l=o.find((function(e){return"audio"===e.kind})),s=o.find((function(e){return"camera"===e.trackName})),d=function(e){var t=Object(a.useState)(e.networkQualityLevel),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(e){return c(e)};return c(e.networkQualityLevel),e.on("networkQualityLevelChanged",t),function(){e.off("networkQualityLevelChanged",t)}}),[e]),r}(t),m=Boolean(s),f=o.find((function(e){return"screen"===e.trackName})),p=nt(ye(s)),b=ye(l),h=at();return r.a.createElement("div",{className:Object(Oe.a)(h.container,Object(Ne.a)({},h.isVideoSwitchedOff,p)),onClick:n,"data-cy-participant":t.identity},r.a.createElement("div",{className:Object(Oe.a)(h.infoContainer,Object(Ne.a)({},h.hideVideo,!m))},r.a.createElement("div",{className:h.infoRow},r.a.createElement("h4",{className:h.identity},r.a.createElement(Je,{participant:t}),t.identity),r.a.createElement(He,{qualityLevel:d})),r.a.createElement("div",null,r.a.createElement(De,{audioTrack:b,background:"white"}),!m&&r.a.createElement(tt.a,null),f&&r.a.createElement(Ze.a,null),c&&r.a.createElement($e,null))),p&&r.a.createElement(Ve,null),i)}function ct(e){var t=e.participant,n=e.disableAudio;Object(b.c)((function(e){return e.room.room}));return r.a.createElement(rt,{participant:t,disableAudio:n},r.a.createElement(Se,{participant:t,disableAudio:n}))}var it=n(5),ot=n(464),lt=n(52),ut=n(58),st=n(196),dt=function(){return r.a.createElement(lt.a,{icon:ut.b})},mt=function(){return r.a.createElement(lt.a,{icon:ut.c})},ft=function(){return r.a.createElement(lt.a,{icon:st.a})},pt=function(){return r.a.createElement(lt.a,{icon:ut.d})},bt=function(){return r.a.createElement(lt.a,{icon:ut.e})},ht=function(){return r.a.createElement(lt.a,{icon:ut.a})},gt=function(){return r.a.createElement(lt.a,{icon:ut.f})},Ot=function(){return r.a.createElement(lt.a,{icon:ut.g})},vt=Object(oe.a)((function(e){return{pinMainWrapper:{height:"100%",border:"1px solid blue",display:"flex",flexDirection:"column",justifyContent:"space-between"},videoWrapper:{height:"calc(100% - 40px)"},buttonGroup:{display:"flex",marginBottom:"0px",flexDirection:"row",justifyContent:"space-around",height:"40px"},emptyScene:{textAlign:"center",backgroundColor:"black",height:"100%",border:"1px solid brown",alignItems:"center"},button:{width:"50%",color:"white"},activeButton:{color:"#FF0058"},deactiveButton:{color:"white"}}})),Et=Object(it.a)({root:{color:"#80FF00",border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(s.a),jt=Object(it.a)({root:{color:"#00ECF8",border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(s.a),yt=Object(it.a)({root:{color:"#FF0058",border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(s.a),kt=Object(it.a)({root:{color:"white",border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(s.a),xt=Object(it.a)({root:{border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(s.a),wt=function(e){var t=e.pinId,n=vt(),a=Object(b.b)(),c=(Object(b.c)((function(e){return e.user})),Object(b.c)((function(e){return e.room}))),i=c.participants,o=c.pins[t];if(!o)return r.a.createElement("div",{className:n.emptyScene}," not Available");var l=i.find((function(e){return e.identity===o.identity})),u=o.chats.filter((function(e){return!1===e.read})),s=function(){var e=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(ne({identity:o.identity}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(ae({identity:o.identity}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){a(Y({identity:l.identity}))};return l?r.a.createElement("div",{className:n.pinMainWrapper},r.a.createElement("div",{className:n.videoWrapper,onClick:function(){a(Z({identity:o.identity}))}},r.a.createElement(ct,{participant:l,disableAudio:!o.mic})),!0===o.locked?r.a.createElement("div",{className:n.buttonGroup},o.mic?r.a.createElement(yt,{variant:"outline",style:{root:{color:"green"}},onClick:function(){a(te({identity:l.identity,isOn:!1})).then((function(){console.log("SET_MIC_OFF SUCCESS")})).catch((function(e){console.log(e.message)}))}},r.a.createElement(pt,null)):r.a.createElement(kt,{variant:"outline",style:{root:{color:"green"}},onClick:function(){a(te({identity:l.identity,isOn:!0})).then((function(){console.log("SET_MIC_ON SUCCESS")})).catch((function(e){console.log(e.message)}))}},r.a.createElement(bt,null)),o.identity===c.chatMember?r.a.createElement(xt,{variant:"outline",onClick:m,className:n.activeButton},r.a.createElement(ft,null)):r.a.createElement(xt,{variant:"outline",onClick:m,className:n.deactiveButton},u.length>0?r.a.createElement(ot.a,{color:"secondary",badgeContent:u.length},r.a.createElement(ft,null)):r.a.createElement(ft,null)),r.a.createElement(Et,{variant:"outline",onClick:d},r.a.createElement(dt,null))):!1===o.sent?r.a.createElement("div",{className:n.buttonGroup},r.a.createElement(jt,{variant:"outline",onClick:s},r.a.createElement(mt,null))):r.a.createElement("div",{className:n.buttonGroup},r.a.createElement(jt,{variant:"outline"},r.a.createElement(ht,null)))):r.a.createElement("div",{className:n.emptyScene},"Not Available")};function Ct(e){var t=e.showDialog,n=e.closeDialog,a=e.setStreamUrl,c=r.a.useState(""),i=Object(u.a)(c,2),o=i[0],l=i[1];return r.a.createElement(h.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title"},r.a.createElement(E.a,{id:"form-dialog-title"},"Youtube Channel"),r.a.createElement(O.a,null,r.a.createElement(v.a,null,"Enter Youtube Channel URL."),r.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"URL",type:"text",onChange:function(e){l(e.target.value)},fullWidth:!0})),r.a.createElement(g.a,null,r.a.createElement(s.a,{onClick:n,color:"default",variant:"contained"},"Cancel"),r.a.createElement(s.a,{onClick:function(e){console.log(o),a(o),n()},color:"secondary",variant:"contained"},"OK")))}var St=n(197),Nt=n.n(St),It=Object(oe.a)((function(e){return{mainWrapper:Object(Ne.a)({height:"100%",backgroundColor:"#333333",border:"1px solid green"},"height","100%"),participantWrapper:{height:"calc(100% - 36px)"},buttonsWrapper:{marginBottom:"0px",height:"50px"}}})),At=Object(it.a)({root:{borderRadius:"0px",border:"1px solid grey",backgroundColor:"black",width:"100%",color:"white",fontStyle:"bold"}})(s.a),Tt=function(){var e=It(),t=Object(l.g)(),n=Object(b.b)(),a=Object(b.c)((function(e){return e.room.room})),c=a.localParticipant;return r.a.createElement("div",{className:e.mainWrapper},r.a.createElement("div",{className:e.participantWrapper},r.a.createElement(ct,{participant:c,disableAudio:!1})),r.a.createElement("div",{className:e.buttonsWrapper},r.a.createElement(At,{variant:"outlined",onClick:function(e){a.disconnect(),n((function(e){e(ce()),e(F())})),t.push("/login")}},"Exit Party ",r.a.createElement(Nt.a,null))))},_t=Object(oe.a)({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"calc(100% - 70px)",background:"black",border:"2px solid cyan",borderStyle:"dashed"},isVideoSwitchedOff:{"& video":{filter:"blur(4px) grayscale(1) brightness(0.5)"}},identity:{background:"rgba(0, 0, 0, 0.7)",padding:"0.1em 0.3em",margin:"1em",fontSize:"1.2em",display:"inline-flex","& svg":{marginLeft:"0.3em"}},infoContainer:{position:"absolute",zIndex:1,height:"100%",padding:"0.4em",width:"100%"}});function Rt(e){var t=e.participant,n=e.children,a=_t(),c=je(t).find((function(e){return"camera"===e.trackName})),i=Boolean(c),o=nt(ye(c));return r.a.createElement("div",{"data-cy-main-participant":!0,className:Object(Oe.a)(a.container,Object(Ne.a)({},a.isVideoSwitchedOff,o))},r.a.createElement("div",{className:a.infoContainer},r.a.createElement("h4",{className:a.identity},t.identity,!i&&r.a.createElement(tt.a,null))),o&&r.a.createElement(Ve,null),n)}var Mt=Object(oe.a)({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"calc(100% - 70px)",background:"black",border:"2px solid cyan",borderStyle:"dashed"}});function Lt(){var e=Mt(),t=Object(b.c)((function(e){return e.room})).participants,n=Object(a.useState)(t[Math.floor(Math.random()*t.length)]),c=Object(u.a)(n,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){var e=setInterval((function(){o(t[Math.floor(Math.random()*t.length)])}),15e3);return function(){return clearInterval(e)}}),[]),i?r.a.createElement(Rt,{participant:i},r.a.createElement(Se,{participant:i,disableAudio:!0})):r.a.createElement("div",{className:e.container},"No one selected")}var Pt=n(198),Bt=n.n(Pt),Dt=Object(oe.a)({streamWrapper:{display:function(e){return"dj"===e.tabStatus?"flex":"none"},flexDirection:"row",justifyContent:"center",alignItems:"center",height:"calc(100% - 70px)"}}),Wt=function(e){var t=e.tabStatus,n=Dt({tabStatus:t}),a=Object(b.c)((function(e){return e.room})).stream.url;return r.a.createElement("div",{className:n.streamWrapper},r.a.createElement(Bt.a,{url:a,width:"100%",height:"100%",controls:!1,config:{youtube:{playerVars:{showinfo:1,modestbranding:1}}},onError:function(){console.log("ERROR")},playing:!0}))},Ft=Object(oe.a)((function(e){return{tabControlWrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},tabControlItem:{padding:e.spacing(1),opacity:"0.3","& > img":{width:"100%"}},tabControlItemActive:{padding:e.spacing(1),opacity:1,"& > img":{width:"100%"}}}})),Ut=function(e){var t=e.status,n=e.setTabStatus,a=Ft();return r.a.createElement("div",{className:a.tabControlWrapper},r.a.createElement("div",{className:"".concat("dj"===t?a.tabControlItemActive:a.tabControlItem),onClick:function(){return n("dj")}},r.a.createElement("img",{src:"./assets/live-dj-white.png",alt:"DJ"})),r.a.createElement("div",{className:"".concat("fav"===t?a.tabControlItemActive:a.tabControlItem),onClick:function(){return n("fav")}},r.a.createElement("img",{src:"./assets/fav.png",alt:"fav"})),r.a.createElement("div",{className:"".concat("grid"===t?a.tabControlItemActive:a.tabControlItem),onClick:function(){return n("grid")}},r.a.createElement("img",{src:"./assets/grid.png",alt:"Grid"})))},zt=n(476),Vt=n(465),qt=n(199),Ht=n.n(qt),Gt=n(200),Kt=n.n(Gt),Jt=Object(oe.a)((function(e){return{volumeControlWrapper:{display:"block"}}})),Qt=Object(it.a)({root:{color:"#fff"},thumb:{backgroundColor:"#fff"}})(zt.a),Yt=function(){var e=Jt(),t=r.a.useState(30),n=Object(u.a)(t,2),a=n[0],c=n[1];return r.a.createElement("div",{className:e.volumeControlWrapper},r.a.createElement(Vt.a,{container:!0,spacing:2},r.a.createElement(Vt.a,{item:!0},r.a.createElement(Ht.a,null)),r.a.createElement(Vt.a,{item:!0,xs:!0},r.a.createElement(Qt,{value:a,onChange:function(e,t){c(t)},"aria-labelledby":"continuous-slider",style:{thumb:{backgroundColor:"#fff"}}})),r.a.createElement(Vt.a,{item:!0},r.a.createElement(Kt.a,null))))},$t=n(472),Xt=n(201),Zt=n.n(Xt),en=n(202),tn=n.n(en);n(20);function nn(){var e=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){he.a.createLocalAudioTrack().then((function(e){r(e)}))}),[]),Object(a.useEffect)((function(){var e=function(){return r(void 0)};if(n)return n.on("stopped",e),function(){n.off("stopped",e)}}),[n]),n}(),t=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useCallback)((function(){return he.a.createLocalVideoTrack({frameRate:24,height:720,width:1280,name:"camera"}).then((function(e){return r(e),e}))}),[]);return Object(a.useEffect)((function(){c()}),[c]),Object(a.useEffect)((function(){var e=function(){return r(void 0)};if(n)return n.on("stopped",e),function(){n.off("stopped",e)}}),[n]),[n,c]}(),n=Object(u.a)(t,2),r=n[0],c=n[1];return{localTracks:[e,r].filter((function(e){return void 0!==e})),getLocalVideoTrack:c}}window.TwilioVideo=he.a;Object(a.createContext)(null);Object(a.createContext)();var an=Object(it.a)((function(e){return{root:{width:42,height:26,padding:0,margin:e.spacing(1)},switchBase:{padding:1,"&$checked":{transform:"translateX(16px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#52d869",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[200],opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,n=Object(se.a)(e,["classes"]);return r.a.createElement($t.a,Object.assign({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},n))})),rn=function(){var e=function(){var e=nn().localTracks.find((function(e){return"audio"===e.kind}));return[Re(e),Object(a.useCallback)((function(){e&&(e.isEnabled?e.disable():e.enable())}),[e])]}(),t=Object(u.a)(e,2),n=t[0],c=t[1];return r.a.createElement(an,{checked:n,onChange:function(){c()},name:"camera"})},cn=function(){var e=function(){var e=nn(),t=e.localTracks,n=e.getLocalVideoTrack,r=t.find((function(e){return"camera"===e.name})),c=Object(b.c)((function(e){return e.room.localParticipant})),i=Object(a.useCallback)((function(){if(r){if(c){var e=c.unpublishTrack(r);c.emit("trackUnpublished",e)}r.stop()}else n().then((function(e){c&&c.publishTrack(e)}))}),[r,c,n]);return[!!r,i]}(),t=Object(u.a)(e,2),n=t[0],c=t[1];return r.a.createElement(an,{checked:n,onChange:function(){c()},name:"camera"})},on=function(){var e=r.a.useState({mic:!0,camera:!0}),t=Object(u.a)(e,2);t[0],t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt.a,{container:!0,spacing:2},r.a.createElement(Vt.a,{item:!0},r.a.createElement(Zt.a,null)),r.a.createElement(Vt.a,{item:!0,xs:!0},"Webcam"),r.a.createElement(Vt.a,{item:!0},r.a.createElement(cn,null))),r.a.createElement(Vt.a,{container:!0,spacing:2},r.a.createElement(Vt.a,{item:!0},r.a.createElement(tn.a,null)),r.a.createElement(Vt.a,{item:!0,xs:!0},"Microphone"),r.a.createElement(Vt.a,{item:!0},r.a.createElement(rn,null))))};var ln=Object(oe.a)((function(e){return{participantInfo:{color:"cyan"}}})),un=function(e){e.tabStatus;var t=ln(),n=Object(b.c)((function(e){return e.room})).participants.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt.a,{container:!0,spacing:2},r.a.createElement(Vt.a,{item:!0},r.a.createElement(f.a,null,"participants (",r.a.createElement("span",{className:t.participantInfo},n+1),")"))),r.a.createElement(Yt,null),r.a.createElement(on,null))},sn=Object(oe.a)((function(e){return{randomButton:{marginBottom:e.spacing(1),marginTop:e.spacing(2),color:"cyan",border:"2px solid cyan",borderRadius:"0px",float:"right"},configureButton:{color:"#19ff03",border:"2px solid #19ff03"},buttonGroup:{display:"flex",flexDirection:"row",justifyContent:"flex-end",padding:"5px",alignItems:"flex-end"}}})),dn=function(e){var t=e.role,n=e.onConfigureLiveStream,a=e.onRandomButton,c=sn();return r.a.createElement("div",{className:c.buttonGroup},r.a.createElement(s.a,{variant:"outlined",className:c.randomButton,onClick:a},"Random Rooms"),"dj"===t?r.a.createElement(s.a,{variant:"outlined",className:Object(Oe.a)(c.randomButton,c.configureButton),style:{marginLeft:"5px"},onClick:n},"Configure Live Stream"):null)},mn=n(34),fn=n.n(mn),pn=n(40),bn=function(){var e=Object(b.c)((function(e){return e.user})),t="".concat(e.identity,"-mic"),n=Object(b.b)(),a=Object(pn.b)().enqueueSnackbar;return r.a.createElement(fn.a,{channel:t,event:"mic-on",onUpdate:function(e){"on"===e.message?(n(J({identity:e.name,isOn:!0})),a("microphone turned on with ".concat(e.name),{variant:"info",anchorOrigin:{vertical:"top",horizontal:"right"}})):(n(J({identity:e.name,isOn:!1})),a("microphone turned off with ".concat(e.name),{variant:"warning",anchorOrigin:{vertical:"top",horizontal:"right"}}))}})},hn=function(){var e=Object(b.c)((function(e){return e.user})),t="".concat(e.identity,"-message"),n=Object(b.b)(),a=Object(pn.b)().enqueueSnackbar;return r.a.createElement(fn.a,{channel:t,event:"message",onUpdate:function(e){var t=e.name,r=e.message;n(X({identity:t,message:r,sent:!1})),a("A new message from ".concat(t),{variant:"info",anchorOrigin:{vertical:"top",horizontal:"right"}})}})},gn=function(e){var t=e.isOpen,n=e.senderName,a=e.handleAgree,c=e.handleDecline,i=Object(b.c)((function(e){return e.room})).participants.find((function(e){return e.identity===n}));return r.a.createElement(h.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(O.a,null,r.a.createElement("div",null,r.a.createElement(ct,{participant:i,disableAudio:!0})),r.a.createElement("div",null,n," wants to lock his room with you.")),r.a.createElement(g.a,null,r.a.createElement(s.a,{onClick:a,color:"secondary",variant:"contained"},"Agree"),r.a.createElement(s.a,{onClick:c,color:"default",variant:"contained"},"Decline")))},On=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),o=Object(u.a)(i,2),l=o[0],s=o[1],d=Object(b.c)((function(e){return e.user})).identity,m=Object(b.b)(),f=function(){var e=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m(re({identity:l})),c(!1)}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(gn,{isOpen:n,senderName:l,handleAgree:f,handleDecline:function(){try{m(function(e){var t=e.identity;return function(){var e=Object(x.a)(k.a.mark((function e(n,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:n(K({identity:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}({identity:l})),c(!1)}catch(e){console.log(e)}}}),r.a.createElement(fn.a,{channel:"".concat(d,"-unlock"),event:"unlock",onUpdate:function(e){s(e.name),c(!0)}}))},vn=function(){var e=Object(b.c)((function(e){return e.user})),t="".concat(e.identity,"-unlock-accept"),n=Object(b.b)(),a=Object(pn.b)().enqueueSnackbar;return r.a.createElement(fn.a,{channel:t,event:"unlock-accept",onUpdate:function(e){var t=e.name;n(G({identity:t})),a("".concat(e.name," accepted your lock request"),{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}})}})},En=function(){var e=Object(b.c)((function(e){return e.user})),t="".concat(e.identity,"-lock-request"),n=Object(b.b)(),a=Object(pn.b)().enqueueSnackbar;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fn.a,{channel:t,event:"lock",onUpdate:function(e){n(K({identity:e.name})),a("".concat(e.name," locked you"),{variant:"warning",anchorOrigin:{vertical:"top",horizontal:"right"}})}}))},jn=function(){var e=Object(b.b)(),t=Object(pn.b)().enqueueSnackbar;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fn.a,{channel:"airlock-channel",event:"stream-url-change",onUpdate:function(n){console.log(n.message),e(U(n.message)),t("New stream url set",{variant:"info",anchorOrigin:{vertical:"top",horizontal:"right"}})}}),r.a.createElement(On,null),r.a.createElement(vn,null),r.a.createElement(En,null),r.a.createElement(bn,null),r.a.createElement(hn,null))},yn=Object(oe.a)((function(e){return{infoBar:{color:"#464646",background:"#F4F4F4",borderRadius:"4px 4px 0 0",height:"10%",alignSelf:"flex-start",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0px 2px 5px rgba(0,0,0,.2)"},leftInnerContainer:{color:"#464646",flex:"0.8",display:"flex",alignItems:"center",marginLeft:"5%",justifyContent:"center",fontWeight:800},rightInnerContainer:{display:"flex",flex:"0.2",justifyContent:"flex-end"}}})),kn=Object(it.a)((function(e){return{root:{minWidth:"auto"}}}))(s.a),xn=function(e){var t=e.room,n=e.handleClose,a=yn();return r.a.createElement("div",{className:a.infoBar},r.a.createElement("div",{className:a.leftInnerContainer}," Chat with ",t),r.a.createElement("div",{className:a.rightInnerContainer},r.a.createElement(kn,{onClick:n},r.a.createElement(Ot,null))))},wn=(n(368),Object(oe.a)((function(e){return{form:{display:"flex",flexDirection:"column",padding:"0px 5px"},sendButton:{backgroundColor:"blue",marginTop:"2px",float:"right",textDecoration:"none",background:"#2979FF",padding:"10px",color:"#fff !important",border:"none",width:"fit-content",alignSelf:"flex-end",borderRadius:"5px","&:focus":{outline:"none"}}}}))),Cn=function(e){var t=e.sendMessage,n=e.setMessage,a=e.message,c=wn();return r.a.createElement("form",{className:c.form},r.a.createElement("input",{type:"text",placeholder:"Type a message...",value:a,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?t(e):null}}),r.a.createElement("button",{onClick:t,className:c.sendButton},"Send ",r.a.createElement(gt,null)))},Sn=(n(369),function(e){var t=e.message;return t.sent?r.a.createElement("div",{className:"messageContainer justifyEnd"},r.a.createElement("div",{className:"messageBox backgroundBlue"},r.a.createElement("p",{className:"messageText colorWhite"},t.text))):r.a.createElement("div",{className:"messageContainer justifyStart"},r.a.createElement("div",{className:"messageBox backgroundLight"},r.a.createElement("p",{className:"messageText colorDark"},t.text)))}),Nn=n(203),In=n.n(Nn),An=Object(oe.a)((function(e){return{messages:{height:"240px",overflowY:"scroll"}}})),Tn=function(e){var t=e.messages,n=An(),c=Object(a.useRef)(null),i=function(){c.current.scrollIntoView({behavior:"smooth"})};return Object(a.useEffect)(i,[]),Object(a.useEffect)(i,[t]),r.a.createElement("div",{className:n.messages},r.a.createElement(In.a,null,t.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(Sn,{key:t,message:e}))})),r.a.createElement("div",{ref:c})))},_n=Object(oe.a)((function(e){return{chatContainer:{display:"flex",flexDirection:"column",justifyContent:"space-between",background:"#ffffff",borderRadius:"5px",height:"100%",width:"100%"}}})),Rn=function(e){e.me;var t=e.opponent,n=e.messages,c=e.handleSendMessage,i=e.handleClose,o=_n(),l=Object(a.useState)(""),s=Object(u.a)(l,2),d=s[0],m=s[1];return r.a.createElement("div",{className:o.chatContainer},r.a.createElement(xn,{room:t,handleClose:i}),r.a.createElement(Tn,{messages:n,name:t}),r.a.createElement(Cn,{message:d,setMessage:m,sendMessage:function(e){e.preventDefault(),c(d),m("")}}))},Mn=function(){var e=Object(b.c)((function(e){return e.room})),t=Object(b.c)((function(e){return e.user.identity})),n=Object(b.b)(),a=e.pins.find((function(t){return t.identity===e.chatMember})),c=a&&a.chats?a.chats:[];return r.a.createElement(r.a.Fragment,null,a&&e.chatOpen?r.a.createElement(Rn,{me:t,opponent:a.identity,messages:c,handleSendMessage:function(t){n(function(e){var t=e.identity,n=e.message;return function(){var e=Object(x.a)(k.a.mark((function e(a,r){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t,n);case 3:a(X({identity:t,message:n,sent:!0})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}({identity:e.chatMember,message:t}))},handleClose:function(){n($())}}):null)},Ln=Object(oe.a)((function(e){return{listItem:Object(Ne.a)({width:"33%",height:"fit-content"},e.breakpoints.down("xs"),{width:"50%"})}})),Pn=Object(ve.a)("div")((function(e){e.theme;return{display:"flex",flexWrap:"wrap",overflowY:"scroll",height:"calc(100% - 70px)"}})),Bn=function(){var e=Object(b.c)((function(e){return e.room})),t=(e.room,e.participants),n=(e.room.localParticipant,Ln());return r.a.createElement(Pn,null,t.map((function(e){return r.a.createElement("div",{className:n.listItem},r.a.createElement(ct,{key:e.sid,participant:e,disableAudio:!0}))})))},Dn=Object(ve.a)("div")((function(e){e.theme;return{border:"1px solid #757575",position:"relative",display:"grid",width:"100%",height:"100%",gridTemplateColumns:"repeat(6, minmax(0, 1fr))",gridTemplateRows:"repeat(5, minmax(0, 1fr))",gap:"5px 5px",gridTemplateAreas:'"lg mp mp mp mp ct"\n                      "mg mp mp mp mp bt"\n                      "mg mp mp mp mp bt"\n                      "me mp mp mp mp t7"\n                      "t1 t2 t3 t4 t5 t6"'}})),Wn=Object(oe.a)((function(e){return{mainWrapper:{backgroundColor:"#3f3f3f",color:e.palette.primary.contrastText,height:"100vh",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},mainViewer:{gridArea:"mp",padding:e.spacing(1),backgroundColor:"#343334"},logo:{gridArea:"lg",textAlign:"center",paddingTop:"10px"},chat:{gridArea:"mg",paddingLeft:"5px"},me:{gridArea:"me"},tabControl:{gridArea:"ct"},deviceContro:{gridArea:"bt"},t1:{gridArea:"t1"},t2:{gridArea:"t2"},t3:{gridArea:"t3"},t4:{gridArea:"t4"},t5:{gridArea:"t5"},t6:{gridArea:"t6"},t7:{gridArea:"t7"},t8:{gridArea:"t8"},showVideo:{display:"block"},hideVideo:{display:"none"}}})),Fn=function(){var e=Wn(),t=function(){var e=Object(b.c)((function(e){return e.room.room})),t=Object(a.useState)("disconnected"),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(){c(e.state||"disconnected"),"connected"===e.state&&console.log(e)};return t(),e.on("disconnected",t).on("reconnected",t).on("reconnecting",t),function(){e.off("disconnected",t).off("reconnected",t).off("reconnecting",t)}}),[e]),r}(),n=Object(a.useState)("dj"),c=Object(u.a)(n,2),i=c[0],o=c[1],l=Object(b.c)((function(e){return e.user})),s=Object(a.useState)(!1),d=Object(u.a)(s,2),m=d[0],p=d[1],h=Object(b.b)();return r.a.createElement(r.a.Fragment,null,m?r.a.createElement(Ct,{showDialog:m,closeDialog:function(){return p(!1)},setStreamUrl:function(e){console.log(e),h(function(e){return function(){var t=Object(x.a)(k.a.mark((function t(n,a){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R(e);case 3:n(U(e)),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),n(z(e)),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))}}):null,r.a.createElement("main",{className:e.mainWrapper},"connected"===t?r.a.createElement(r.a.Fragment,null,r.a.createElement(jn,null),r.a.createElement(Dn,null,r.a.createElement("div",{className:e.mainViewer},r.a.createElement(Wt,{tabStatus:i}),"dj"===i?null:"fav"===i?r.a.createElement(Lt,null):r.a.createElement(Bn,null),r.a.createElement(dn,{role:l.role,onConfigureLiveStream:function(){p(!0)},onRandomButton:function(){h(ee()),console.log("asdf")}})),r.a.createElement("div",{className:e.logo},r.a.createElement("img",{src:"./assets/logo.png",alt:"logo"}),r.a.createElement(f.a,{variant:"body2"},"squareparty")),r.a.createElement("div",{className:e.chat},r.a.createElement(Mn,null)),r.a.createElement("div",{className:e.tabControl},r.a.createElement(Ut,{status:i,setTabStatus:o})),r.a.createElement("div",{className:e.deviceControl},r.a.createElement(un,{tabStatus:i})),r.a.createElement("div",{className:e.me},r.a.createElement(Tt,null)),r.a.createElement("div",{className:e.t1},r.a.createElement(wt,{pinId:0})),r.a.createElement("div",{className:e.t2},r.a.createElement(wt,{pinId:1})),r.a.createElement("div",{className:e.t3},r.a.createElement(wt,{pinId:2})),r.a.createElement("div",{className:e.t4},r.a.createElement(wt,{pinId:3})),r.a.createElement("div",{className:e.t5},r.a.createElement(wt,{pinId:4})),r.a.createElement("div",{className:e.t6},r.a.createElement(wt,{pinId:5})),r.a.createElement("div",{className:e.t7},r.a.createElement(wt,{pinId:6})))):r.a.createElement("div",null," Not Connected !")))},Un={bandwidthProfile:{video:{mode:"collaboration",dominantSpeakerPriority:"standard",renderDimensions:{high:{height:1080,width:1920},standard:{height:720,width:1280},low:{height:90,width:160}}}},dominantSpeaker:!0,maxAudioBitrate:12e3,networkQuality:{local:1,remote:1},preferredVideoCodecs:[{codec:"VP8",simulcast:!0}]},zn=function(){var e=ge().token,t=Object(b.b)(),n=nn(),c=n.localTracks,i=(n.getLocalVideoTrack,Object(a.useRef)((function(){}))),o=Object(a.useRef)([]);Object(a.useEffect)((function(){o.current=c}),[c]),Object(a.useEffect)((function(){var n=function(e){console.log(e.identity,"=> connected"),t(V(e))},a=function(e){console.log(e.identity,"=> disconnected"),t(q(e))};return he.a.connect(e,Object(pe.a)(Object(pe.a)({},Un),{},{tracks:[]})).then((function(e){console.log("CONNECTED",e),t(Q(e)),e.once("disconnected",(function(){setTimeout((function(){return t(Q(null))})),window.removeEventListener("beforeunload",i.current)})),window.twilioRoom=e,o.current.forEach((function(t){return e.localParticipant.publishTrack(t,{priority:"video"===t.kind?"low":"standard"})})),i.current=function(){console.log("beforeunload hook called!"),e.disconnect()},window.addEventListener("beforeunload",i.current),e.on("participantConnected",n),e.on("participantDisconnected",a),e.participants.forEach(n)})),function(){t(Q(null))}}),[]);var l=Object(b.c)((function(e){return e.room.room}));return r.a.createElement("div",{className:"room"},null!==l&&"connected"===l.state?r.a.createElement(Fn,null):r.a.createElement("div",null," Connecting, Please wait for a while ..."))};var Vn=function(){return fe(),r.a.createElement(pn.a,{maxSnack:3},r.a.createElement(o.a,null,r.a.createElement(l.d,null,r.a.createElement(de,{path:"/login"},r.a.createElement(ue,null)),r.a.createElement(me,{path:"/party"},r.a.createElement(zn,null)),r.a.createElement(l.b,{path:"*"},r.a.createElement(l.a,{to:"/party"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qn,Hn,Gn=n(54),Kn=n(468),Jn={access_code:"",name:"",token:"",role:""},Qn=Object(Kn.a)((qn={},Object(Ne.a)(qn,"LOGIN_FAILED",(function(){return N("airlock_token",""),Jn})),Object(Ne.a)(qn,"LOGIN_SUCCESS",(function(e,t){return null===t.payload?Jn:(N("airlock_token",t.payload.access_token),Object(pe.a)({},t.payload))})),qn),Jn),Yn=(Object(w.a)("SET_TWILIO_TOKEN"),Object(Kn.a)(Object(Ne.a)({},"SET_TWILIO_TOKEN",(function(e,t){return{token:t.payload}})),{token:"",room:null})),$n={room:null,stream:{url:""},dj:"",pins:[],participants:[],chatOpen:!1,chatMember:"",mainSelection:""},Xn=Object(Kn.a)((Hn={},Object(Ne.a)(Hn,"INIT_ROOM",(function(e,t){return $n})),Object(Ne.a)(Hn,"SET_STREAM_URL_SUCCESS",(function(e,t){return Object(pe.a)(Object(pe.a)({},e),{},{stream:{url:t.payload}})})),Object(Ne.a)(Hn,"SET_STREAM_URL_FAILED",(function(e,t){return Object(pe.a)(Object(pe.a)({},e),{},{stream:{url:""}})})),Object(Ne.a)(Hn,"PARTICIPANT_JOINED",(function(e,t){var n=[].concat(Object(Ee.a)(e.participants),[t.payload]),a=t.payload;return!e.pins.find((function(e){return e.identity===a.identity}))&&e.pins.length<7?Object(pe.a)(Object(pe.a)({},e),{},{participants:n,pins:[].concat(Object(Ee.a)(e.pins),[{identity:a.identity,locked:!1,sent:!1,mic:!1,chat:!1,chats:[]}])}):Object(pe.a)(Object(pe.a)({},e),{},{participants:n})})),Object(Ne.a)(Hn,"PARTICIPANT_EXIT",(function(e,t){var n=t.payload,a=Object(Ee.a)(e.participants).filter((function(e){return e.identity!==n.identity})),r=e.pins.filter((function(e){return e.identity!==n.identity}));return Object(pe.a)(Object(pe.a)({},e),{},{participants:a||[],pins:r||[],chatOpen:e.chatMember!==n.identity,chatMember:e.chatMember===n.identity?"":e.chatMember})})),Object(Ne.a)(Hn,"INIT_PARTICIPANTS",(function(e,t){return Object(pe.a)(Object(pe.a)({},e),{},{participants:Object(Ee.a)(t.payload.participants)})})),Object(Ne.a)(Hn,"SET_TWILIO_ROOM",(function(e,t){return Object(pe.a)(Object(pe.a)({},e),{},{room:t.payload})})),Object(Ne.a)(Hn,"SET_PIN_SENT",(function(e,t){var n=t.payload.identity,a=Object(Ee.a)(e.pins),r=a.findIndex((function(e){return e.identity===n})),c=a[r];return a[r]=Object(pe.a)(Object(pe.a)({},c),{},{sent:!0}),Object(pe.a)(Object(pe.a)({},e),{},{pins:a})})),Object(Ne.a)(Hn,"SET_PIN_UNLOCK",(function(e,t){var n=t.payload.identity,a=Object(Ee.a)(e.pins),r=a.findIndex((function(e){return e.identity===n})),c=a[r];return a[r]=Object(pe.a)(Object(pe.a)({},c),{},{locked:!0}),Object(pe.a)(Object(pe.a)({},e),{},{pins:a})})),Object(Ne.a)(Hn,"SET_PIN_LOCK",(function(e,t){var n=t.payload.identity,a=Object(Ee.a)(e.pins),r=a.findIndex((function(e){return e.identity===n}));a[r];return a[r]={identity:n,locked:!1,sent:!1,mic:!1,chat:!1,chats:[]},Object(pe.a)(Object(pe.a)({},e),{},{chatOpen:!1,chatMember:"",pins:a})})),Object(Ne.a)(Hn,"SET_PIN_MIC",(function(e,t){var n=t.payload.identity,a=Object(Ee.a)(e.pins),r=a.findIndex((function(e){return e.identity===n})),c=a[r];return a[r]=Object(pe.a)(Object(pe.a)({},c),{},{mic:t.payload.isOn}),Object(pe.a)(Object(pe.a)({},e),{},{pins:a})})),Object(Ne.a)(Hn,"INIT_CHAT_ROOM",(function(e,t){return Object(pe.a)(Object(pe.a)({},e),{},{chatMember:"",chatOpen:!1})})),Object(Ne.a)(Hn,"OPEN_CHAT",(function(e,t){var n=Object(Ee.a)(e.pins),a=n.findIndex((function(e){return e.identity===t.payload.identity})),r=n[a],c=r.chats.map((function(e){return Object(pe.a)(Object(pe.a)({},e),{},{read:!0})}));return n[a]=Object(pe.a)(Object(pe.a)({},r),{},{chats:c}),Object(pe.a)(Object(pe.a)({},e),{},{chatOpen:!0,chatMember:t.payload.identity,pins:n})})),Object(Ne.a)(Hn,"CLOSE_CHAT",(function(e,t){return Object(pe.a)(Object(pe.a)({},e),{},{chatOpen:!1,chatMember:""})})),Object(Ne.a)(Hn,"ADD_MESSAGE",(function(e,t){var n=t.payload.identity,a=Object(Ee.a)(e.pins),r=a.findIndex((function(e){return e.identity===n})),c=a[r];return a[r]=Object(pe.a)(Object(pe.a)({},c),{},{chats:[].concat(Object(Ee.a)(c.chats),[{text:t.payload.message,sent:t.payload.sent,read:!!t.payload.sent||e.chatMember===c.identity}])}),Object(pe.a)(Object(pe.a)({},e),{},{pins:a})})),Object(Ne.a)(Hn,"SELECT_MAIN",(function(e,t){return Object(pe.a)(Object(pe.a)({},e),{},{mainSelection:t.payload.identity})})),Object(Ne.a)(Hn,"RANDOMIZE_PINS",(function(e,t){for(var n=Object(Ee.a)(e.pins),a=0;a<7;a++)if(!n[a]||!0!==n[a].locked){var r=e.participants.filter((function(e){return!n.find((function(t){return t.identity===e.identity}))})),c=r[Math.floor(Math.random()*r.length)];c&&(n[a]={identity:c.identity,locked:!1,sent:!1,mic:!1,chat:!1,chats:[]})}return Object(pe.a)(Object(pe.a)({},e),{},{pins:n})})),Hn),$n),Zn=Object(Gn.combineReducers)({user:Qn,room:Xn,twilio:Yn}),ea=n(204),ta=n(205),na=n(207),aa=n(466),ra=Object(na.a)({type:"dark",palette:{primary:{main:"#383E4A"}},sidebarWidth:260,sidebarMobileHeight:90}),ca=function(e){var t=e.children;return r.a.createElement(aa.a,{theme:ra}," ",t," ")},ia=n(206),oa=n.n(ia),la=Object(Gn.createStore)(Zn,Object(ta.composeWithDevTools)(Object(Gn.applyMiddleware)(ea.a))),ua=new oa.a("3bd70530122dbeb0fa1b",{cluster:"ap3"});Object(mn.setPusherClient)(ua),i.a.render(r.a.createElement(b.a,{store:la},r.a.createElement(ca,null,r.a.createElement(Vn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[220,1,2]]]);
//# sourceMappingURL=main.6f4d294e.chunk.js.map