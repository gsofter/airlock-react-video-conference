{"version":3,"sources":["components/Dialogs/AlertDialog/index.jsx","lib/cookie.js","config/settings.jsx","lib/api.js","redux/room/actions.js","redux/user/actions.js","pages/LoginPage/styles.jsx","pages/LoginPage/index.jsx","components/RouteComponents/LoginRoute.jsx","components/RouteComponents/PublicRoute.jsx","hooks/useAuth/index.jsx","hooks/useUserData/useUserData.jsx","hooks/usePublications/index.jsx","hooks/useTrack/index.jsx","components/Party/tracks/VideoTrack.jsx","components/Party/tracks/AudioTrack.jsx","components/Party/Participant/Publication.jsx","components/Party/Participant/ParticipantTracks.jsx","hooks/useIsTrackEnabled/index.jsx","components/Party/Participant/AudioLevelIndicator.jsx","components/Party/Participant/BandwidthWarning.jsx","components/Party/Participant/NetworkQualityLevel.jsx","components/Party/Participant/ParticipantConnectionIndicator.jsx","hooks/useParticipantIsReconnecting/index.jsx","components/Party/Participant/PinIcon.jsx","hooks/useIsTrackSwitchedOff/index.jsx","components/Party/Participant/ParticipantInfo.jsx","hooks/useParticipantNetworkQualityLevel/index.jsx","components/Party/Participant/Participant.jsx","components/Icons/Icons.jsx","components/Party/Participant/PinParticipant.jsx","components/Dialogs/ConfigureDialog/index.jsx","components/Party/Participant/LocalParticipant.jsx","components/Party/Participant/MainParticipantInfo.jsx","components/Party/Participant/MainParticipant.jsx","components/Party/LiveStream/index.jsx","components/Party/PartyTabControl/index.jsx","components/Party/DeviceControl/VolumeControl.jsx","hooks/useLocalTracks/useLocalTracks.jsx","hooks/useRoom/useRoom.jsx","hooks/useSelectedParticipant/index.jsx","components/Party/VideoPartyProvider/index.jsx","components/Party/DeviceControl/DeviceSwitchControl.jsx","hooks/useLocalAudioToggle/index.jsx","hooks/useLocalVideoToggle/index.jsx","components/Party/DeviceControl/index.jsx","components/Party/ButtonControl/index.jsx","components/PusherProvider/MicPusher.jsx","components/PusherProvider/MessagePusher.jsx","components/Dialogs/AlertDialog/UnlockRequestDialog.jsx","components/PusherProvider/UnLockRequestPusher.jsx","components/PusherProvider/UnLockAcceptPusher.jsx","components/PusherProvider/LockRequestPusher.jsx","components/PusherProvider/PusherProvider.jsx","components/Chat/InfoBar/InfoBar.jsx","components/Chat/Input/Input.jsx","components/Chat/Messages/Message/Message.jsx","components/Chat/Messages/Messages.jsx","components/Chat/Chat.jsx","containers/ChatContainer/ChatContainer.jsx","components/Party/ParticipantsListView/ParticipantsListView.jsx","pages/VideoParty/VideoParty.jsx","hooks/useRoomState/index.jsx","containers/RoomContainer/RoomContainer.jsx","App.js","serviceWorker.js","redux/user/reducer.js","redux/twilio/reducer.js","redux/twilio/actions.js","redux/room/reducer.js","redux/index.js","config/theme.jsx","index.js"],"names":["AlertDialog","isOpen","title","description","buttonText","handleClose","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","color","className","setCookie","name","value","document","cookie","getAccessToken","cookieName","allCookieArray","split","i","length","temp","trim","indexOf","substring","getCookie","API_ENDPOINT","userLogin","passcode","a","axios","post","checkAuth","token","get","headers","Authorization","setStreamUrl","url","sendUnLockRequest","to","console","log","sendLockRequest","unLockAccept","unLockDecline","switchMic","micOn","params","mic_on","sendMessage","message","initRoom","createAction","setStreamUrlSuccess","setStreamUrlFailed","participantJoined","participantExit","setPinSent","setPinUnLock","setPinLock","setPinMic","setTwilioRoom","openChat","closeChat","addMessage","selectMain","randomizePins","identity","isOn","dispatch","getState","api","loginFailed","loginSuccess","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","justifyContent","avatar","margin","backgroundColor","palette","secondary","main","form","width","textAlign","submit","padding","logoImg","height","maxWidth","maxHeight","formTitle","fontWeight","LoginPage","classes","useState","setPasscode","useDispatch","dialogShow","setDialogShow","error","setError","onChangePasscode","useCallback","e","target","onSubmit","preventDefault","res","data","stream_url","userActions","then","catch","Container","CssBaseline","src","alt","Typography","component","variant","TextField","required","fullWidth","label","onChange","helperText","type","href","LoginRoute","children","rest","userData","useSelector","state","user","render","location","pathname","from","useAuth","useEffect","useUserData","usePublications","participant","publications","setPublications","Array","tracks","values","publicationAdded","publication","prevPublications","publicationRemoved","filter","p","on","off","useTrack","track","setTrack","removeTrack","Video","styled","objectFit","VideoTrack","isLocal","ref","useRef","el","current","attach","detach","style","transform","Fragment","AudioTrack","body","appendChild","forEach","remove","Publication","disableAudio","videoPriority","kind","priority","ParticipantTracks","filteredPublications","room","localParticipant","trackName","map","key","useIsTrackEnabled","isEnabled","setIsEnabled","setEnabled","setDisabled","audioContext","clipId","AudioContext","window","webkitAudioContext","initializeAnalyser","audioTrack","stream","MediaStream","mediaStreamTrack","clone","audioSource","createMediaStreamSource","analyser","createAnalyser","smoothingTimeConstant","fftSize","connect","React","memo","size","background","SIZE","isTrackEnabled","SVGClipElement","reinitializeAnalyser","addEventListener","sampleArray","Uint8Array","frequencyBinCount","timer","interval","getByteFrequencyData","volume","Math","min","max","log10","setAttribute","String","stop","removeEventListener","clipPathId","focusable","viewBox","aria-hidden","x","y","fill","d","clipPath","data-cy-audio-mute-icon","BandwidthWarningContainer","position","zIndex","Warning","BandwidthWarning","fontSize","border","boxSizing","borderRight","NetworkQualityLevel","qualityLevel","level","indicator","borderRadius","marginRight","isReconnecting","ParticipantConnectionIndicator","setIsReconnecting","handleReconnecting","handleReconnected","useParticipantIsReconnecting","Tooltip","clsx","PinIcon","placement","SvgIcon","float","useIsTrackSwitchedOff","isSwitchedOff","setIsSwitchedOff","handleSwitchedOff","handleSwitchedOn","createStyles","container","overflow","cursor","stroke","strokeWidth","breakpoints","down","sidebarMobileHeight","isVideoSwitchedOff","infoContainer","hideVideo","infoRow","ParticipantInfo","isSelected","audioPublication","find","videoPublication","networkQualityLevel","setNetworkQualityLevel","handleNewtorkQualityLevelChange","newNetworkQualityLevel","useParticipantNetworkQualityLevel","isVideoEnabled","Boolean","isScreenShareEnabled","data-cy-participant","Participant","LockIcon","icon","faLock","UnlockIcon","faLockOpen","ChatIcon","faCommentDots","MicOnIcon","faMicrophoneAlt","MicOffIcon","faMicrophoneAltSlash","CheckIcon","faCheck","PaperPlanIcon","faPaperPlane","CloseIcon","faTimes","pinMainWrapper","videoWrapper","buttonGroup","marginBottom","emptyScene","button","activeButton","deactiveButton","LockButton","withStyles","root","flex","UnlockButton","MicButton","UnMicButton","ChatButton","PinParticipant","pinId","roomData","participants","pin","pins","pinParticipant","unreadChats","chats","chat","read","onUnLockRequest","onLockRequest","onChat","mic","locked","err","chatMember","Badge","badgeContent","sent","ConfigureDialog","showDialog","closeDialog","setUrl","autoFocus","mainWrapper","participantWrapper","buttonsWrapper","ExitButton","fontStyle","LocalParticipant","history","useHistory","disconnect","push","borderStyle","marginLeft","MainParticipantInfo","data-cy-main-participant","MainParticipant","floor","random","mainParticipant","setMainParticipant","setInterval","clearInterval","streamWrapper","props","tabStatus","LiveStream","controls","config","youtube","playerVars","showinfo","modestbranding","onError","playing","tabControlWrapper","tabControlItem","opacity","tabControlItemActive","PartyTabControl","status","setTabStatus","volumeControlWrapper","VolumeSlider","thumb","Slider","VolumeControl","setVolume","Grid","item","xs","event","newValue","useLocalTracks","createLocalAudioTrack","newTrack","handleStopped","undefined","useLocalAudioTrack","getLocalVideoTrack","createLocalVideoTrack","frameRate","useLocalVideoTrack","videoTrack","localTracks","TwilioVideo","createContext","IOSSwitch","switchBase","common","white","grey","transition","transitions","create","checked","focusVisible","Switch","focusVisibleClassName","disableRipple","ToggleMicButton","disable","enable","useLocalAudioToggle","isAudioEnabled","toggleAudioEnabled","ToggleCameraButton","toggleVideoEnabled","localTrackPublication","unpublishTrack","emit","publishTrack","useLocalVideoToggle","DeviceSwitchControl","camera","participantInfo","DeviceControl","pLen","randomButton","configureButton","ButtonControl","role","onConfigureLiveStream","onRandomButton","MicPusher","channel","enqueueSnackbar","useSnackbar","onUpdate","anchorOrigin","vertical","horizontal","MessagePusher","opp","msg","UnlockRequestDialog","senderName","handleAgree","handleDecline","senderP","UnLockRequestPusher","unlock","setUnlock","setSenderName","myIdentity","handleAgreeUnlockRequest","UnLockAcceptPusher","sender","LockRequestPusher","PusherProvider","infoBar","alignSelf","boxShadow","leftInnerContainer","rightInnerContainer","CloseButton","minWidth","InfoBar","sendButton","textDecoration","outline","Input","setMessage","placeholder","onKeyPress","Message","text","messages","overflowY","Messages","messagesEndRef","scrollToBottom","scrollIntoView","behavior","chatContainer","Chat","me","opponent","handleSendMessage","ChatContainer","chatOpponent","chatOpen","listItem","ScrollContainer","flexWrap","ParticipantListView","sid","gridTemplateColumns","gridTemplateRows","gap","gridTemplateAreas","primary","contrastText","mainViewer","gridArea","logo","paddingTop","paddingLeft","tabControl","deviceContro","t1","t2","t3","t4","t5","t6","t7","t8","showVideo","VideoParty","roomState","setState","setRoomState","useRoomState","showConfigDialog","setShowConfigDialog","roomActions","ParticipantsListView","deviceControl","connectionOptions","bandwidthProfile","video","mode","dominantSpeakerPriority","renderDimensions","high","standard","low","dominantSpeaker","maxAudioBitrate","networkQuality","local","remote","preferredVideoCodecs","codec","simulcast","RoomContainer","disconnectHandlerRef","localTracksRef","participantConnected","participantDisconnected","once","setTimeout","twilioRoom","App","maxSnack","path","PublicRoute","hostname","match","initState","access_code","userReducer","handleActions","action","payload","access_token","twilioReducer","dj","mainSelection","roomReducer","newP","ext","filteredParticipants","filteredPins","pId","foundIndex","findIndex","originPin","pinIndex","updatedChats","candidates","randomPin","combineReducers","twilio","createMuiTheme","sidebarWidth","AirlockTheme","ThemeProvider","store","createStore","Reducer","composeWithDevTools","applyMiddleware","thunk","pusherClient","Pusher","process","cluster","setPusherClient","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6f4d294e.chunk.js","sourcesContent":["import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\n\r\nconst AlertDialog = ({\r\n  isOpen,\r\n  title,\r\n  description,\r\n  buttonText,\r\n  handleClose,\r\n}) => {\r\n  return (\r\n    <Dialog\r\n      open={isOpen}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">\r\n          {description}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"secondary\" className=\"primary\">\r\n          {buttonText || 'Agree'}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default AlertDialog\r\n","export function setCookie(name, value) {\r\n  document.cookie = name + '=' + value + '; Path=/;'\r\n}\r\n\r\nexport function getCookie(cookieName) {\r\n  var name = cookieName + '='\r\n  var allCookieArray = document.cookie.split(';')\r\n  for (var i = 0; i < allCookieArray.length; i++) {\r\n    var temp = allCookieArray[i].trim()\r\n    if (temp.indexOf(name) === 0)\r\n      return temp.substring(name.length, temp.length)\r\n  }\r\n  return ''\r\n}\r\n\r\nexport function getAccessToken() {\r\n  const token = getCookie('airlock_token')\r\n  return token\r\n}\r\n\r\nexport function setAccessToken(token) {\r\n  setCookie('airlock_token', token)\r\n}\r\n\r\nexport function removeAccessToken() {\r\n  setCookie('airlock_token', '')\r\n}\r\n","export const API_ENDPOINT = 'http://localhost:5000/api'\r\n","import axios from 'axios'\r\nimport { getAccessToken } from './cookie'\r\nimport { API_ENDPOINT } from '../config/settings'\r\n\r\n/**\r\n *\r\n * Return identity and twilio_token for user corresponding to passcode\r\n *\r\n * @param passcode string\r\n * @return {* access_code: string, identity: string, token: string }\r\n */\r\nexport const userLogin = async (passcode) =>\r\n  axios.post(`${API_ENDPOINT}/login`, { passcode })\r\n\r\n/**\r\n *\r\n * Check auth with cookie\r\n * if authorized, return user data, if not return null\r\n *\r\n */\r\nexport const checkAuth = async () => {\r\n  const token = getAccessToken()\r\n  return axios.get(`${API_ENDPOINT}/user/check_auth`, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  })\r\n}\r\n\r\n/**\r\n *\r\n * Return twilio token for user\r\n *\r\n * @param\r\n * @return {* token:string }\r\n */\r\nexport const getTwilioToken = () => {\r\n  const token = getAccessToken()\r\n  return axios.get(`${API_ENDPOINT}/twilio/token`, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  })\r\n}\r\n\r\n/**\r\n *\r\n * Set Stream URL\r\n *\r\n */\r\nexport const setStreamUrl = (url) => {\r\n  const token = getAccessToken()\r\n  return axios.post(\r\n    `${API_ENDPOINT}/room/set_stream_url`,\r\n    {\r\n      url: url,\r\n    },\r\n    { headers: { Authorization: `Bearer ${token}` } },\r\n  )\r\n}\r\n\r\n/**\r\n *\r\n * UnLock Request\r\n *\r\n * @param string to\r\n */\r\nexport const sendUnLockRequest = (to) => {\r\n  const token = getAccessToken()\r\n  console.log('Token => ', token)\r\n  return axios.post(\r\n    `${API_ENDPOINT}/room/unlock_request`,\r\n    {\r\n      to,\r\n    },\r\n    { headers: { Authorization: `Bearer ${token}` } },\r\n  )\r\n}\r\n\r\n/**\r\n *\r\n * Lock Request\r\n *\r\n * @param string to\r\n */\r\nexport const sendLockRequest = (to) => {\r\n  const token = getAccessToken()\r\n  return axios.post(\r\n    `${API_ENDPOINT}/room/lock_request`,\r\n    {\r\n      to,\r\n    },\r\n    { headers: { Authorization: `Bearer ${token}` } },\r\n  )\r\n}\r\n\r\n/**\r\n *\r\n * Lock Accept\r\n *\r\n * @param string to\r\n */\r\nexport const unLockAccept = (to) => {\r\n  const token = getAccessToken()\r\n  return axios.post(\r\n    `${API_ENDPOINT}/room/unlock_accept`,\r\n    {\r\n      to,\r\n    },\r\n    { headers: { Authorization: `Bearer ${token}` } },\r\n  )\r\n}\r\n\r\n/**\r\n *\r\n * Lock Accept\r\n *\r\n * @param string to\r\n */\r\nexport const unLockDecline = (to) => {\r\n  const token = getAccessToken()\r\n  return axios.post(\r\n    `${API_ENDPOINT}/room/unlock_decline`,\r\n    {\r\n      to,\r\n    },\r\n    { headers: { Authorization: `Bearer ${token}` } },\r\n  )\r\n}\r\n\r\n/**\r\n *\r\n * Set Mic On\r\n *\r\n * @param string to\r\n * @param boolean micOn\r\n */\r\nexport const switchMic = (to, micOn) => {\r\n  const token = getAccessToken()\r\n  return axios.get(`${API_ENDPOINT}/room/mic`, {\r\n    params: {\r\n      to,\r\n      mic_on: micOn,\r\n    },\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  })\r\n}\r\n\r\nexport const sendMessage = (to, message) => {\r\n  const token = getAccessToken()\r\n  return axios.post(\r\n    `${API_ENDPOINT}/room/message`,\r\n    {\r\n      to,\r\n      message,\r\n    },\r\n    { headers: { Authorization: `Bearer ${token}` } },\r\n  )\r\n}\r\n","import { createAction } from 'redux-actions'\r\nimport * as api from '../../lib/api'\r\nexport const INIT_ROOM = 'INIT_ROOM'\r\nexport const SET_STREAM_URL_SUCCESS = 'SET_STREAM_URL_SUCCESS'\r\nexport const SET_STREAM_URL_FAILED = 'SET_STREAM_URL_FAILED'\r\nexport const PARTICIPANT_JOINED = 'PARTICIPANT_JOINED'\r\nexport const PARTICIPANT_EXIT = 'PARTICIPANT_EXIT'\r\nexport const INIT_PARTICIPANTS = 'INIT_PARTICIPANTS'\r\nexport const SET_TWILIO_ROOM = 'SET_TWILIO_ROOM'\r\nexport const SET_PIN_SENT = 'SET_PIN_SENT'\r\nexport const SET_PIN_UNLOCK = 'SET_PIN_UNLOCK'\r\nexport const SET_PIN_LOCK = 'SET_PIN_LOCK'\r\nexport const SET_PIN_MIC = 'SET_PIN_MIC'\r\nexport const OPEN_CHAT = 'OPEN_CHAT'\r\nexport const CLOSE_CHAT = 'CLOSE_CHAT'\r\nexport const ADD_MESSAGE = 'ADD_MESSAGE'\r\nexport const INIT_CHAT_ROOM = 'INIT_CHAT_ROOM'\r\nexport const SELECT_MAIN = 'SELECT_MAIN'\r\nexport const RANDOMIZE_PINS = 'RANDOMIZE_PINS'\r\nexport const initRoom = createAction(INIT_ROOM)\r\nexport const setStreamUrlSuccess = createAction(SET_STREAM_URL_SUCCESS)\r\nexport const setStreamUrlFailed = createAction(SET_STREAM_URL_FAILED)\r\nexport const participantJoined = createAction(PARTICIPANT_JOINED)\r\nexport const participantExit = createAction(PARTICIPANT_EXIT)\r\nexport const initParticipants = createAction(INIT_PARTICIPANTS)\r\nexport const setPinSent = createAction(SET_PIN_SENT)\r\nexport const setPinUnLock = createAction(SET_PIN_UNLOCK)\r\nexport const setPinLock = createAction(SET_PIN_LOCK)\r\nexport const setPinMic = createAction(SET_PIN_MIC)\r\nexport const setTwilioRoom = createAction(SET_TWILIO_ROOM)\r\nexport const openChat = createAction(OPEN_CHAT)\r\nexport const closeChat = createAction(CLOSE_CHAT)\r\nexport const addMessage = createAction(ADD_MESSAGE)\r\nexport const initChatRoom = createAction(INIT_CHAT_ROOM)\r\nexport const selectMain = createAction(SELECT_MAIN)\r\nexport const randomizePins = createAction(RANDOMIZE_PINS)\r\nexport const setStreamUrl = (url) => async (dispatch, getState) => {\r\n  try {\r\n    await api.setStreamUrl(url)\r\n    dispatch(setStreamUrlSuccess(url))\r\n  } catch (e) {\r\n    dispatch(setStreamUrlFailed(url))\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const switchMic = ({ identity, isOn }) => async (dispatch, getState) => {\r\n  try {\r\n    await api.switchMic(identity, isOn)\r\n    dispatch(setPinMic({ identity, isOn }))\r\n  } catch (e) {\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const sendMessage = ({ identity, message }) => async (\r\n  dispatch,\r\n  getState,\r\n) => {\r\n  try {\r\n    await api.sendMessage(identity, message)\r\n    dispatch(addMessage({ identity, message, sent: true }))\r\n  } catch (e) {\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const sendUnLockRequest = ({ identity }) => async (\r\n  dispatch,\r\n  getState,\r\n) => {\r\n  try {\r\n    await api.sendUnLockRequest(identity)\r\n    dispatch(setPinSent({ identity }))\r\n  } catch (e) {\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const sendLockRequest = ({ identity }) => async (dispatch, getState) => {\r\n  try {\r\n    await api.sendLockRequest(identity)\r\n    dispatch(setPinLock({ identity }))\r\n  } catch (e) {\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const unLockAccept = ({ identity }) => async (dispatch, getState) => {\r\n  try {\r\n    await api.unLockAccept(identity)\r\n    dispatch(setPinUnLock({ identity }))\r\n  } catch (e) {\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const unLockDecline = ({ identity }) => async (dispatch, getState) => {\r\n  try {\r\n    await api.unLockDecline(identity)\r\n    dispatch(setPinLock({ identity }))\r\n  } catch (e) {\r\n    throw e\r\n  }\r\n}\r\n\r\n// export const randomizePins = () => async (dispatch, getState) => {}\r\n// export const openChatBox = ({identity}) = as\r\n","import { createAction } from 'redux-actions'\r\nimport * as api from '../../lib/api'\r\nimport {\r\n  setStreamUrlSuccess,\r\n  setStreamUrlFailed,\r\n  initRoom,\r\n} from '../room/actions'\r\n\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS'\r\nexport const LOGIN_FAILED = 'LOGIN_FAILED'\r\nexport const CHECK_AUTH = 'CHECK_AUTH'\r\n\r\nexport const loginFailed = createAction(LOGIN_FAILED)\r\nexport const loginSuccess = createAction(LOGIN_SUCCESS)\r\n\r\nexport const checkAuth = () => async (dispatch, getState) => {\r\n  try {\r\n    const res = await api.checkAuth()\r\n    dispatch(loginSuccess(res.data))\r\n    dispatch(setStreamUrlSuccess(res.data.stream_url))\r\n  } catch (e) {\r\n    dispatch(loginFailed())\r\n    dispatch(initRoom())\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const loginRequest = (passcode) => async (dispatch) => {\r\n  try {\r\n    const res = await api.userLogin(passcode)\r\n    dispatch(loginSuccess(res.data))\r\n    dispatch(setStreamUrlSuccess(res.data.stream_url))\r\n  } catch (e) {\r\n    dispatch(loginFailed())\r\n    dispatch(initRoom())\r\n    throw e\r\n  }\r\n}\r\n\r\nexport const logout = () => (dispatch) => {\r\n  dispatch(loginFailed())\r\n  dispatch(initRoom())\r\n}\r\n","import { makeStyles } from '@material-ui/core'\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    textAlign: 'center',\r\n    // marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    // margin: theme.spacing(3, 0, 2),\r\n    padding: theme.spacing(1.5),\r\n  },\r\n  logoImg: {\r\n    width: theme.spacing(10),\r\n    height: theme.spacing(10),\r\n    maxWidth: theme.spacing(10),\r\n    maxHeight: theme.spacing(10),\r\n  },\r\n  formTitle: {\r\n    fontWeight: '700',\r\n  },\r\n}))\r\n\r\nexport default useStyles\r\n","import React, { useState, useCallback } from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Container from '@material-ui/core/Container'\r\nimport { useDispatch } from 'react-redux'\r\nimport AlertDialog from '../../components/Dialogs/AlertDialog'\r\nimport * as userActions from '../../redux/user/actions'\r\nimport useStyles from './styles'\r\n\r\nconst LoginPage = () => {\r\n  const classes = useStyles()\r\n  const [passcode, setPasscode] = useState('')\r\n  const dispatch = useDispatch()\r\n  const [dialogShow, setDialogShow] = useState(false)\r\n  const [error, setError] = useState(false)\r\n  const onChangePasscode = useCallback((e) => {\r\n    setError(false)\r\n    setPasscode(e.target.value)\r\n  }, [])\r\n\r\n  const onSubmit = useCallback(\r\n    (e) => {\r\n      e.preventDefault()\r\n      dispatch(userActions.loginRequest(passcode))\r\n        .then(() => {\r\n          // dispatch(userActions.checkAuth())\r\n          console.log('LOGIN SUCCESS')\r\n        })\r\n        .catch((error) => {\r\n          setError(true)\r\n        })\r\n    },\r\n    [dispatch, passcode],\r\n  )\r\n\r\n  return (\r\n    <Container maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <AlertDialog\r\n        isOpen={dialogShow}\r\n        title=\"Access Failed\"\r\n        description=\"Passcode doesn't exit!\"\r\n        buttonText=\"OK\"\r\n        handleClose={() => setDialogShow(false)}\r\n      />\r\n      <div className={classes.paper}>\r\n        <img\r\n          src=\"/assets/Logo-thug.png\"\r\n          alt=\"logo\"\r\n          className={classes.logoImg}\r\n        />\r\n        <Typography component=\"h1\" variant=\"h4\" className={classes.formTitle}>\r\n          Access the party\r\n        </Typography>\r\n        <form className={classes.form} onSubmit={onSubmit}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"passcode\"\r\n            label=\"Enter your unique code\"\r\n            value={passcode}\r\n            onChange={onChangePasscode}\r\n            error={error}\r\n            helperText={error && 'Invalid access code'}\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            margin=\"normal\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            Access\r\n          </Button>\r\n          <Typography component=\"p\" variant=\"body2\">\r\n            If you don't have an access code? <a href=\"#\">Buy a ticket </a>\r\n          </Typography>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default LoginPage\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst LoginRoute = ({ children, ...rest }) => {\r\n  const userData = useSelector((state) => state.user)\r\n  // const roomData = useSelector((state) => state.room)\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        userData.token ? (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/',\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        ) : (\r\n          children\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default LoginRoute\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst LoginRoute = ({ children, ...rest }) => {\r\n  const userData = useSelector((state) => state.user)\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        userData.token ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/login',\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default LoginRoute\r\n","import { useEffect } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { checkAuth } from '../../redux/user/actions'\r\n\r\nconst useAuth = () => {\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    console.log('AUTH CHECKING')\r\n    dispatch(checkAuth())\r\n      .then(() => {\r\n        console.log('AUTH SUCCESS')\r\n      })\r\n      .catch((e) => {\r\n        console.log('AUTH FAILED')\r\n      })\r\n\r\n    return () => {}\r\n  }, [dispatch])\r\n}\r\n\r\nexport default useAuth\r\n","import { useSelector } from 'react-redux'\r\nconst useUserData = () => {\r\n  const userData = useSelector((state) => state.user)\r\n  return userData\r\n}\r\n\r\nexport default useUserData\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport default function usePublications(participant) {\r\n  const [publications, setPublications] = useState([])\r\n\r\n  useEffect(() => {\r\n    // Reset the publications when the 'participant' variable changes.\r\n    setPublications(Array.from(participant.tracks.values()))\r\n\r\n    const publicationAdded = (publication) =>\r\n      setPublications((prevPublications) => [...prevPublications, publication])\r\n    const publicationRemoved = (publication) =>\r\n      setPublications((prevPublications) =>\r\n        prevPublications.filter((p) => p !== publication),\r\n      )\r\n\r\n    participant.on('trackPublished', publicationAdded)\r\n    participant.on('trackUnpublished', publicationRemoved)\r\n    return () => {\r\n      participant.off('trackPublished', publicationAdded)\r\n      participant.off('trackUnpublished', publicationRemoved)\r\n    }\r\n  }, [participant])\r\n\r\n  return publications\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport default function useTrack(publication) {\r\n  const [track, setTrack] = useState(publication && publication.track)\r\n\r\n  useEffect(() => {\r\n    // Reset the track when the 'publication' variable changes.\r\n    setTrack(publication && publication.track)\r\n\r\n    if (publication) {\r\n      const removeTrack = () => setTrack(null)\r\n\r\n      publication.on('subscribed', setTrack)\r\n      publication.on('unsubscribed', removeTrack)\r\n      return () => {\r\n        publication.off('subscribed', setTrack)\r\n        publication.off('unsubscribed', removeTrack)\r\n      }\r\n    }\r\n  }, [publication])\r\n\r\n  return track\r\n}\r\n","import React, { useRef, useEffect } from 'react'\r\nimport { styled } from '@material-ui/core/styles'\r\n\r\nconst Video = styled('video')({\r\n  width: '100%',\r\n  maxHeight: '100%',\r\n  objectFit: 'contain',\r\n})\r\n\r\nexport default function VideoTrack({ track, isLocal }) {\r\n  const ref = useRef(null)\r\n\r\n  useEffect(() => {\r\n    if (!track) return\r\n    const el = ref.current\r\n    // el.muted = true\r\n    // if (track.setPriority && priority) {\r\n    //   track.setPriority(priority)\r\n    // }\r\n    track.attach(el)\r\n    return () => {\r\n      track.detach(el)\r\n      //   if (track.setPriority && priority) {\r\n      //     // Passing `null` to setPriority will set the track's priority to that which it was published with.\r\n      //     track.setPriority(null)\r\n      //   }\r\n    }\r\n  }, [track])\r\n\r\n  // The local video track is mirrored.\r\n  const style = isLocal ? { transform: 'rotateY(180deg)' } : {}\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {track && <Video ref={ref} style={style} />}\r\n    </React.Fragment>\r\n  )\r\n}\r\n","import { useEffect } from 'react'\r\n// import { AudioTrack as IAudioTrack } from 'twilio-video'\r\n\r\nexport default function AudioTrack({ track }) {\r\n  useEffect(() => {\r\n    document.body.appendChild(track.attach())\r\n    return () => track.detach().forEach((el) => el.remove())\r\n  }, [track])\r\n  return null\r\n}\r\n","import React from 'react'\r\nimport useTrack from '../../../hooks/useTrack'\r\nimport VideoTrack from '../tracks/VideoTrack'\r\nimport AudioTrack from '../tracks/AudioTrack'\r\n\r\nexport default function Publication({\r\n  publication,\r\n  isLocal,\r\n  disableAudio,\r\n  videoPriority,\r\n}) {\r\n  const track = useTrack(publication)\r\n\r\n  if (!track) return null\r\n\r\n  switch (track.kind) {\r\n    case 'video':\r\n      return (\r\n        <VideoTrack\r\n          track={track}\r\n          priority={videoPriority}\r\n          isLocal={track.name === 'camera' && isLocal}\r\n        />\r\n      )\r\n    case 'audio':\r\n      return disableAudio ? null : <AudioTrack track={track} />\r\n    default:\r\n      return null\r\n  }\r\n}\r\n","import React from 'react'\r\nimport usePublications from '../../../hooks/usePublications'\r\nimport Publication from './Publication'\r\nimport { useSelector } from 'react-redux'\r\n/*\r\n *  The object model for the Room object (found here: https://www.twilio.com/docs/video/migrating-1x-2x#object-model) shows\r\n *  that Participant objects have TrackPublications, and TrackPublication objects have Tracks.\r\n *\r\n *  The React components in this application follow the same pattern. This ParticipantTracks component renders Publications,\r\n *  and the Publication component renders Tracks.\r\n */\r\n\r\nexport default function ParticipantTracks({ participant, disableAudio }) {\r\n  const room = useSelector((state) => state.room.room)\r\n  const publications = usePublications(participant)\r\n  const isLocal = participant === room.localParticipant\r\n  let filteredPublications\r\n  filteredPublications = publications.filter((p) => p.trackName !== 'screen')\r\n  return (\r\n    <>\r\n      {filteredPublications.map((publication) => (\r\n        <Publication\r\n          key={publication.kind}\r\n          publication={publication}\r\n          participant={participant}\r\n          isLocal={isLocal}\r\n          disableAudio={disableAudio}\r\n        />\r\n      ))}\r\n    </>\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\n\r\nexport default function useIsTrackEnabled(track) {\r\n  const [isEnabled, setIsEnabled] = useState(track ? track.isEnabled : true)\r\n\r\n  useEffect(() => {\r\n    setIsEnabled(track ? track.isEnabled : true)\r\n\r\n    if (track) {\r\n      const setEnabled = () => setIsEnabled(true)\r\n      const setDisabled = () => setIsEnabled(false)\r\n      track.on('enabled', setEnabled)\r\n      track.on('disabled', setDisabled)\r\n      return () => {\r\n        track.off('enabled', setEnabled)\r\n        track.off('disabled', setDisabled)\r\n      }\r\n    }\r\n  }, [track])\r\n\r\n  return isEnabled\r\n}\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { interval } from 'd3-timer'\r\nimport MicOff from '@material-ui/icons/MicOff'\r\nimport useIsTrackEnabled from '../../../hooks/useIsTrackEnabled'\r\n\r\nlet clipId = 0\r\nconst getUniqueClipId = () => clipId++\r\n\r\n// @ts-ignore\r\nconst AudioContext = window.AudioContext || window.webkitAudioContext\r\nlet audioContext\r\n\r\nexport function initializeAnalyser(audioTrack) {\r\n  audioContext = audioContext || new AudioContext()\r\n  const stream = new MediaStream([audioTrack.mediaStreamTrack.clone()])\r\n  const audioSource = audioContext.createMediaStreamSource(stream)\r\n\r\n  const analyser = audioContext.createAnalyser()\r\n  analyser.smoothingTimeConstant = 0.4\r\n  analyser.fftSize = 512\r\n\r\n  audioSource.connect(analyser)\r\n  return analyser\r\n}\r\n\r\nfunction AudioLevelIndicator({ size, audioTrack, background }) {\r\n  const SIZE = size || 24\r\n  const ref = useRef(null)\r\n  const isTrackEnabled = useIsTrackEnabled(audioTrack)\r\n\r\n  useEffect(() => {\r\n    const SVGClipElement = ref.current\r\n\r\n    if (audioTrack && isTrackEnabled && SVGClipElement) {\r\n      let analyser = initializeAnalyser(audioTrack)\r\n\r\n      const reinitializeAnalyser = () => {\r\n        analyser = initializeAnalyser(audioTrack)\r\n      }\r\n\r\n      // Here we reinitialize the AnalyserNode on focus to avoid an issue in Safari\r\n      // where the analysers stop functioning when the user switches to a new tab\r\n      // and switches back to the app.\r\n      window.addEventListener('focus', reinitializeAnalyser)\r\n\r\n      const sampleArray = new Uint8Array(analyser.frequencyBinCount)\r\n\r\n      const timer = interval(() => {\r\n        analyser.getByteFrequencyData(sampleArray)\r\n        let values = 0\r\n\r\n        const length = sampleArray.length\r\n        for (let i = 0; i < length; i++) {\r\n          values += sampleArray[i]\r\n        }\r\n\r\n        const volume = Math.min(\r\n          21,\r\n          Math.max(0, Math.log10(values / length / 3) * 14),\r\n        )\r\n\r\n        SVGClipElement.setAttribute('y', String(21 - volume))\r\n      }, 50)\r\n\r\n      return () => {\r\n        SVGClipElement.setAttribute('y', '21')\r\n        timer.stop()\r\n        window.removeEventListener('focus', reinitializeAnalyser)\r\n      }\r\n    }\r\n  }, [audioTrack, isTrackEnabled])\r\n\r\n  // Each instance of this component will need a unique HTML ID\r\n  const clipPathId = `audio-level-clip-${getUniqueClipId()}`\r\n\r\n  return isTrackEnabled ? (\r\n    <svg\r\n      focusable=\"false\"\r\n      viewBox=\"0 0 24 24\"\r\n      aria-hidden=\"true\"\r\n      height={`${SIZE}px`}\r\n      width={`${SIZE}px`}\r\n    >\r\n      <defs>\r\n        <clipPath id={clipPathId}>\r\n          <rect ref={ref} x=\"0\" y=\"21\" width=\"24\" height=\"24\" />\r\n        </clipPath>\r\n      </defs>\r\n      <path\r\n        fill={background || 'rgba(255, 255, 255, 0.1)'}\r\n        d=\"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\r\n      ></path>\r\n      <path\r\n        fill=\"#0c0\"\r\n        clipPath={`url(#${clipPathId})`}\r\n        d=\"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\r\n      ></path>\r\n    </svg>\r\n  ) : (\r\n    <MicOff\r\n      height={`${SIZE}px`}\r\n      width={`${SIZE}px`}\r\n      style={{ width: 'initial', height: 'initial' }}\r\n      data-cy-audio-mute-icon\r\n    />\r\n  )\r\n}\r\n\r\nexport default React.memo(AudioLevelIndicator)\r\n","import React from 'react'\r\nimport { styled } from '@material-ui/core'\r\n\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline'\r\n\r\nconst BandwidthWarningContainer = styled('div')({\r\n  position: 'absolute',\r\n  zIndex: 1,\r\n  width: '100%',\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n})\r\n\r\nconst Warning = styled('h3')({\r\n  textAlign: 'center',\r\n  margin: '0.6em 0',\r\n})\r\n\r\nexport default function BandwidthWarning() {\r\n  return (\r\n    <BandwidthWarningContainer>\r\n      <div>\r\n        <ErrorOutlineIcon fontSize=\"large\" />\r\n      </div>\r\n      <Warning>Insufficient Bandwidth</Warning>\r\n    </BandwidthWarningContainer>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { styled } from '@material-ui/core/styles'\r\n\r\nconst Container = styled('div')({\r\n  display: 'flex',\r\n  alignItems: 'flex-end',\r\n  '& div': {\r\n    width: '2px',\r\n    border: '1px solid black',\r\n    boxSizing: 'content-box',\r\n    '&:not(:last-child)': {\r\n      borderRight: 'none',\r\n    },\r\n  },\r\n})\r\n\r\nconst STEP = 3\r\n\r\nexport default function NetworkQualityLevel({ qualityLevel }) {\r\n  if (qualityLevel === null) return null\r\n  return (\r\n    <Container>\r\n      {[0, 1, 2, 3, 4].map((level) => (\r\n        <div\r\n          key={level}\r\n          style={{\r\n            height: `${STEP * (level + 1)}px`,\r\n            background: qualityLevel > level ? '#0c0' : '#040',\r\n          }}\r\n        />\r\n      ))}\r\n    </Container>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport useParticipantIsReconnecting from '../../../hooks/useParticipantIsReconnecting'\r\nimport { Tooltip } from '@material-ui/core'\r\n\r\nconst useStyles = makeStyles({\r\n  indicator: {\r\n    width: '10px',\r\n    height: '10px',\r\n    borderRadius: '100%',\r\n    background: '#0c0',\r\n    display: 'inline-block',\r\n    marginRight: '3px',\r\n  },\r\n  isReconnecting: {\r\n    background: '#ffb100',\r\n  },\r\n})\r\n\r\nexport default function ParticipantConnectionIndicator({ participant }) {\r\n  const isReconnecting = useParticipantIsReconnecting(participant)\r\n  const classes = useStyles()\r\n  return (\r\n    <Tooltip\r\n      title={\r\n        isReconnecting\r\n          ? 'Participant is reconnecting'\r\n          : 'Participant is connected'\r\n      }\r\n    >\r\n      <span\r\n        className={clsx(classes.indicator, {\r\n          [classes.isReconnecting]: isReconnecting,\r\n        })}\r\n      ></span>\r\n    </Tooltip>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport default function useParticipantIsReconnecting(participant) {\r\n  const [isReconnecting, setIsReconnecting] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const handleReconnecting = () => setIsReconnecting(true)\r\n    const handleReconnected = () => setIsReconnecting(false)\r\n\r\n    participant.on('reconnecting', handleReconnecting)\r\n    participant.on('reconnected', handleReconnected)\r\n    return () => {\r\n      participant.off('reconnecting', handleReconnecting)\r\n      participant.off('reconnected', handleReconnected)\r\n    }\r\n  }, [participant])\r\n\r\n  return isReconnecting\r\n}\r\n","import React from 'react'\r\nimport { Pin } from '@primer/octicons-react'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport SvgIcon from '@material-ui/core/SvgIcon'\r\n\r\nexport default function PinIcon() {\r\n  return (\r\n    <Tooltip title=\"Participant is pinned. Click to un-pin.\" placement=\"top\">\r\n      <SvgIcon style={{ float: 'right', fontSize: '29px' }}>\r\n        <Pin />\r\n      </SvgIcon>\r\n    </Tooltip>\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\n\r\n// The 'switchedOff' event is emitted when there is not enough bandwidth to support\r\n// a track. See: https://www.twilio.com/docs/video/tutorials/using-bandwidth-profile-api#understanding-track-switch-offs\r\n\r\nexport default function useIsTrackSwitchedOff(track) {\r\n  const [isSwitchedOff, setIsSwitchedOff] = useState(\r\n    track && track.isSwitchedOff,\r\n  )\r\n\r\n  useEffect(() => {\r\n    // Reset the value if the 'track' variable changes\r\n    setIsSwitchedOff(track && track.isSwitchedOff)\r\n\r\n    if (track) {\r\n      const handleSwitchedOff = () => setIsSwitchedOff(true)\r\n      const handleSwitchedOn = () => setIsSwitchedOff(false)\r\n      track.on('switchedOff', handleSwitchedOff)\r\n      track.on('switchedOn', handleSwitchedOn)\r\n      return () => {\r\n        track.off('switchedOff', handleSwitchedOff)\r\n        track.off('switchedOn', handleSwitchedOn)\r\n      }\r\n    }\r\n  }, [track])\r\n\r\n  return !!isSwitchedOff\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport { createStyles, makeStyles } from '@material-ui/core/styles'\r\nimport AudioLevelIndicator from './AudioLevelIndicator'\r\nimport BandwidthWarning from './BandwidthWarning'\r\nimport NetworkQualityLevel from './NetworkQualityLevel'\r\nimport ParticipantConnectionIndicator from './ParticipantConnectionIndicator'\r\nimport PinIcon from './PinIcon'\r\nimport ScreenShare from '@material-ui/icons/ScreenShare'\r\nimport VideocamOff from '@material-ui/icons/VideocamOff'\r\n\r\nimport useParticipantNetworkQualityLevel from '../../../hooks/useParticipantNetworkQualityLevel'\r\nimport useIsTrackSwitchedOff from '../../../hooks/useIsTrackSwitchedOff'\r\nimport useTrack from '../../../hooks/useTrack'\r\nimport usePublications from '../../../hooks/usePublications'\r\n\r\nconst useStyles = makeStyles((theme) =>\r\n  createStyles({\r\n    container: {\r\n      position: 'relative',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      // height: `${(theme.sidebarWidth * 9) / 16}px`,\r\n      height: '100%',\r\n      overflow: 'hidden',\r\n      cursor: 'pointer',\r\n      '& video': {\r\n        filter: 'none',\r\n      },\r\n      '& svg': {\r\n        stroke: 'black',\r\n        strokeWidth: '0.8px',\r\n      },\r\n      [theme.breakpoints.down('xs')]: {\r\n        height: theme.sidebarMobileHeight,\r\n        width: `${(theme.sidebarMobileHeight * 16) / 9}px`,\r\n        marginRight: '3px',\r\n        fontSize: '10px',\r\n      },\r\n    },\r\n    isVideoSwitchedOff: {\r\n      '& video': {\r\n        filter: 'blur(4px) grayscale(1) brightness(1)',\r\n      },\r\n    },\r\n    infoContainer: {\r\n      position: 'absolute',\r\n      zIndex: 1,\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'space-between',\r\n      height: '100%',\r\n      padding: '0.4em',\r\n      width: '100%',\r\n      background: 'transparent',\r\n    },\r\n    hideVideo: {\r\n      // background: 'black',\r\n    },\r\n    identity: {\r\n      background: 'rgba(0, 0, 0, 0.7)',\r\n      padding: '0.1em 0.3em',\r\n      margin: 0,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n    infoRow: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n    },\r\n  }),\r\n)\r\n\r\nexport default function ParticipantInfo({\r\n  participant,\r\n  onClick,\r\n  isSelected,\r\n  children,\r\n}) {\r\n  const publications = usePublications(participant)\r\n\r\n  const audioPublication = publications.find((p) => p.kind === 'audio')\r\n  const videoPublication = publications.find((p) => p.trackName === 'camera')\r\n\r\n  const networkQualityLevel = useParticipantNetworkQualityLevel(participant)\r\n  const isVideoEnabled = Boolean(videoPublication)\r\n  const isScreenShareEnabled = publications.find(\r\n    (p) => p.trackName === 'screen',\r\n  )\r\n\r\n  const videoTrack = useTrack(videoPublication)\r\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack)\r\n\r\n  const audioTrack = useTrack(audioPublication)\r\n\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div\r\n      className={clsx(classes.container, {\r\n        [classes.isVideoSwitchedOff]: isVideoSwitchedOff,\r\n      })}\r\n      onClick={onClick}\r\n      data-cy-participant={participant.identity}\r\n    >\r\n      <div\r\n        className={clsx(classes.infoContainer, {\r\n          [classes.hideVideo]: !isVideoEnabled,\r\n        })}\r\n      >\r\n        <div className={classes.infoRow}>\r\n          <h4 className={classes.identity}>\r\n            <ParticipantConnectionIndicator participant={participant} />\r\n            {participant.identity}\r\n          </h4>\r\n          <NetworkQualityLevel qualityLevel={networkQualityLevel} />\r\n        </div>\r\n        <div>\r\n          <AudioLevelIndicator audioTrack={audioTrack} background=\"white\" />\r\n          {!isVideoEnabled && <VideocamOff />}\r\n          {isScreenShareEnabled && <ScreenShare />}\r\n          {isSelected && <PinIcon />}\r\n        </div>\r\n      </div>\r\n      {isVideoSwitchedOff && <BandwidthWarning />}\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport default function useParticipantNetworkQualityLevel(participant) {\r\n  const [networkQualityLevel, setNetworkQualityLevel] = useState(\r\n    participant.networkQualityLevel,\r\n  )\r\n\r\n  useEffect(() => {\r\n    const handleNewtorkQualityLevelChange = (newNetworkQualityLevel) =>\r\n      setNetworkQualityLevel(newNetworkQualityLevel)\r\n\r\n    setNetworkQualityLevel(participant.networkQualityLevel)\r\n    participant.on(\r\n      'networkQualityLevelChanged',\r\n      handleNewtorkQualityLevelChange,\r\n    )\r\n    return () => {\r\n      participant.off(\r\n        'networkQualityLevelChanged',\r\n        handleNewtorkQualityLevelChange,\r\n      )\r\n    }\r\n  }, [participant])\r\n\r\n  return networkQualityLevel\r\n}\r\n","import React from 'react'\r\nimport ParticipantTracks from './ParticipantTracks'\r\nimport ParticipantInfo from './ParticipantInfo'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function Participant({ participant, disableAudio }) {\r\n  const room = useSelector((state) => state.room.room)\r\n  return (\r\n    <ParticipantInfo participant={participant} disableAudio={disableAudio}>\r\n      <ParticipantTracks\r\n        participant={participant}\r\n        disableAudio={disableAudio}\r\n      />\r\n    </ParticipantInfo>\r\n  )\r\n}\r\n","/**\r\n *\r\n * Custom Icons\r\n *\r\n */\r\n\r\nimport React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {\r\n  faLockOpen,\r\n  faLock,\r\n  faMicrophoneAlt,\r\n  faMicrophoneAltSlash,\r\n  faCheck,\r\n  faPaperPlane,\r\n  faTimes,\r\n} from '@fortawesome/free-solid-svg-icons'\r\nimport { faCommentDots } from '@fortawesome/free-regular-svg-icons'\r\n\r\nexport const LockIcon = () => {\r\n  return <FontAwesomeIcon icon={faLock} />\r\n}\r\nexport const UnlockIcon = () => {\r\n  return <FontAwesomeIcon icon={faLockOpen} />\r\n}\r\nexport const ChatIcon = () => {\r\n  return <FontAwesomeIcon icon={faCommentDots} />\r\n}\r\nexport const MicOnIcon = () => {\r\n  return <FontAwesomeIcon icon={faMicrophoneAlt} />\r\n}\r\nexport const MicOffIcon = () => {\r\n  return <FontAwesomeIcon icon={faMicrophoneAltSlash} />\r\n}\r\nexport const CheckIcon = () => {\r\n  return <FontAwesomeIcon icon={faCheck} />\r\n}\r\n\r\nexport const PaperPlanIcon = () => {\r\n  return <FontAwesomeIcon icon={faPaperPlane} />\r\n}\r\n\r\nexport const CloseIcon = () => {\r\n  return <FontAwesomeIcon icon={faTimes} />\r\n}\r\n","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport Participant from './Participant'\r\nimport { Button, makeStyles, withStyles, Badge } from '@material-ui/core'\r\nimport {\r\n  UnlockIcon,\r\n  ChatIcon,\r\n  LockIcon,\r\n  MicOnIcon,\r\n  CheckIcon,\r\n  MicOffIcon,\r\n} from '../../Icons/Icons'\r\nimport * as api from '../../../lib/api'\r\nimport {\r\n  setPinSent,\r\n  switchMic,\r\n  openChat,\r\n  selectMain,\r\n  sendLockRequest,\r\n  sendUnLockRequest,\r\n} from '../../../redux/room/actions'\r\nconst useStyles = makeStyles((theme) => ({\r\n  pinMainWrapper: {\r\n    height: '100%',\r\n    border: '1px solid blue',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n  },\r\n  videoWrapper: {\r\n    height: 'calc(100% - 40px)',\r\n  },\r\n\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    marginBottom: '0px',\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    height: '40px',\r\n  },\r\n  emptyScene: {\r\n    textAlign: 'center',\r\n    backgroundColor: 'black',\r\n    height: '100%',\r\n    border: '1px solid brown',\r\n    alignItems: 'center',\r\n  },\r\n\r\n  button: {\r\n    width: '50%',\r\n    color: 'white',\r\n  },\r\n\r\n  activeButton: {\r\n    color: '#FF0058',\r\n  },\r\n\r\n  deactiveButton: {\r\n    color: 'white',\r\n  },\r\n}))\r\n\r\nconst LockButton = withStyles({\r\n  root: {\r\n    color: '#80FF00',\r\n    border: '1px solid grey',\r\n    borderRadius: '0px',\r\n    backgroundColor: 'black',\r\n    flex: 1,\r\n  },\r\n})(Button)\r\n\r\nconst UnlockButton = withStyles({\r\n  root: {\r\n    color: '#00ECF8',\r\n    border: '1px solid grey',\r\n    borderRadius: '0px',\r\n    backgroundColor: 'black',\r\n    flex: 1,\r\n  },\r\n})(Button)\r\n\r\nconst MicButton = withStyles({\r\n  root: {\r\n    color: '#FF0058',\r\n    border: '1px solid grey',\r\n    borderRadius: '0px',\r\n    backgroundColor: 'black',\r\n    flex: 1,\r\n  },\r\n})(Button)\r\n\r\nconst UnMicButton = withStyles({\r\n  root: {\r\n    color: 'white',\r\n    border: '1px solid grey',\r\n    borderRadius: '0px',\r\n    backgroundColor: 'black',\r\n    flex: 1,\r\n  },\r\n})(Button)\r\n\r\nconst ChatButton = withStyles({\r\n  root: {\r\n    border: '1px solid grey',\r\n    borderRadius: '0px',\r\n    backgroundColor: 'black',\r\n    flex: 1,\r\n  },\r\n})(Button)\r\n\r\nconst PinParticipant = ({ pinId }) => {\r\n  const classes = useStyles()\r\n  const dispatch = useDispatch()\r\n  const userData = useSelector((state) => state.user)\r\n  const roomData = useSelector((state) => state.room)\r\n  const participants = roomData.participants\r\n  const pins = roomData.pins\r\n  const pin = pins[pinId]\r\n  if (!pin) return <div className={classes.emptyScene}> not Available</div>\r\n  const pinParticipant = participants.find((p) => p.identity === pin.identity)\r\n  const unreadChats = pin.chats.filter((chat) => chat.read === false)\r\n\r\n  const onUnLockRequest = async () => {\r\n    dispatch(sendUnLockRequest({ identity: pin.identity }))\r\n  }\r\n\r\n  const onLockRequest = async () => {\r\n    dispatch(sendLockRequest({ identity: pin.identity }))\r\n  }\r\n\r\n  const onMicTurnOn = () => {\r\n    dispatch(switchMic({ identity: pinParticipant.identity, isOn: true }))\r\n      .then(() => {\r\n        console.log('SET_MIC_ON SUCCESS')\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message)\r\n      })\r\n  }\r\n\r\n  const onMicTurnOff = () => {\r\n    dispatch(switchMic({ identity: pinParticipant.identity, isOn: false }))\r\n      .then(() => {\r\n        console.log('SET_MIC_OFF SUCCESS')\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message)\r\n      })\r\n  }\r\n\r\n  const onChat = () => {\r\n    dispatch(openChat({ identity: pinParticipant.identity }))\r\n  }\r\n\r\n  const handlePinSelect = () => {\r\n    dispatch(selectMain({ identity: pin.identity }))\r\n  }\r\n\r\n  if (!!pinParticipant) {\r\n    return (\r\n      <div className={classes.pinMainWrapper}>\r\n        <div className={classes.videoWrapper} onClick={handlePinSelect}>\r\n          <Participant participant={pinParticipant} disableAudio={!pin.mic} />\r\n        </div>\r\n        {pin.locked === true ? (\r\n          <div className={classes.buttonGroup}>\r\n            {pin.mic ? (\r\n              <MicButton\r\n                variant=\"outline\"\r\n                style={{ root: { color: 'green' } }}\r\n                onClick={onMicTurnOff}\r\n              >\r\n                <MicOnIcon />\r\n              </MicButton>\r\n            ) : (\r\n              <UnMicButton\r\n                variant=\"outline\"\r\n                style={{ root: { color: 'green' } }}\r\n                onClick={onMicTurnOn}\r\n              >\r\n                <MicOffIcon />\r\n              </UnMicButton>\r\n            )}\r\n            {pin.identity === roomData.chatMember ? (\r\n              <ChatButton\r\n                variant=\"outline\"\r\n                onClick={onChat}\r\n                className={classes.activeButton}\r\n              >\r\n                <ChatIcon />\r\n              </ChatButton>\r\n            ) : (\r\n              <ChatButton\r\n                variant=\"outline\"\r\n                onClick={onChat}\r\n                className={classes.deactiveButton}\r\n              >\r\n                {unreadChats.length > 0 ? (\r\n                  <Badge color=\"secondary\" badgeContent={unreadChats.length}>\r\n                    <ChatIcon />\r\n                  </Badge>\r\n                ) : (\r\n                  <ChatIcon />\r\n                )}\r\n              </ChatButton>\r\n            )}\r\n\r\n            <LockButton variant=\"outline\" onClick={onLockRequest}>\r\n              <LockIcon />\r\n            </LockButton>\r\n          </div>\r\n        ) : pin.sent === false ? (\r\n          <div className={classes.buttonGroup}>\r\n            <UnlockButton variant=\"outline\" onClick={onUnLockRequest}>\r\n              <UnlockIcon />\r\n            </UnlockButton>\r\n          </div>\r\n        ) : (\r\n          <div className={classes.buttonGroup}>\r\n            <UnlockButton variant=\"outline\">\r\n              <CheckIcon />\r\n            </UnlockButton>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  } else {\r\n    return <div className={classes.emptyScene}>Not Available</div>\r\n  }\r\n}\r\nexport default PinParticipant\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\n\r\nexport default function ConfigureDialog({\r\n  showDialog,\r\n  closeDialog,\r\n  setStreamUrl,\r\n}) {\r\n  const [url, setUrl] = React.useState('')\r\n\r\n  const onChangeUrl = (e) => {\r\n    setUrl(e.target.value)\r\n  }\r\n  const onSetStreamUrl = (e) => {\r\n    console.log(url)\r\n    setStreamUrl(url)\r\n    closeDialog()\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={showDialog}\r\n      onClose={closeDialog}\r\n      aria-labelledby=\"form-dialog-title\"\r\n    >\r\n      <DialogTitle id=\"form-dialog-title\">Youtube Channel</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>Enter Youtube Channel URL.</DialogContentText>\r\n        <TextField\r\n          autoFocus\r\n          margin=\"dense\"\r\n          id=\"name\"\r\n          label=\"URL\"\r\n          type=\"text\"\r\n          onChange={onChangeUrl}\r\n          fullWidth\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={closeDialog} color=\"default\" variant=\"contained\">\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={onSetStreamUrl} color=\"secondary\" variant=\"contained\">\r\n          OK\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Participant from './Participant'\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\r\nimport { makeStyles, Button, withStyles } from '@material-ui/core'\r\nimport { logout } from '../../../redux/user/actions'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainWrapper: {\r\n    height: '100%',\r\n    backgroundColor: '#333333',\r\n    border: '1px solid green',\r\n    height: '100%',\r\n  },\r\n  participantWrapper: {\r\n    height: 'calc(100% - 36px)',\r\n  },\r\n  buttonsWrapper: {\r\n    marginBottom: '0px',\r\n    height: '50px',\r\n  },\r\n}))\r\n\r\nconst ExitButton = withStyles({\r\n  root: {\r\n    borderRadius: '0px',\r\n    border: '1px solid grey',\r\n    backgroundColor: 'black',\r\n    width: '100%',\r\n    color: 'white',\r\n    fontStyle: 'bold',\r\n  },\r\n})(Button)\r\n\r\nconst LocalParticipant = () => {\r\n  const classes = useStyles()\r\n  const history = useHistory()\r\n  const dispatch = useDispatch()\r\n  const room = useSelector((state) => state.room.room)\r\n  const localParticipant = room.localParticipant\r\n\r\n  const onClickExit = (e) => {\r\n    room.disconnect()\r\n    dispatch(logout())\r\n    history.push('/login')\r\n  }\r\n\r\n  return (\r\n    <div className={classes.mainWrapper}>\r\n      <div className={classes.participantWrapper}>\r\n        <Participant participant={localParticipant} disableAudio={false} />\r\n      </div>\r\n      <div className={classes.buttonsWrapper}>\r\n        <ExitButton variant=\"outlined\" onClick={onClickExit}>\r\n          Exit Party <ExitToAppIcon />\r\n        </ExitButton>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LocalParticipant\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport VideocamOff from '@material-ui/icons/VideocamOff'\r\nimport usePublications from '../../../hooks/usePublications'\r\nimport useTrack from '../../../hooks/useTrack'\r\nimport useIsTrackSwitchedOff from '../../../hooks/useIsTrackSwitchedOff'\r\nimport BandwidthWarning from './BandwidthWarning'\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    position: 'relative',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: '100%',\r\n    height: 'calc(100% - 70px)',\r\n    background: 'black',\r\n    border: '2px solid cyan',\r\n    borderStyle: 'dashed',\r\n  },\r\n  isVideoSwitchedOff: {\r\n    '& video': {\r\n      filter: 'blur(4px) grayscale(1) brightness(0.5)',\r\n    },\r\n  },\r\n\r\n  identity: {\r\n    background: 'rgba(0, 0, 0, 0.7)',\r\n    padding: '0.1em 0.3em',\r\n    margin: '1em',\r\n    fontSize: '1.2em',\r\n    display: 'inline-flex',\r\n    '& svg': {\r\n      marginLeft: '0.3em',\r\n    },\r\n  },\r\n  infoContainer: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    height: '100%',\r\n    padding: '0.4em',\r\n    width: '100%',\r\n  },\r\n})\r\n\r\nexport default function MainParticipantInfo({ participant, children }) {\r\n  const classes = useStyles()\r\n\r\n  const publications = usePublications(participant)\r\n  const videoPublication = publications.find((p) => p.trackName === 'camera')\r\n  const isVideoEnabled = Boolean(videoPublication)\r\n  const videoTrack = useTrack(videoPublication)\r\n  const isVideoSwitchedOff = useIsTrackSwitchedOff(videoTrack)\r\n\r\n  return (\r\n    <div\r\n      data-cy-main-participant\r\n      className={clsx(classes.container, {\r\n        [classes.isVideoSwitchedOff]: isVideoSwitchedOff,\r\n      })}\r\n    >\r\n      <div className={classes.infoContainer}>\r\n        <h4 className={classes.identity}>\r\n          {participant.identity}\r\n          {!isVideoEnabled && <VideocamOff />}\r\n        </h4>\r\n      </div>\r\n      {isVideoSwitchedOff && <BandwidthWarning />}\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport ParticipantTracks from './ParticipantTracks'\r\nimport MainParticipantInfo from './MainParticipantInfo'\r\nimport { useSelector } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core'\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    position: 'relative',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: '100%',\r\n    height: 'calc(100% - 70px)',\r\n    background: 'black',\r\n    border: '2px solid cyan',\r\n    borderStyle: 'dashed',\r\n  },\r\n})\r\nexport default function MainParticipant() {\r\n  const classes = useStyles()\r\n  const roomData = useSelector((state) => state.room)\r\n  const participants = roomData.participants\r\n  const [mainParticipant, setMainParticipant] = useState(\r\n    participants[Math.floor(Math.random() * participants.length)],\r\n  )\r\n  const selectMainRandomly = () =>\r\n    setMainParticipant(\r\n      participants[Math.floor(Math.random() * participants.length)],\r\n    )\r\n  const duration = 15000\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      selectMainRandomly()\r\n    }, duration)\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  return mainParticipant ? (\r\n    <MainParticipantInfo participant={mainParticipant}>\r\n      <ParticipantTracks\r\n        participant={mainParticipant}\r\n        disableAudio\r\n        // videoPriority={videoPriority}\r\n      />\r\n    </MainParticipantInfo>\r\n  ) : (\r\n    <div className={classes.container}>No one selected</div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport ReactPlayer from 'react-player'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nconst useStyles = makeStyles({\r\n  streamWrapper: {\r\n    display: (props) => (props.tabStatus === 'dj' ? 'flex' : 'none'),\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: 'calc(100% - 70px)',\r\n  },\r\n})\r\nconst LiveStream = ({ tabStatus }) => {\r\n  const classes = useStyles({ tabStatus: tabStatus })\r\n  const roomData = useSelector((state) => state.room)\r\n  const url = roomData.stream.url\r\n\r\n  const onError = () => {\r\n    console.log('ERROR')\r\n  }\r\n  return (\r\n    <div className={classes.streamWrapper}>\r\n      <ReactPlayer\r\n        url={url}\r\n        width=\"100%\"\r\n        height=\"100%\"\r\n        controls={false}\r\n        config={{\r\n          youtube: {\r\n            playerVars: { showinfo: 1, modestbranding: 1 },\r\n          },\r\n        }}\r\n        onError={onError}\r\n        playing\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LiveStream\r\n","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core'\r\nconst useStyles = makeStyles((theme) => ({\r\n  tabControlWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'flex-end',\r\n  },\r\n  tabControlItem: {\r\n    padding: theme.spacing(1),\r\n    opacity: '0.3',\r\n    '& > img': {\r\n      width: '100%',\r\n    },\r\n  },\r\n  tabControlItemActive: {\r\n    padding: theme.spacing(1),\r\n    opacity: 1,\r\n    '& > img': {\r\n      width: '100%',\r\n    },\r\n  },\r\n}))\r\n\r\nconst PartyTabControl = ({ status, setTabStatus }) => {\r\n  const classes = useStyles()\r\n  return (\r\n    <div className={classes.tabControlWrapper}>\r\n      <div\r\n        className={`${\r\n          status === 'dj'\r\n            ? classes.tabControlItemActive\r\n            : classes.tabControlItem\r\n        }`}\r\n        onClick={() => setTabStatus('dj')}\r\n      >\r\n        <img src=\"./assets/live-dj-white.png\" alt=\"DJ\" />\r\n      </div>\r\n      <div\r\n        className={`${\r\n          status === 'fav'\r\n            ? classes.tabControlItemActive\r\n            : classes.tabControlItem\r\n        }`}\r\n        onClick={() => setTabStatus('fav')}\r\n      >\r\n        <img src=\"./assets/fav.png\" alt=\"fav\" />\r\n      </div>\r\n      <div\r\n        className={`${\r\n          status === 'grid'\r\n            ? classes.tabControlItemActive\r\n            : classes.tabControlItem\r\n        }`}\r\n        onClick={() => setTabStatus('grid')}\r\n      >\r\n        <img src=\"./assets/grid.png\" alt=\"Grid\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PartyTabControl\r\n","import React from 'react'\r\nimport {\r\n  makeStyles,\r\n  withStyles,\r\n  Grid,\r\n  Slider,\r\n  Typography,\r\n} from '@material-ui/core'\r\nimport VolumeDown from '@material-ui/icons/VolumeDown'\r\nimport VolumeUp from '@material-ui/icons/VolumeUp'\r\nconst useStyles = makeStyles((theme) => ({\r\n  volumeControlWrapper: {\r\n    display: 'block',\r\n  },\r\n}))\r\n\r\nconst VolumeSlider = withStyles({\r\n  root: {\r\n    color: '#fff',\r\n  },\r\n  thumb: {\r\n    backgroundColor: '#fff',\r\n  },\r\n})(Slider)\r\n\r\nconst VolumeControl = () => {\r\n  const classes = useStyles()\r\n  const [volume, setVolume] = React.useState(30)\r\n  const handleChange = (event, newValue) => {\r\n    setVolume(newValue)\r\n  }\r\n  return (\r\n    <div className={classes.volumeControlWrapper}>\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <VolumeDown />\r\n        </Grid>\r\n        <Grid item xs>\r\n          <VolumeSlider\r\n            value={volume}\r\n            onChange={handleChange}\r\n            aria-labelledby=\"continuous-slider\"\r\n            style={{ thumb: { backgroundColor: '#fff' } }}\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          <VolumeUp />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VolumeControl\r\n","import { useCallback, useEffect, useState } from 'react'\r\nimport Video from 'twilio-video'\r\n\r\nexport function useLocalAudioTrack() {\r\n  const [track, setTrack] = useState()\r\n\r\n  useEffect(() => {\r\n    Video.createLocalAudioTrack().then((newTrack) => {\r\n      setTrack(newTrack)\r\n    })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const handleStopped = () => setTrack(undefined)\r\n    if (track) {\r\n      track.on('stopped', handleStopped)\r\n      return () => {\r\n        track.off('stopped', handleStopped)\r\n      }\r\n    }\r\n  }, [track])\r\n\r\n  return track\r\n}\r\n\r\nexport function useLocalVideoTrack() {\r\n  const [track, setTrack] = useState()\r\n\r\n  const getLocalVideoTrack = useCallback(\r\n    () =>\r\n      Video.createLocalVideoTrack({\r\n        frameRate: 24,\r\n        height: 720,\r\n        width: 1280,\r\n        name: 'camera',\r\n      }).then((newTrack) => {\r\n        setTrack(newTrack)\r\n        return newTrack\r\n      }),\r\n    [],\r\n  )\r\n\r\n  useEffect(() => {\r\n    // We get a new local video track when the app loads.\r\n    getLocalVideoTrack()\r\n  }, [getLocalVideoTrack])\r\n\r\n  useEffect(() => {\r\n    const handleStopped = () => setTrack(undefined)\r\n    if (track) {\r\n      track.on('stopped', handleStopped)\r\n      return () => {\r\n        track.off('stopped', handleStopped)\r\n      }\r\n    }\r\n  }, [track])\r\n\r\n  return [track, getLocalVideoTrack]\r\n}\r\n\r\nexport default function useLocalTracks() {\r\n  const audioTrack = useLocalAudioTrack()\r\n  const [videoTrack, getLocalVideoTrack] = useLocalVideoTrack()\r\n\r\n  const localTracks = [audioTrack, videoTrack].filter(\r\n    (track) => track !== undefined,\r\n  )\r\n\r\n  return { localTracks, getLocalVideoTrack }\r\n}\r\n","import EventEmitter from 'events'\r\nimport { useCallback, useEffect, useRef, useState } from 'react'\r\nimport Video from 'twilio-video'\r\n\r\nwindow.TwilioVideo = Video\r\n\r\nexport default function useRoom(localTracks, onError, options) {\r\n  const [room, setRoom] = useState(new EventEmitter())\r\n  const [isConnecting, setIsConnecting] = useState(false)\r\n  const disconnectHandlerRef = useRef(() => {})\r\n  const localTracksRef = useRef([])\r\n\r\n  useEffect(() => {\r\n    // It can take a moment for Video.connect to connect to a room. During this time, the user may have enabled or disabled their\r\n    // local audio or video tracks. If this happens, we store the localTracks in this ref, so that they are correctly published\r\n    // once the user is connected to the room.\r\n    localTracksRef.current = localTracks\r\n  }, [localTracks])\r\n\r\n  const connect = useCallback(\r\n    (token) => {\r\n      setIsConnecting(true)\r\n      return Video.connect(token, { ...options, tracks: [] }).then(\r\n        (newRoom) => {\r\n          setRoom(newRoom)\r\n          console.log(newRoom)\r\n\r\n          newRoom.once('disconnected', () => {\r\n            console.log('ROOM DISCONNECTED')\r\n            // Reset the room only after all other `disconnected` listeners have been called.\r\n            setTimeout(() => setRoom(new EventEmitter()))\r\n            window.removeEventListener(\r\n              'beforeunload',\r\n              disconnectHandlerRef.current,\r\n            )\r\n          })\r\n\r\n          // @ts-ignore\r\n          window.twilioRoom = newRoom\r\n\r\n          localTracksRef.current.forEach((track) =>\r\n            // Tracks can be supplied as arguments to the Video.connect() function and they will automatically be published.\r\n            // However, tracks must be published manually in order to set the priority on them.\r\n            // All video tracks are published with 'low' priority. This works because the video\r\n            // track that is displayed in the 'MainParticipant' component will have it's priority\r\n            // set to 'high' via track.setPriority()\r\n            newRoom.localParticipant.publishTrack(track, {\r\n              priority: track.kind === 'video' ? 'low' : 'standard',\r\n            }),\r\n          )\r\n\r\n          disconnectHandlerRef.current = () => {\r\n            console.log('beforeunload hook called!')\r\n            newRoom.disconnect()\r\n          }\r\n          setIsConnecting(false)\r\n\r\n          // Add a listener to disconnect from the room when a user closes their browser\r\n          window.addEventListener('beforeunload', disconnectHandlerRef.current)\r\n        },\r\n        (error) => {\r\n          onError(error)\r\n          setIsConnecting(false)\r\n        },\r\n      )\r\n    },\r\n    [options, onError],\r\n  )\r\n\r\n  return { room, isConnecting, connect }\r\n}\r\n","import React, { createContext, useContext, useState, useEffect } from 'react'\r\nexport const selectedParticipantContext = createContext(null)\r\n\r\nexport default function useSelectedParticipant() {\r\n  const [selectedParticipant, setSelectedParticipant] = useContext(\r\n    selectedParticipantContext,\r\n  )\r\n  return [selectedParticipant, setSelectedParticipant]\r\n}\r\n\r\nexport function SelectedParticipantProvider({ room, children }) {\r\n  const [selectedParticipant, _setSelectedParticipant] = useState(null)\r\n  const setSelectedParticipant = (participant) =>\r\n    _setSelectedParticipant((prevParticipant) =>\r\n      prevParticipant === participant ? null : participant,\r\n    )\r\n\r\n  useEffect(() => {\r\n    const onDisconnect = () => _setSelectedParticipant(null)\r\n    room.on('disconnected', onDisconnect)\r\n    return () => {\r\n      room.off('disconnected', onDisconnect)\r\n    }\r\n  }, [room])\r\n\r\n  return (\r\n    <selectedParticipantContext.Provider\r\n      value={[selectedParticipant, setSelectedParticipant]}\r\n    >\r\n      {children}\r\n    </selectedParticipantContext.Provider>\r\n  )\r\n}\r\n","import React, { createContext, useState, Children } from 'react'\r\nimport useHandleRoomDisconnectionErrors from '../../../hooks/useHandleRoomDisconnectionErrors'\r\nimport useHandleTrackPublicationFailed from '../../../hooks/useHandleTrackPublicationFailed'\r\nimport useHandleOnDisconnect from '../../../hooks/useHandleOnDisconnect'\r\nimport useRoom from '../../../hooks/useRoom/useRoom'\r\nimport useLocalTracks from '../../../hooks/useLocalTracks/useLocalTracks'\r\nimport { SelectedParticipantProvider } from '../../../hooks/useSelectedParticipant'\r\n\r\nconst connectionOptions = {\r\n  bandwidthProfile: {\r\n    video: {\r\n      mode: 'collaboration',\r\n      dominantSpeakerPriority: 'standard',\r\n      renderDimensions: {\r\n        high: { height: 1080, width: 1920 },\r\n        standard: { height: 720, width: 1280 },\r\n        low: { height: 90, width: 160 },\r\n      },\r\n    },\r\n  },\r\n  dominantSpeaker: true,\r\n  maxAudioBitrate: 12000,\r\n  networkQuality: { local: 1, remote: 1 },\r\n  preferredVideoCodecs: [{ codec: 'VP8', simulcast: true }],\r\n}\r\n\r\nexport const VideoPartyContext = createContext()\r\n\r\nconst VideoPartyProvider = ({ children }) => {\r\n  const [error, setError] = useState(null)\r\n  const onTwilioErrorCallback = (error) => {\r\n    console.log(`ERROR: ${error.message}`, error)\r\n    // onError(error)\r\n    setError(error)\r\n  }\r\n\r\n  const onTwilioRoomDisconnect = () => {\r\n    console.log('Disconnected')\r\n  }\r\n  const { localTracks, getLocalVideoTrack } = useLocalTracks()\r\n  const { room, isConnecting, connect } = useRoom(\r\n    localTracks,\r\n    onTwilioErrorCallback,\r\n    connectionOptions,\r\n  )\r\n\r\n  useHandleRoomDisconnectionErrors(room, onTwilioErrorCallback)\r\n  useHandleTrackPublicationFailed(room, onTwilioErrorCallback)\r\n  useHandleOnDisconnect(room, onTwilioRoomDisconnect)\r\n\r\n  return (\r\n    <VideoPartyContext.Provider\r\n      value={{\r\n        room,\r\n        localTracks,\r\n        getLocalVideoTrack,\r\n        isConnecting,\r\n        connect,\r\n        onError: onTwilioErrorCallback,\r\n      }}\r\n    >\r\n      <SelectedParticipantProvider room={room}>\r\n        {children}\r\n      </SelectedParticipantProvider>\r\n    </VideoPartyContext.Provider>\r\n  )\r\n}\r\n\r\nexport default VideoPartyProvider\r\n","import React from 'react'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport { purple } from '@material-ui/core/colors'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport CameraIcon from '@material-ui/icons/Camera'\r\nimport MicIcon from '@material-ui/icons/Mic'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport useRoomState from '../../../hooks/useRoomState'\r\nimport { useHistory } from 'react-router-dom'\r\nimport useLocalAudioToggle from '../../../hooks/useLocalAudioToggle'\r\nimport useLocalVideoToggle from '../../../hooks/useLocalVideoToggle'\r\n\r\nconst IOSSwitch = withStyles((theme) => ({\r\n  root: {\r\n    width: 42,\r\n    height: 26,\r\n    padding: 0,\r\n    margin: theme.spacing(1),\r\n  },\r\n  switchBase: {\r\n    padding: 1,\r\n    '&$checked': {\r\n      transform: 'translateX(16px)',\r\n      color: theme.palette.common.white,\r\n      '& + $track': {\r\n        backgroundColor: '#52d869',\r\n        opacity: 1,\r\n        border: 'none',\r\n      },\r\n    },\r\n    '&$focusVisible $thumb': {\r\n      color: '#52d869',\r\n      border: '6px solid #fff',\r\n    },\r\n  },\r\n  thumb: {\r\n    width: 24,\r\n    height: 24,\r\n  },\r\n  track: {\r\n    borderRadius: 26 / 2,\r\n    border: `1px solid ${theme.palette.grey[400]}`,\r\n    backgroundColor: theme.palette.grey[200],\r\n    opacity: 1,\r\n    transition: theme.transitions.create(['background-color', 'border']),\r\n  },\r\n  checked: {},\r\n  focusVisible: {},\r\n}))(({ classes, ...props }) => {\r\n  return (\r\n    <Switch\r\n      focusVisibleClassName={classes.focusVisible}\r\n      disableRipple\r\n      classes={{\r\n        root: classes.root,\r\n        switchBase: classes.switchBase,\r\n        thumb: classes.thumb,\r\n        track: classes.track,\r\n        checked: classes.checked,\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\n\r\nconst ToggleMicButton = () => {\r\n  const [isAudioEnabled, toggleAudioEnabled] = useLocalAudioToggle()\r\n  const handleChange = () => {\r\n    toggleAudioEnabled()\r\n  }\r\n  return (\r\n    <IOSSwitch checked={isAudioEnabled} onChange={handleChange} name=\"camera\" />\r\n  )\r\n}\r\n\r\nconst ToggleCameraButton = () => {\r\n  const [isVideoEnabled, toggleVideoEnabled] = useLocalVideoToggle()\r\n\r\n  const handleChange = () => {\r\n    toggleVideoEnabled()\r\n  }\r\n  return (\r\n    <IOSSwitch checked={isVideoEnabled} onChange={handleChange} name=\"camera\" />\r\n  )\r\n}\r\nconst DeviceSwitchControl = () => {\r\n  const [state, setState] = React.useState({\r\n    mic: true,\r\n    camera: true,\r\n  })\r\n\r\n  const handleChange = (event) => {\r\n    setState({ ...state, [event.target.name]: event.target.checked })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <CameraIcon />\r\n        </Grid>\r\n        <Grid item xs>\r\n          Webcam\r\n        </Grid>\r\n        <Grid item>\r\n          <ToggleCameraButton />\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <MicIcon />\r\n        </Grid>\r\n        <Grid item xs>\r\n          Microphone\r\n        </Grid>\r\n        <Grid item>\r\n          {/* <IOSSwitch checked={state.mic} onChange={handleChange} name=\"mic\" /> */}\r\n          <ToggleMicButton />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default DeviceSwitchControl\r\n","import { useCallback } from 'react'\r\nimport useVideoPartyContext from '../useVideoPartyContext'\r\nimport useIsTrackEnabled from '../useIsTrackEnabled'\r\nimport useLocalTracks from '../useLocalTracks/useLocalTracks'\r\n\r\nexport default function useLocalAudioToggle() {\r\n  const { localTracks } = useLocalTracks()\r\n  const audioTrack = localTracks.find((track) => track.kind === 'audio')\r\n  const isEnabled = useIsTrackEnabled(audioTrack)\r\n\r\n  const toggleAudioEnabled = useCallback(() => {\r\n    if (audioTrack) {\r\n      audioTrack.isEnabled ? audioTrack.disable() : audioTrack.enable()\r\n    }\r\n  }, [audioTrack])\r\n\r\n  return [isEnabled, toggleAudioEnabled]\r\n}\r\n","import { useCallback } from 'react'\r\nimport useVideoPartyContext from '../useVideoPartyContext'\r\nimport useLocalTracks from '../useLocalTracks/useLocalTracks'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function useLocalVideoToggle() {\r\n  const { localTracks, getLocalVideoTrack } = useLocalTracks()\r\n  const videoTrack = localTracks.find((track) => track.name === 'camera')\r\n  const localParticipant = useSelector((state) => state.room.localParticipant)\r\n  const toggleVideoEnabled = useCallback(() => {\r\n    if (videoTrack) {\r\n      if (localParticipant) {\r\n        const localTrackPublication = localParticipant.unpublishTrack(\r\n          videoTrack,\r\n        )\r\n        // TODO: remove when SDK implements this event. See: https://issues.corp.twilio.com/browse/JSDK-2592\r\n        localParticipant.emit('trackUnpublished', localTrackPublication)\r\n      }\r\n      videoTrack.stop()\r\n    } else {\r\n      getLocalVideoTrack().then((track) => {\r\n        if (localParticipant) {\r\n          localParticipant.publishTrack(track)\r\n        }\r\n      })\r\n    }\r\n  }, [videoTrack, localParticipant, getLocalVideoTrack])\r\n\r\n  return [!!videoTrack, toggleVideoEnabled]\r\n}\r\n","import React from 'react'\r\nimport VolumeControl from './VolumeControl'\r\nimport DeviceSwitchControl from './DeviceSwitchControl'\r\nimport { Grid, Typography, makeStyles } from '@material-ui/core'\r\nimport useParticipants from '../../../hooks/useParticipants/useParticipants'\r\nimport { useSelector } from 'react-redux'\r\nconst useStyles = makeStyles((theme) => ({\r\n  participantInfo: {\r\n    color: 'cyan',\r\n  },\r\n}))\r\nconst DeviceControl = ({ tabStatus }) => {\r\n  const classes = useStyles()\r\n  const pLen = useSelector((state) => state.room).participants.length\r\n  return (\r\n    <>\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography>\r\n            participants (\r\n            <span className={classes.participantInfo}>{pLen + 1}</span>)\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n      <VolumeControl />\r\n      <DeviceSwitchControl />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default DeviceControl\r\n","/**\r\n * random button, configuration button\r\n */\r\nimport React from 'react'\r\nimport { makeStyles, Button } from '@material-ui/core'\r\nimport clsx from 'clsx'\r\nconst useStyles = makeStyles((theme) => ({\r\n  randomButton: {\r\n    marginBottom: theme.spacing(1),\r\n    marginTop: theme.spacing(2),\r\n    color: 'cyan',\r\n    border: '2px solid cyan',\r\n    borderRadius: '0px',\r\n    float: 'right',\r\n  },\r\n\r\n  configureButton: {\r\n    color: '#19ff03',\r\n    border: '2px solid #19ff03',\r\n  },\r\n  buttonGroup: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-end',\r\n    padding: '5px',\r\n    alignItems: 'flex-end',\r\n  },\r\n}))\r\n\r\nconst ButtonControl = ({ role, onConfigureLiveStream, onRandomButton }) => {\r\n  const classes = useStyles()\r\n  return (\r\n    <div className={classes.buttonGroup}>\r\n      <Button\r\n        variant=\"outlined\"\r\n        className={classes.randomButton}\r\n        onClick={onRandomButton}\r\n      >\r\n        Random Rooms\r\n      </Button>\r\n      {role === 'dj' ? (\r\n        <Button\r\n          variant=\"outlined\"\r\n          className={clsx(classes.randomButton, classes.configureButton)}\r\n          style={{ marginLeft: '5px' }}\r\n          onClick={onConfigureLiveStream}\r\n        >\r\n          Configure Live Stream\r\n        </Button>\r\n      ) : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ButtonControl\r\n","import React from 'react'\r\nimport Pusher from 'react-pusher'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { setPinMic } from '../../redux/room/actions'\r\nimport { useSnackbar } from 'notistack'\r\nconst MicPusher = () => {\r\n  const userData = useSelector((state) => state.user)\r\n  const channel = `${userData.identity}-mic`\r\n  const dispatch = useDispatch()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n\r\n  const onMic = (data) => {\r\n    if (data.message === 'on') {\r\n      dispatch(setPinMic({ identity: data.name, isOn: true }))\r\n      enqueueSnackbar(`microphone turned on with ${data.name}`, {\r\n        variant: 'info',\r\n        anchorOrigin: {\r\n          vertical: 'top',\r\n          horizontal: 'right',\r\n        },\r\n      })\r\n    } else {\r\n      dispatch(setPinMic({ identity: data.name, isOn: false }))\r\n      enqueueSnackbar(`microphone turned off with ${data.name}`, {\r\n        variant: 'warning',\r\n        anchorOrigin: {\r\n          vertical: 'top',\r\n          horizontal: 'right',\r\n        },\r\n      })\r\n    }\r\n  }\r\n  return <Pusher channel={channel} event=\"mic-on\" onUpdate={onMic} />\r\n}\r\n\r\nexport default MicPusher\r\n","import React from 'react'\r\nimport Pusher from 'react-pusher'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { addMessage } from '../../redux/room/actions'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nconst MessagePusher = () => {\r\n  const userData = useSelector((state) => state.user)\r\n  const channel = `${userData.identity}-message`\r\n  const dispatch = useDispatch()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const onMessage = (data) => {\r\n    const opp = data.name\r\n    const msg = data.message\r\n    dispatch(addMessage({ identity: opp, message: msg, sent: false }))\r\n    enqueueSnackbar(`A new message from ${opp}`, {\r\n      variant: 'info',\r\n      anchorOrigin: {\r\n        vertical: 'top',\r\n        horizontal: 'right',\r\n      },\r\n    })\r\n  }\r\n  return <Pusher channel={channel} event=\"message\" onUpdate={onMessage} />\r\n}\r\n\r\nexport default MessagePusher\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\n// import useParticipantWithId from '../../../hooks/useParticipantWithId'\r\nimport Participant from '../../Party/Participant/Participant'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst UnlockRequestDialog = ({\r\n  isOpen,\r\n  senderName,\r\n  handleAgree,\r\n  handleDecline,\r\n}) => {\r\n  const roomData = useSelector((state) => state.room)\r\n  const participants = roomData.participants\r\n  const senderP = participants.find((p) => p.identity === senderName)\r\n  return (\r\n    <Dialog\r\n      open={isOpen}\r\n      // onClose={handleDecline}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogContent>\r\n        {/* <DialogContentText id=\"alert-dialog-description\"> */}\r\n        <div>\r\n          <Participant participant={senderP} disableAudio={true} />\r\n        </div>\r\n        <div>{senderName} wants to lock his room with you.</div>\r\n        {/* </DialogContentText> */}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleAgree} color=\"secondary\" variant=\"contained\">\r\n          Agree\r\n        </Button>\r\n        <Button onClick={handleDecline} color=\"default\" variant=\"contained\">\r\n          Decline\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default UnlockRequestDialog\r\n","import React, { useState } from 'react'\r\nimport Pusher from 'react-pusher'\r\nimport UnlockRequestDialog from '../Dialogs/AlertDialog/UnlockRequestDialog'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { unLockAccept, unLockDecline } from '../../redux/room/actions'\r\nconst UnLockRequestPusher = () => {\r\n  const [unlock, setUnlock] = useState(false)\r\n  const [senderName, setSenderName] = useState('')\r\n  const userData = useSelector((state) => state.user)\r\n  const myIdentity = userData.identity\r\n  const dispatch = useDispatch()\r\n  const onUnLockRequest = (data) => {\r\n    setSenderName(data.name)\r\n    setUnlock(true)\r\n  }\r\n\r\n  const handleAgreeUnlockRequest = async () => {\r\n    try {\r\n      dispatch(unLockAccept({ identity: senderName }))\r\n      setUnlock(false)\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  const handleDeclineUnlockRequest = () => {\r\n    try {\r\n      dispatch(unLockDecline({ identity: senderName }))\r\n      setUnlock(false)\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <UnlockRequestDialog\r\n        isOpen={unlock}\r\n        senderName={senderName}\r\n        handleAgree={handleAgreeUnlockRequest}\r\n        handleDecline={handleDeclineUnlockRequest}\r\n      />\r\n\r\n      <Pusher\r\n        channel={`${myIdentity}-unlock`}\r\n        event=\"unlock\"\r\n        onUpdate={onUnLockRequest}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default UnLockRequestPusher\r\n","import React from 'react'\r\nimport Pusher from 'react-pusher'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { setPinUnLock } from '../../redux/room/actions'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nconst UnLockAcceptPusher = () => {\r\n  const userData = useSelector((state) => state.user)\r\n  const channel = `${userData.identity}-unlock-accept`\r\n  const dispatch = useDispatch()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const onUnLockAccept = (data) => {\r\n    const sender = data.name\r\n    dispatch(setPinUnLock({ identity: sender }))\r\n    enqueueSnackbar(`${data.name} accepted your lock request`, {\r\n      variant: 'success',\r\n      anchorOrigin: {\r\n        vertical: 'top',\r\n        horizontal: 'right',\r\n      },\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Pusher channel={channel} event=\"unlock-accept\" onUpdate={onUnLockAccept} />\r\n  )\r\n}\r\n\r\nexport default UnLockAcceptPusher\r\n","import React, { useState } from 'react'\r\nimport Pusher from 'react-pusher'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { setPinLock } from '../../redux/room/actions'\r\nimport { useSnackbar } from 'notistack'\r\nconst LockRequestPusher = () => {\r\n  const userData = useSelector((state) => state.user)\r\n  const channel = `${userData.identity}-lock-request`\r\n  const dispatch = useDispatch()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const onLockRequest = (data) => {\r\n    dispatch(setPinLock({ identity: data.name }))\r\n    enqueueSnackbar(`${data.name} locked you`, {\r\n      variant: 'warning',\r\n      anchorOrigin: {\r\n        vertical: 'top',\r\n        horizontal: 'right',\r\n      },\r\n    })\r\n  }\r\n  return (\r\n    <>\r\n      <Pusher channel={channel} event=\"lock\" onUpdate={onLockRequest} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default LockRequestPusher\r\n","import React, { useState } from 'react'\r\nimport Pusher from 'react-pusher'\r\nimport MicPusher from './MicPusher'\r\nimport MessagePusher from './MessagePusher'\r\nimport UnLockRequestPusher from './UnLockRequestPusher'\r\nimport UnLockAcceptPusher from './UnLockAcceptPusher'\r\nimport LockRequestPusher from './LockRequestPusher'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useSnackbar } from 'notistack'\r\nimport { setStreamUrlSuccess } from '../../redux/room/actions'\r\nconst PusherProvider = () => {\r\n  const dispatch = useDispatch()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const onStreamUrlChange = (data) => {\r\n    console.log(data.message)\r\n    dispatch(setStreamUrlSuccess(data.message))\r\n    enqueueSnackbar(`New stream url set`, {\r\n      variant: 'info',\r\n      anchorOrigin: {\r\n        vertical: 'top',\r\n        horizontal: 'right',\r\n      },\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Pusher\r\n        channel=\"airlock-channel\"\r\n        event=\"stream-url-change\"\r\n        onUpdate={onStreamUrlChange}\r\n      />\r\n\r\n      <UnLockRequestPusher />\r\n      <UnLockAcceptPusher />\r\n      <LockRequestPusher />\r\n      <MicPusher />\r\n      <MessagePusher />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PusherProvider\r\n","import React from 'react'\r\nimport { CloseIcon } from '../../Icons/Icons'\r\nimport { makeStyles, withStyles, Button } from '@material-ui/core'\r\nconst useStyles = makeStyles((theme) => ({\r\n  infoBar: {\r\n    color: '#464646',\r\n    background: '#F4F4F4',\r\n    borderRadius: '4px 4px 0 0',\r\n    height: '10%',\r\n    alignSelf: 'flex-start',\r\n    width: '100%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    boxShadow: '0px 2px 5px rgba(0,0,0,.2)',\r\n  },\r\n\r\n  leftInnerContainer: {\r\n    color: '#464646',\r\n    flex: '0.8',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginLeft: '5%',\r\n    justifyContent: 'center',\r\n    fontWeight: 800,\r\n  },\r\n\r\n  rightInnerContainer: {\r\n    display: 'flex',\r\n    flex: '0.2',\r\n    justifyContent: 'flex-end',\r\n    // marginRight: '5%',\r\n  },\r\n}))\r\n\r\nconst CloseButton = withStyles((theme) => ({\r\n  root: {\r\n    minWidth: 'auto',\r\n  },\r\n}))(Button)\r\nconst InfoBar = ({ room, handleClose }) => {\r\n  const classes = useStyles()\r\n  return (\r\n    <div className={classes.infoBar}>\r\n      <div className={classes.leftInnerContainer}> Chat with {room}</div>\r\n      <div className={classes.rightInnerContainer}>\r\n        <CloseButton onClick={handleClose}>\r\n          <CloseIcon />\r\n        </CloseButton>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoBar\r\n","import React from 'react'\r\n\r\nimport './Input.css'\r\nimport { PaperPlanIcon } from '../../Icons/Icons'\r\n\r\nimport { makeStyles } from '@material-ui/core'\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    padding: '0px 5px',\r\n  },\r\n  sendButton: {\r\n    backgroundColor: 'blue',\r\n    marginTop: '2px',\r\n    float: 'right',\r\n    textDecoration: 'none',\r\n    background: '#2979FF',\r\n    padding: '10px',\r\n    color: '#fff !important',\r\n    border: 'none',\r\n    width: 'fit-content',\r\n    alignSelf: 'flex-end',\r\n    borderRadius: '5px',\r\n    '&:focus': {\r\n      outline: 'none',\r\n    },\r\n  },\r\n}))\r\nconst Input = ({ sendMessage, setMessage, message }) => {\r\n  const classes = useStyles()\r\n  return (\r\n    <form className={classes.form}>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Type a message...\"\r\n        value={message}\r\n        onChange={(e) => setMessage(e.target.value)}\r\n        onKeyPress={(event) =>\r\n          event.key === 'Enter' ? sendMessage(event) : null\r\n        }\r\n      />\r\n      <button onClick={sendMessage} className={classes.sendButton}>\r\n        Send <PaperPlanIcon />\r\n      </button>\r\n    </form>\r\n  )\r\n}\r\nexport default Input\r\n","import React from 'react'\r\n\r\nimport './Message.css'\r\n\r\nconst Message = ({ message }) => {\r\n  return message.sent ? (\r\n    <div className=\"messageContainer justifyEnd\">\r\n      <div className=\"messageBox backgroundBlue\">\r\n        <p className=\"messageText colorWhite\">{message.text}</p>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div className=\"messageContainer justifyStart\">\r\n      <div className=\"messageBox backgroundLight\">\r\n        <p className=\"messageText colorDark\">{message.text}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Message\r\n","import React from 'react'\r\nimport Message from './Message/Message'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport ScrollToBottom from 'react-scroll-to-bottom'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nconst useStyles = makeStyles((theme) => ({\r\n  messages: {\r\n    height: '240px',\r\n    overflowY: 'scroll',\r\n  },\r\n}))\r\nconst Messages = ({ messages }) => {\r\n  const classes = useStyles()\r\n  const messagesEndRef = useRef(null)\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current.scrollIntoView({ behavior: 'smooth' })\r\n  }\r\n  useEffect(scrollToBottom, [])\r\n  useEffect(scrollToBottom, [messages])\r\n  return (\r\n    <div className={classes.messages}>\r\n      <ScrollToBottom>\r\n        {messages.map((message, i) => (\r\n          <div>\r\n            <Message key={i} message={message} />\r\n          </div>\r\n        ))}\r\n        <div ref={messagesEndRef} />\r\n      </ScrollToBottom>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Messages\r\n","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport InfoBar from './InfoBar/InfoBar'\r\nimport { useState } from 'react'\r\nimport Input from './Input/Input'\r\nimport Messages from './Messages/Messages'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  chatContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    background: '#ffffff',\r\n    borderRadius: '5px',\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n}))\r\n\r\nconst Chat = ({ me, opponent, messages, handleSendMessage, handleClose }) => {\r\n  const classes = useStyles()\r\n  const [message, setMessage] = useState('')\r\n  const sendMessage = (e) => {\r\n    e.preventDefault()\r\n    handleSendMessage(message)\r\n    setMessage('')\r\n  }\r\n  return (\r\n    <div className={classes.chatContainer}>\r\n      <InfoBar room={opponent} handleClose={handleClose} />\r\n      <Messages messages={messages} name={opponent} />\r\n      <Input\r\n        message={message}\r\n        setMessage={setMessage}\r\n        sendMessage={sendMessage}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chat\r\n","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { sendMessage, handleClose, closeChat } from '../../redux/room/actions'\r\nimport Chat from '../../components/Chat/Chat'\r\n\r\nconst ChatContainer = () => {\r\n  const roomData = useSelector((state) => state.room)\r\n  const myIdentity = useSelector((state) => state.user.identity)\r\n  const dispatch = useDispatch()\r\n  const chatOpponent = roomData.pins.find(\r\n    (p) => p.identity === roomData.chatMember,\r\n  )\r\n  const messages = chatOpponent && chatOpponent.chats ? chatOpponent.chats : []\r\n  const handleSendMessage = (msg) => {\r\n    dispatch(sendMessage({ identity: roomData.chatMember, message: msg }))\r\n  }\r\n\r\n  const handleClose = () => {\r\n    dispatch(closeChat())\r\n  }\r\n  return (\r\n    <>\r\n      {chatOpponent && roomData.chatOpen ? (\r\n        <Chat\r\n          me={myIdentity}\r\n          opponent={chatOpponent.identity}\r\n          messages={messages}\r\n          handleSendMessage={handleSendMessage}\r\n          handleClose={handleClose}\r\n        />\r\n      ) : null}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ChatContainer\r\n","import React from 'react'\r\nimport { styled } from '@material-ui/core/styles'\r\nimport { makeStyles } from '@material-ui/core'\r\nimport { useSelector } from 'react-redux'\r\nimport Participant from '../Participant/Participant'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  listItem: {\r\n    width: '33%',\r\n    height: 'fit-content',\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '50%',\r\n    },\r\n  },\r\n}))\r\n\r\nconst ScrollContainer = styled('div')(({ theme }) => ({\r\n  display: 'flex',\r\n  flexWrap: 'wrap',\r\n  overflowY: 'scroll',\r\n  height: 'calc(100% - 70px)',\r\n}))\r\n\r\nconst ParticipantListView = () => {\r\n  const roomData = useSelector((state) => state.room)\r\n  const room = roomData.room\r\n  const participants = roomData.participants\r\n  const localParticipant = roomData.room.localParticipant\r\n  const classes = useStyles()\r\n  return (\r\n    <ScrollContainer>\r\n      {participants.map((participant) => (\r\n        <div className={classes.listItem}>\r\n          <Participant\r\n            key={participant.sid}\r\n            participant={participant}\r\n            disableAudio={true}\r\n          />\r\n        </div>\r\n      ))}\r\n      {/* {[...Array(11)].map((id) => (\r\n        <div className={classes.listItem}>\r\n          <Participant participant={localParticipant} disableAudio={true} />\r\n        </div>\r\n      ))} */}\r\n    </ScrollContainer>\r\n  )\r\n}\r\n\r\nexport default ParticipantListView\r\n","import React, { useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport useRoomState from '../../hooks/useRoomState'\r\nimport clsx from 'clsx'\r\nimport { styled } from '@material-ui/core/styles'\r\nimport { makeStyles, Typography } from '@material-ui/core'\r\nimport PinParticipant from '../../components/Party/Participant/PinParticipant'\r\nimport ConfigureDialog from '../../components/Dialogs/ConfigureDialog'\r\nimport LocalParticipant from '../../components/Party/Participant/LocalParticipant'\r\nimport MainParticipant from '../../components/Party/Participant/MainParticipant'\r\nimport LiveStream from '../../components/Party/LiveStream'\r\nimport { useDispatch } from 'react-redux'\r\nimport * as roomActions from '../../redux/room/actions'\r\nimport PartyTabControl from '../../components/Party/PartyTabControl'\r\nimport DeviceControl from '../../components/Party/DeviceControl'\r\nimport ButtonControl from '../../components/Party/ButtonControl'\r\nimport PusherProvider from '../../components/PusherProvider/PusherProvider'\r\nimport ChatContainer from '../../containers/ChatContainer/ChatContainer'\r\nimport ParticipantsListView from '../../components/Party/ParticipantsListView/ParticipantsListView'\r\nconst Container = styled('div')(({ theme }) => ({\r\n  border: '1px solid #757575',\r\n  position: 'relative',\r\n  display: 'grid',\r\n  width: '100%',\r\n  height: '100%',\r\n  gridTemplateColumns: `repeat(6, minmax(0, 1fr))`,\r\n  gridTemplateRows: `repeat(5, minmax(0, 1fr))`,\r\n  gap: '5px 5px',\r\n  gridTemplateAreas: `\"lg mp mp mp mp ct\"\r\n                      \"mg mp mp mp mp bt\"\r\n                      \"mg mp mp mp mp bt\"\r\n                      \"me mp mp mp mp t7\"\r\n                      \"t1 t2 t3 t4 t5 t6\"`,\r\n}))\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainWrapper: {\r\n    backgroundColor: '#3f3f3f',\r\n    color: theme.palette.primary.contrastText,\r\n    height: '100vh',\r\n    position: 'relative',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  mainViewer: {\r\n    gridArea: 'mp',\r\n    padding: theme.spacing(1),\r\n    backgroundColor: '#343334',\r\n  },\r\n  logo: {\r\n    gridArea: 'lg',\r\n    textAlign: 'center',\r\n    paddingTop: '10px',\r\n  },\r\n  chat: {\r\n    gridArea: 'mg',\r\n    paddingLeft: '5px',\r\n  },\r\n  me: {\r\n    gridArea: 'me',\r\n  },\r\n  tabControl: {\r\n    gridArea: 'ct',\r\n  },\r\n  deviceContro: {\r\n    gridArea: 'bt',\r\n  },\r\n  t1: {\r\n    gridArea: 't1',\r\n  },\r\n  t2: {\r\n    gridArea: 't2',\r\n  },\r\n  t3: {\r\n    gridArea: 't3',\r\n  },\r\n  t4: {\r\n    gridArea: 't4',\r\n  },\r\n  t5: {\r\n    gridArea: 't5',\r\n  },\r\n  t6: {\r\n    gridArea: 't6',\r\n  },\r\n  t7: {\r\n    gridArea: 't7',\r\n  },\r\n  t8: {\r\n    gridArea: 't8',\r\n  },\r\n  showVideo: {\r\n    display: 'block',\r\n  },\r\n  hideVideo: {\r\n    display: 'none',\r\n  },\r\n}))\r\n\r\nconst VideoParty = () => {\r\n  const classes = useStyles()\r\n  const roomState = useRoomState()\r\n  const [tabStatus, setTabStatus] = useState('dj')\r\n  const userData = useSelector((state) => state.user)\r\n  const [showConfigDialog, setShowConfigDialog] = useState(false)\r\n  const dispatch = useDispatch()\r\n\r\n  const onConfigureLiveStream = () => {\r\n    setShowConfigDialog(true)\r\n  }\r\n\r\n  const setStreamUrl = (url) => {\r\n    console.log(url)\r\n    dispatch(roomActions.setStreamUrl(url))\r\n  }\r\n\r\n  const onRandomButton = () => {\r\n    dispatch(roomActions.randomizePins())\r\n    console.log('asdf')\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {showConfigDialog ? (\r\n        <ConfigureDialog\r\n          showDialog={showConfigDialog}\r\n          closeDialog={() => setShowConfigDialog(false)}\r\n          setStreamUrl={setStreamUrl}\r\n        />\r\n      ) : null}\r\n      <main className={classes.mainWrapper}>\r\n        {roomState === 'connected' ? (\r\n          <>\r\n            <PusherProvider />\r\n            <Container>\r\n              <div className={classes.mainViewer}>\r\n                <LiveStream tabStatus={tabStatus} />\r\n                {tabStatus === 'dj' ? null : tabStatus === 'fav' ? (\r\n                  <MainParticipant />\r\n                ) : (\r\n                  <ParticipantsListView />\r\n                )}\r\n                <ButtonControl\r\n                  role={userData.role}\r\n                  onConfigureLiveStream={onConfigureLiveStream}\r\n                  onRandomButton={onRandomButton}\r\n                />\r\n              </div>\r\n              <div className={classes.logo}>\r\n                <img src=\"./assets/logo.png\" alt=\"logo\" />\r\n                <Typography variant=\"body2\">squareparty</Typography>\r\n              </div>\r\n              <div className={classes.chat}>\r\n                <ChatContainer />\r\n              </div>\r\n              <div className={classes.tabControl}>\r\n                <PartyTabControl\r\n                  status={tabStatus}\r\n                  setTabStatus={setTabStatus}\r\n                />\r\n              </div>\r\n              <div className={classes.deviceControl}>\r\n                <DeviceControl tabStatus={tabStatus} />\r\n              </div>\r\n              <div className={classes.me}>\r\n                <LocalParticipant />\r\n              </div>\r\n              <div className={classes.t1}>\r\n                <PinParticipant pinId={0} />\r\n              </div>\r\n              <div className={classes.t2}>\r\n                <PinParticipant pinId={1} />\r\n              </div>\r\n              <div className={classes.t3}>\r\n                <PinParticipant pinId={2} />\r\n              </div>\r\n              <div className={classes.t4}>\r\n                <PinParticipant pinId={3} />\r\n              </div>\r\n              <div className={classes.t5}>\r\n                <PinParticipant pinId={4} />\r\n              </div>\r\n              <div className={classes.t6}>\r\n                <PinParticipant pinId={5} />\r\n              </div>\r\n              <div className={classes.t7}>\r\n                <PinParticipant pinId={6} />\r\n              </div>\r\n            </Container>\r\n          </>\r\n        ) : (\r\n          <div> Not Connected !</div>\r\n        )}\r\n      </main>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default VideoParty\r\n","import { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function useRoomState() {\r\n  const room = useSelector((state) => state.room.room)\r\n  const [state, setState] = useState('disconnected')\r\n\r\n  useEffect(() => {\r\n    const setRoomState = () => {\r\n      setState(room.state || 'disconnected')\r\n      if (room.state === 'connected') console.log(room)\r\n    }\r\n    setRoomState()\r\n    room\r\n      .on('disconnected', setRoomState)\r\n      .on('reconnected', setRoomState)\r\n      .on('reconnecting', setRoomState)\r\n    return () => {\r\n      room\r\n        .off('disconnected', setRoomState)\r\n        .off('reconnected', setRoomState)\r\n        .off('reconnecting', setRoomState)\r\n    }\r\n  }, [room])\r\n\r\n  return state\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport Video from 'twilio-video'\r\nimport useUserData from '../../hooks/useUserData/useUserData'\r\nimport {\r\n  setTwilioRoom,\r\n  participantJoined,\r\n  participantExit,\r\n} from '../../redux/room/actions'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport VideoParty from '../../pages/VideoParty/VideoParty'\r\nimport useLocalTracks from '../../hooks/useLocalTracks/useLocalTracks'\r\n\r\nconst connectionOptions = {\r\n  bandwidthProfile: {\r\n    video: {\r\n      mode: 'collaboration',\r\n      dominantSpeakerPriority: 'standard',\r\n      renderDimensions: {\r\n        high: { height: 1080, width: 1920 },\r\n        standard: { height: 720, width: 1280 },\r\n        low: { height: 90, width: 160 },\r\n      },\r\n    },\r\n  },\r\n  dominantSpeaker: true,\r\n  maxAudioBitrate: 12000,\r\n  networkQuality: { local: 1, remote: 1 },\r\n  preferredVideoCodecs: [{ codec: 'VP8', simulcast: true }],\r\n}\r\n\r\nconst RoomContainer = () => {\r\n  const userData = useUserData()\r\n  const token = userData.token\r\n  const dispatch = useDispatch()\r\n  const { localTracks, getLocalVideoTrack } = useLocalTracks()\r\n  const disconnectHandlerRef = useRef(() => {})\r\n  const localTracksRef = useRef([])\r\n  useEffect(() => {\r\n    // It can take a moment for Video.connect to connect to a room. During this time, the user may have enabled or disabled their\r\n    // local audio or video tracks. If this happens, we store the localTracks in this ref, so that they are correctly published\r\n    // once the user is connected to the room.\r\n    localTracksRef.current = localTracks\r\n  }, [localTracks])\r\n\r\n  useEffect(() => {\r\n    const participantConnected = (participant) => {\r\n      console.log(participant.identity, '=> connected')\r\n      dispatch(participantJoined(participant))\r\n    }\r\n\r\n    const participantDisconnected = (participant) => {\r\n      console.log(participant.identity, '=> disconnected')\r\n      dispatch(participantExit(participant))\r\n    }\r\n\r\n    Video.connect(token, { ...connectionOptions, tracks: [] }).then((room) => {\r\n      console.log('CONNECTED', room)\r\n      dispatch(setTwilioRoom(room))\r\n      room.once('disconnected', () => {\r\n        // Reset the room only after all other `disconnected` listeners have been called.\r\n        setTimeout(() => dispatch(setTwilioRoom(null)))\r\n        window.removeEventListener('beforeunload', disconnectHandlerRef.current)\r\n      })\r\n\r\n      // @ts-ignore\r\n      window.twilioRoom = room\r\n\r\n      localTracksRef.current.forEach((track) =>\r\n        // Tracks can be supplied as arguments to the Video.connect() function and they will automatically be published.\r\n        // However, tracks must be published manually in order to set the priority on them.\r\n        // All video tracks are published with 'low' priority. This works because the video\r\n        // track that is displayed in the 'MainParticipant' component will have it's priority\r\n        // set to 'high' via track.setPriority()\r\n        room.localParticipant.publishTrack(track, {\r\n          priority: track.kind === 'video' ? 'low' : 'standard',\r\n        }),\r\n      )\r\n\r\n      disconnectHandlerRef.current = () => {\r\n        console.log('beforeunload hook called!')\r\n        room.disconnect()\r\n      }\r\n\r\n      window.addEventListener('beforeunload', disconnectHandlerRef.current)\r\n\r\n      room.on('participantConnected', participantConnected)\r\n      room.on('participantDisconnected', participantDisconnected)\r\n      room.participants.forEach(participantConnected)\r\n    })\r\n\r\n    return () => {\r\n      dispatch(setTwilioRoom(null))\r\n    }\r\n  }, [])\r\n\r\n  const room = useSelector((state) => state.room.room)\r\n  return (\r\n    <div className=\"room\">\r\n      {room !== null && room.state === 'connected' ? (\r\n        <VideoParty />\r\n      ) : (\r\n        <div> Connecting, Please wait for a while ...</div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RoomContainer\r\n","import React from 'react'\r\nimport {\r\n  Route,\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Redirect,\r\n} from 'react-router-dom'\r\nimport LoginPage from './pages/LoginPage'\r\nimport LoginRoute from './components/RouteComponents/LoginRoute'\r\nimport PublicRoute from './components/RouteComponents/PublicRoute.jsx'\r\nimport useAuth from './hooks/useAuth'\r\nimport RoomContainer from './containers/RoomContainer/RoomContainer'\r\nimport { SnackbarProvider } from 'notistack'\r\n\r\nfunction App() {\r\n  useAuth()\r\n  return (\r\n    <SnackbarProvider maxSnack={3}>\r\n      <Router>\r\n        <Switch>\r\n          <LoginRoute path=\"/login\">\r\n            <LoginPage />\r\n          </LoginRoute>\r\n          <PublicRoute path=\"/party\">\r\n            <RoomContainer />\r\n          </PublicRoute>\r\n          <Route path=\"*\">\r\n            <Redirect to=\"/party\" />\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </SnackbarProvider>\r\n  )\r\n}\r\nexport default App\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { handleActions } from 'redux-actions'\r\nimport * as actions from './actions'\r\nimport { setAccessToken, removeAccessToken } from '../../lib/cookie'\r\n\r\nlet initState = {\r\n  access_code: '',\r\n  name: '',\r\n  token: '',\r\n  role: '',\r\n}\r\n\r\nconst userReducer = handleActions(\r\n  {\r\n    [actions.LOGIN_FAILED]: () => {\r\n      removeAccessToken()\r\n      return initState\r\n    },\r\n\r\n    [actions.LOGIN_SUCCESS]: (state, action) => {\r\n      if (action.payload === null) return initState\r\n      setAccessToken(action.payload.access_token)\r\n      return {\r\n        ...action.payload,\r\n      }\r\n    },\r\n  },\r\n  initState,\r\n)\r\nexport default userReducer\r\n","import { handleActions } from 'redux-actions'\r\nimport * as actions from './actions'\r\nconst initState = {\r\n  token: '',\r\n  room: null,\r\n}\r\n\r\nconst twilioReducer = handleActions(\r\n  {\r\n    [actions.SET_TWILIO_TOKEN]: (state, action) => {\r\n      return { token: action.payload }\r\n    },\r\n  },\r\n  initState,\r\n)\r\n\r\nexport default twilioReducer\r\n","import { createAction } from 'redux-actions'\r\nimport * as api from '../../lib/api'\r\nexport const SET_TWILIO_TOKEN = 'SET_TWILIO_TOKEN'\r\nexport const setTwilioToken = createAction(SET_TWILIO_TOKEN)\r\n// export const\r\nexport const getTwilioToken = () => async (dispatch) => {\r\n  try {\r\n    const res = await api.getTwilioToken()\r\n    dispatch(setTwilioToken(res.data))\r\n  } catch (e) {\r\n    throw e\r\n  }\r\n}\r\n","import { handleActions } from 'redux-actions'\r\nimport * as actions from './actions'\r\n\r\nlet initState = {\r\n  room: null, // twilio room\r\n  stream: {\r\n    // youtube stream url\r\n    url: '',\r\n  },\r\n  dj: '', // dj id\r\n  pins: [],\r\n  participants: [],\r\n  chatOpen: false,\r\n  chatMember: '',\r\n  mainSelection: '', // selection id\r\n}\r\n\r\nconst roomReducer = handleActions(\r\n  {\r\n    // Init Room\r\n    [actions.INIT_ROOM]: (state, action) => {\r\n      return initState\r\n    },\r\n\r\n    // Set Stream URL\r\n    [actions.SET_STREAM_URL_SUCCESS]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        stream: {\r\n          url: action.payload,\r\n        },\r\n      }\r\n    },\r\n\r\n    // Set Stream URL as null\r\n    [actions.SET_STREAM_URL_FAILED]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        stream: {\r\n          url: '',\r\n        },\r\n      }\r\n    },\r\n\r\n    // Set Participants Joined\r\n    [actions.PARTICIPANT_JOINED]: (state, action) => {\r\n      const participants = [...state.participants, action.payload]\r\n      const newP = action.payload\r\n      const pin = state.pins.find((pin) => pin.identity === newP.identity)\r\n      if (!pin && state.pins.length < 7) {\r\n        return {\r\n          ...state,\r\n          participants: participants,\r\n          pins: [\r\n            ...state.pins,\r\n            {\r\n              identity: newP.identity,\r\n              locked: false,\r\n              sent: false,\r\n              mic: false,\r\n              chat: false,\r\n              chats: [],\r\n            },\r\n          ],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        participants: participants,\r\n        // pins: [...state.pins, { identity: newP.identity, locked: false }],\r\n      }\r\n    },\r\n\r\n    // Remove Participants Exit\r\n    [actions.PARTICIPANT_EXIT]: (state, action) => {\r\n      const ext = action.payload\r\n      const participants = [...state.participants]\r\n      const filteredParticipants = participants.filter(\r\n        (p) => p.identity !== ext.identity,\r\n      )\r\n      const filteredPins = state.pins.filter((p) => p.identity !== ext.identity)\r\n      return {\r\n        ...state,\r\n        participants: filteredParticipants ? filteredParticipants : [],\r\n        pins: filteredPins ? filteredPins : [],\r\n        chatOpen: state.chatMember === ext.identity ? false : true,\r\n        chatMember: state.chatMember === ext.identity ? '' : state.chatMember,\r\n      }\r\n    },\r\n\r\n    [actions.INIT_PARTICIPANTS]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        participants: [...action.payload.participants],\r\n      }\r\n    },\r\n\r\n    // Set Room Data\r\n    [actions.SET_TWILIO_ROOM]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        room: action.payload,\r\n      }\r\n    },\r\n\r\n    // Set Pin Sent\r\n    [actions.SET_PIN_SENT]: (state, action) => {\r\n      const pId = action.payload.identity\r\n      const pins = [...state.pins]\r\n      const foundIndex = pins.findIndex((pin) => pin.identity === pId)\r\n      const originPin = pins[foundIndex]\r\n      pins[foundIndex] = {\r\n        ...originPin,\r\n        sent: true,\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        pins,\r\n      }\r\n    },\r\n\r\n    // Set Pin UnLock\r\n    [actions.SET_PIN_UNLOCK]: (state, action) => {\r\n      const pId = action.payload.identity\r\n      const pins = [...state.pins]\r\n      const foundIndex = pins.findIndex((pin) => pin.identity === pId)\r\n      const originPin = pins[foundIndex]\r\n      pins[foundIndex] = {\r\n        ...originPin,\r\n        locked: true,\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        pins,\r\n      }\r\n    },\r\n\r\n    // Set Pin Lock\r\n    [actions.SET_PIN_LOCK]: (state, action) => {\r\n      const pId = action.payload.identity\r\n      const pins = [...state.pins]\r\n      const foundIndex = pins.findIndex((pin) => pin.identity === pId)\r\n      const originPin = pins[foundIndex]\r\n      pins[foundIndex] = {\r\n        identity: pId,\r\n        locked: false,\r\n        sent: false,\r\n        mic: false,\r\n        chat: false,\r\n        chats: [],\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        chatOpen: false,\r\n        chatMember: '',\r\n        pins,\r\n      }\r\n    },\r\n\r\n    // Set Pin Mic On\r\n    [actions.SET_PIN_MIC]: (state, action) => {\r\n      const pId = action.payload.identity\r\n      const pins = [...state.pins]\r\n      const foundIndex = pins.findIndex((pin) => pin.identity === pId)\r\n      const originPin = pins[foundIndex]\r\n      pins[foundIndex] = {\r\n        ...originPin,\r\n        mic: action.payload.isOn,\r\n      }\r\n      return {\r\n        ...state,\r\n        pins,\r\n      }\r\n    },\r\n\r\n    [actions.INIT_CHAT_ROOM]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        chatMember: '',\r\n        chatOpen: false,\r\n      }\r\n    },\r\n\r\n    [actions.OPEN_CHAT]: (state, action) => {\r\n      const pins = [...state.pins]\r\n      const pinIndex = pins.findIndex(\r\n        (p) => p.identity === action.payload.identity,\r\n      )\r\n      const originPin = pins[pinIndex]\r\n      const updatedChats = originPin.chats.map((chat) => ({\r\n        ...chat,\r\n        read: true,\r\n      }))\r\n      pins[pinIndex] = {\r\n        ...originPin,\r\n        chats: updatedChats,\r\n      }\r\n      return {\r\n        ...state,\r\n        chatOpen: true,\r\n        chatMember: action.payload.identity,\r\n        pins,\r\n      }\r\n    },\r\n\r\n    [actions.CLOSE_CHAT]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        chatOpen: false,\r\n        chatMember: '',\r\n      }\r\n    },\r\n\r\n    [actions.ADD_MESSAGE]: (state, action) => {\r\n      const pId = action.payload.identity\r\n      const pins = [...state.pins]\r\n      const foundIndex = pins.findIndex((pin) => pin.identity === pId)\r\n      const originPin = pins[foundIndex]\r\n      pins[foundIndex] = {\r\n        ...originPin,\r\n        chats: [\r\n          ...originPin.chats,\r\n          {\r\n            text: action.payload.message,\r\n            sent: action.payload.sent,\r\n            read: action.payload.sent\r\n              ? true\r\n              : state.chatMember === originPin.identity\r\n              ? true\r\n              : false,\r\n          },\r\n        ],\r\n      }\r\n      return {\r\n        ...state,\r\n        pins,\r\n      }\r\n    },\r\n\r\n    // set mainSelection which would be used in MainParticipant\r\n    [actions.SELECT_MAIN]: (state, action) => {\r\n      return {\r\n        ...state,\r\n        mainSelection: action.payload.identity,\r\n      }\r\n    },\r\n\r\n    // radomize pins triggered from random button click\r\n    [actions.RANDOMIZE_PINS]: (state, action) => {\r\n      const pins = [...state.pins]\r\n      for (let pinIndex = 0; pinIndex < 7; pinIndex++) {\r\n        if (pins[pinIndex] && pins[pinIndex].locked === true) {\r\n          continue\r\n        }\r\n        const candidates = state.participants.filter((p) => {\r\n          const pinned = pins.find((pin) => pin.identity === p.identity)\r\n          if (pinned) return false\r\n          else return true\r\n        })\r\n\r\n        const randomPin =\r\n          candidates[Math.floor(Math.random() * candidates.length)]\r\n\r\n        if (!randomPin) continue\r\n        pins[pinIndex] = {\r\n          identity: randomPin.identity,\r\n          locked: false,\r\n          sent: false,\r\n          mic: false,\r\n          chat: false,\r\n          chats: [],\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        pins,\r\n      }\r\n    },\r\n  },\r\n  initState,\r\n)\r\nexport default roomReducer\r\n","import { combineReducers } from 'redux'\r\nimport userReducer from './user/reducer'\r\nimport twilioReducer from './twilio/reducer'\r\nimport roomReducer from './room/reducer'\r\nexport default combineReducers({\r\n  user: userReducer,\r\n  room: roomReducer,\r\n  twilio: twilioReducer,\r\n})\r\n","import React from 'react'\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles'\r\n\r\nconst theme = createMuiTheme({\r\n  type: 'dark',\r\n  palette: {\r\n    primary: {\r\n      main: '#383E4A',\r\n    },\r\n  },\r\n  sidebarWidth: 260,\r\n  sidebarMobileHeight: 90,\r\n})\r\n\r\nconst AirlockTheme = ({ children }) => {\r\n  return <ThemeProvider theme={theme}> {children} </ThemeProvider>\r\n}\r\n\r\nexport default AirlockTheme\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './style.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport Reducer from './redux'\nimport thunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport AirlockTheme from './config/theme'\nimport Pusher from 'pusher-js'\nimport { setPusherClient } from 'react-pusher'\nconst store = createStore(Reducer, composeWithDevTools(applyMiddleware(thunk)))\n// Puhser\nconst pusherClient = new Pusher(process.env.REACT_APP_PUSHER_APP_KEY, {\n  cluster: process.env.REACT_APP_PUSHER_APP_CLUSTER,\n})\nsetPusherClient(pusherClient)\nReactDOM.render(\n  <Provider store={store}>\n    <AirlockTheme>\n      <App />\n    </AirlockTheme>\n  </Provider>,\n  document.getElementById('root'),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}