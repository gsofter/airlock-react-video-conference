(this.webpackJsonpsquareparty=this.webpackJsonpsquareparty||[]).push([[0],{223:function(e,t,n){e.exports=n(414)},228:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},414:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),i=n.n(c),o=(n(228),n(55)),l=n(22),u=n(76),s=n(6),d=function(e){var t=e.children,n=Object(u.a)(e,["children"]),a=Object(s.c)((function(e){return e.user}));return r.a.createElement(l.b,Object.assign({},n,{render:function(e){var n=e.location;return a.token?t:r.a.createElement(l.a,{to:{pathname:"/",state:{from:n}}})}}))},m=n(7),f=n(59),p=n.n(f),b=function(){return Object(s.c)((function(e){return e.user}))},h=n(15),E=n.n(h),g=n(24),v=n(479),O=n(44),j=n.n(O);function y(){return function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}("airlock_token")}var x="http://localhost:5000/api";console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_PUSHER_APP_CLUSTER:"us3",REACT_APP_PUSHER_APP_ID:"",REACT_APP_PUSHER_APP_KEY:"f4d68f730ac1882d1bb4",REACT_APP_PUSHER_APP_SECRET:""}));var k=function(e){var t=y();return j.a.post("".concat(x,"/room/set_stream_url"),{url:e},{headers:{Authorization:"Bearer ".concat(t)}})},C=function(e){var t=y();return console.log("Token => ",t),j.a.post("".concat(x,"/room/unlock_request"),{to:e},{headers:{Authorization:"Bearer ".concat(t)}})},w=function(e){var t=y();return j.a.post("".concat(x,"/room/lock_request"),{to:e},{headers:{Authorization:"Bearer ".concat(t)}})},S=function(e){var t=y();return j.a.post("".concat(x,"/room/unlock_accept"),{to:e},{headers:{Authorization:"Bearer ".concat(t)}})},N=function(e){var t=y();return j.a.post("".concat(x,"/room/unlock_decline"),{to:e},{headers:{Authorization:"Bearer ".concat(t)}})},I=function(e,t){var n=y();return j.a.get("".concat(x,"/room/mic"),{params:{to:e,mic_on:t},headers:{Authorization:"Bearer ".concat(n)}})},T=function(e,t){var n=y();return j.a.post("".concat(x,"/room/message"),{to:e,message:t},{headers:{Authorization:"Bearer ".concat(n)}})},A=function(e,t){return j.a.post("".concat(x,"/user/dj_connect"),{username:e,link:t})},_=Object(v.a)("INIT_ROOM"),R=Object(v.a)("SET_STREAM_URL_SUCCESS"),P=Object(v.a)("SET_STREAM_URL_FAILED"),L=Object(v.a)("PARTICIPANT_JOINED"),M=Object(v.a)("PARTICIPANT_EXIT"),B=(Object(v.a)("INIT_PARTICIPANTS"),Object(v.a)("SET_PIN_SENT")),D=Object(v.a)("SET_PIN_UNLOCK"),F=Object(v.a)("SET_PIN_LOCK"),U=Object(v.a)("SET_PIN_MIC"),W=Object(v.a)("SET_TWILIO_ROOM"),z=Object(v.a)("OPEN_CHAT"),V=Object(v.a)("CLOSE_CHAT"),q=Object(v.a)("ADD_MESSAGE"),H=(Object(v.a)("INIT_CHAT_ROOM"),Object(v.a)("SELECT_MAIN")),G=Object(v.a)("RANDOMIZE_PINS"),Y=function(e){var t=e.identity,n=e.isOn;return function(){var e=Object(g.a)(E.a.mark((function e(a,r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,n);case 3:a(U({identity:t,isOn:n})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},K=function(e){var t=e.identity;return function(){var e=Object(g.a)(E.a.mark((function e(n,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t);case 3:n(B({identity:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},J=function(e){var t=e.identity;return function(){var e=Object(g.a)(E.a.mark((function e(n,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t);case 3:n(F({identity:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},Q=function(e){var t=e.identity;return function(){var e=Object(g.a)(E.a.mark((function e(n,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(t);case 3:n(D({identity:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},$=n(9);var X=n(2),Z=n(477),ee=n(456),te=n(207),ne=n(28);function ae(e){var t=Object(a.useState)([]),n=Object($.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){c(Array.from(e.tracks.values()));var t=function(e){return c((function(t){return[].concat(Object(ne.a)(t),[e])}))},n=function(e){return c((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("trackPublished",t),e.on("trackUnpublished",n),function(){e.off("trackPublished",t),e.off("trackUnpublished",n)}}),[e]),r}function re(e){var t=Object(a.useState)(e&&e.track),n=Object($.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(e&&e.track),e){var t=function(){return c(null)};return e.on("subscribed",c),e.on("unsubscribed",t),function(){e.off("subscribed",c),e.off("unsubscribed",t)}}}),[e]),r}var ce=Object(Z.a)("video")({width:"100%",maxHeight:"100%",objectFit:"contain"});function ie(e){var t=e.track,n=e.isLocal,c=Object(a.useRef)(null);Object(a.useEffect)((function(){if(t){var e=c.current;return t.attach(e),function(){t.detach(e)}}}),[t]);var i=n?{transform:"rotateY(180deg)"}:{};return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(ce,{ref:c,style:i}))}function oe(e){var t=e.track;return Object(a.useEffect)((function(){return document.body.appendChild(t.attach()),function(){return t.detach().forEach((function(e){return e.remove()}))}}),[t]),null}function le(e){var t=e.publication,n=e.isLocal,a=e.disableAudio,c=e.videoPriority,i=re(t);if(!i)return null;switch(i.kind){case"video":return r.a.createElement(ie,{track:i,priority:c,isLocal:"camera"===i.name&&n});case"audio":return a?null:r.a.createElement(oe,{track:i});default:return null}}function ue(e){var t,n=e.participant,a=e.disableAudio,c=Object(s.c)((function(e){return e.room.room})),i=ae(n),o=n===c.localParticipant;return t=i.filter((function(e){return"screen"!==e.trackName})),r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(le,{key:e.kind,publication:e,participant:n,isLocal:o,disableAudio:a})})))}var se=n(11),de=n(478),me=n(482),fe=n(188),pe=n.n(fe);function be(e){var t=Object(a.useState)(!e||e.isEnabled),n=Object($.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(!e||e.isEnabled),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("enabled",t),e.on("disabled",n),function(){e.off("enabled",t),e.off("disabled",n)}}}),[e]),r}var he,Ee=0,ge=window.AudioContext||window.webkitAudioContext;function ve(e){he=he||new ge;var t=new MediaStream([e.mediaStreamTrack.clone()]),n=he.createMediaStreamSource(t),a=he.createAnalyser();return a.smoothingTimeConstant=.4,a.fftSize=512,n.connect(a),a}var Oe=r.a.memo((function(e){var t=e.size,n=e.audioTrack,c=e.background,i=t||24,o=Object(a.useRef)(null),l=be(n);Object(a.useEffect)((function(){var e=o.current;if(n&&l&&e){var t=ve(n),a=function(){t=ve(n)};window.addEventListener("focus",a);var r=new Uint8Array(t.frequencyBinCount),c=Object(me.a)((function(){t.getByteFrequencyData(r);for(var n=0,a=r.length,c=0;c<a;c++)n+=r[c];var i=Math.min(21,Math.max(0,14*Math.log10(n/a/3)));e.setAttribute("y",String(21-i))}),50);return function(){e.setAttribute("y","21"),c.stop(),window.removeEventListener("focus",a)}}}),[n,l]);var u="audio-level-clip-".concat(Ee++);return l?r.a.createElement("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",height:"".concat(i,"px"),width:"".concat(i,"px")},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:u},r.a.createElement("rect",{ref:o,x:"0",y:"21",width:"24",height:"24"}))),r.a.createElement("path",{fill:c||"rgba(255, 255, 255, 0.1)",d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),r.a.createElement("path",{fill:"#0c0",clipPath:"url(#".concat(u,")"),d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})):r.a.createElement(pe.a,{height:"".concat(i,"px"),width:"".concat(i,"px"),style:{width:"initial",height:"initial"},"data-cy-audio-mute-icon":!0})})),je=n(189),ye=n.n(je),xe=Object(Z.a)("div")({position:"absolute",zIndex:1,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),ke=Object(Z.a)("h3")({textAlign:"center",margin:"0.6em 0"});function Ce(){return r.a.createElement(xe,null,r.a.createElement("div",null,r.a.createElement(ye.a,{fontSize:"large"})),r.a.createElement(ke,null,"Insufficient Bandwidth"))}var we=Object(Z.a)("div")({display:"flex",alignItems:"flex-end","& div":{width:"2px",border:"1px solid black",boxSizing:"content-box","&:not(:last-child)":{borderRight:"none"}}});function Se(e){var t=e.qualityLevel;return null===t?null:r.a.createElement(we,null,[0,1,2,3,4].map((function(e){return r.a.createElement("div",{key:e,style:{height:"".concat(3*(e+1),"px"),background:t>e?"#0c0":"#040"}})})))}var Ne=n(475),Ie=Object(ee.a)({indicator:{width:"10px",height:"10px",borderRadius:"100%",background:"#0c0",display:"inline-block",marginRight:"3px"},isReconnecting:{background:"#ffb100"}});function Te(e){var t=function(e){var t=Object(a.useState)(!1),n=Object($.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("reconnecting",t),e.on("reconnected",n),function(){e.off("reconnecting",t),e.off("reconnected",n)}}),[e]),r}(e.participant),n=Ie();return r.a.createElement(Ne.a,{title:t?"Participant is reconnecting":"Participant is connected"},r.a.createElement("span",{className:Object(X.a)(n.indicator,Object(se.a)({},n.isReconnecting,t))}))}var Ae=n(191),_e=n(171);function Re(){return r.a.createElement(Ne.a,{title:"Participant is pinned. Click to un-pin.",placement:"top"},r.a.createElement(_e.a,{style:{float:"right",fontSize:"29px"}},r.a.createElement(Ae.a,null)))}var Pe=n(192),Le=n.n(Pe),Me=n(97),Be=n.n(Me);function De(e){var t=Object(a.useState)(e&&e.isSwitchedOff),n=Object($.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){if(c(e&&e.isSwitchedOff),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("switchedOff",t),e.on("switchedOn",n),function(){e.off("switchedOff",t),e.off("switchedOn",n)}}}),[e]),!!r}var Fe=Object(ee.a)((function(e){return Object(de.a)({container:Object(se.a)({position:"relative",display:"flex",alignItems:"center",height:"100%",overflow:"hidden",cursor:"pointer","& video":{filter:"none"},"& svg":{stroke:"black",strokeWidth:"0.8px"}},e.breakpoints.down("xs"),{height:e.sidebarMobileHeight,width:"".concat(16*e.sidebarMobileHeight/9,"px"),marginRight:"3px",fontSize:"10px"}),isVideoSwitchedOff:{"& video":{filter:"blur(4px) grayscale(1) brightness(1)"}},infoContainer:{position:"absolute",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:"0.4em",width:"100%",background:"transparent"},hideVideo:{},identity:{background:"rgba(0, 0, 0, 0.7)",padding:"0.1em 0.3em",margin:0,display:"flex",alignItems:"center"},infoRow:{display:"flex",justifyContent:"space-between"}})}));function Ue(e){var t=e.participant,n=e.onClick,c=e.isSelected,i=e.children,o=ae(t),l=o.find((function(e){return"audio"===e.kind})),u=o.find((function(e){return"camera"===e.trackName})),s=function(e){var t=Object(a.useState)(e.networkQualityLevel),n=Object($.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(e){return c(e)};return c(e.networkQualityLevel),e.on("networkQualityLevelChanged",t),function(){e.off("networkQualityLevelChanged",t)}}),[e]),r}(t),d=Boolean(u),m=o.find((function(e){return"screen"===e.trackName})),f=De(re(u)),p=re(l),b=Fe();return r.a.createElement("div",{className:Object(X.a)(b.container,Object(se.a)({},b.isVideoSwitchedOff,f)),onClick:n,"data-cy-participant":t.identity},r.a.createElement("div",{className:Object(X.a)(b.infoContainer,Object(se.a)({},b.hideVideo,!d))},r.a.createElement("div",{className:b.infoRow},r.a.createElement("h4",{className:b.identity},r.a.createElement(Te,{participant:t}),t.identity),r.a.createElement(Se,{qualityLevel:s})),r.a.createElement("div",null,r.a.createElement(Oe,{audioTrack:p,background:"white"}),!d&&r.a.createElement(Be.a,null),m&&r.a.createElement(Le.a,null),c&&r.a.createElement(Re,null))),f&&r.a.createElement(Ce,null),i)}function We(e){var t=e.participant,n=e.disableAudio;Object(s.c)((function(e){return e.room.room}));return r.a.createElement(Ue,{participant:t,disableAudio:n},r.a.createElement(ue,{participant:t,disableAudio:n}))}var ze=n(5),Ve=n(459),qe=n(460),He=n(47),Ge=n(60),Ye=n(193),Ke=n(117),Je=function(){return r.a.createElement(He.a,{icon:Ge.b})},Qe=function(){return r.a.createElement(He.a,{icon:Ge.c})},$e=function(){return r.a.createElement(He.a,{icon:Ye.a})},Xe=function(){return r.a.createElement(He.a,{icon:Ge.d})},Ze=function(){return r.a.createElement(He.a,{icon:Ge.e})},et=function(){return r.a.createElement(He.a,{icon:Ge.a})},tt=function(){return r.a.createElement(He.a,{icon:Ge.f})},nt=function(){return r.a.createElement(He.a,{icon:Ge.g})},at=function(){return r.a.createElement(He.a,{icon:Ke.b})},rt=function(){return r.a.createElement(He.a,{icon:Ke.a})},ct=Object(ee.a)((function(e){return{pinMainWrapper:{height:"100%",border:"1px solid blue",display:"flex",flexDirection:"column",justifyContent:"space-between"},videoWrapper:{height:"calc(100% - 40px)"},buttonGroup:{display:"flex",marginBottom:"0px",flexDirection:"row",justifyContent:"space-around",height:"40px"},emptyScene:{textAlign:"center",backgroundColor:"black",height:"100%",border:"1px solid brown",alignItems:"center"},button:{width:"50%",color:"white"},activeButton:{color:"#FF0058"},deactiveButton:{color:"white"}}})),it=Object(ze.a)({root:{color:"#80FF00",border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(Ve.a),ot=Object(ze.a)({root:{color:"#00ECF8",border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(Ve.a),lt=Object(ze.a)({root:{color:"#FF0058",border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(Ve.a),ut=Object(ze.a)({root:{color:"white",border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(Ve.a),st=Object(ze.a)({root:{border:"1px solid grey",borderRadius:"0px",backgroundColor:"black",flex:1}})(Ve.a),dt=function(e){var t=e.pinId,n=ct(),a=Object(s.b)(),c=(Object(s.c)((function(e){return e.user})),Object(s.c)((function(e){return e.room}))),i=c.participants,o=c.pins[t];if(!o)return r.a.createElement("div",{className:n.emptyScene}," not Available");var l=i.find((function(e){return e.identity===o.identity})),u=o.chats.filter((function(e){return!1===e.read})),d=function(){var e=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(K({identity:o.identity}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(J({identity:o.identity}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){a(z({identity:l.identity}))};return l?r.a.createElement("div",{className:n.pinMainWrapper},r.a.createElement("div",{className:n.videoWrapper,onClick:function(){a(H({identity:o.identity}))}},r.a.createElement(We,{participant:l,disableAudio:!o.mic})),!0===o.locked?r.a.createElement("div",{className:n.buttonGroup},o.mic?r.a.createElement(lt,{variant:"outline",style:{root:{color:"green"}},onClick:function(){a(Y({identity:l.identity,isOn:!1})).then((function(){console.log("SET_MIC_OFF SUCCESS")})).catch((function(e){console.log(e.message)}))}},r.a.createElement(Xe,null)):r.a.createElement(ut,{variant:"outline",style:{root:{color:"green"}},onClick:function(){a(Y({identity:l.identity,isOn:!0})).then((function(){console.log("SET_MIC_ON SUCCESS")})).catch((function(e){console.log(e.message)}))}},r.a.createElement(Ze,null)),o.identity===c.chatMember?r.a.createElement(st,{variant:"outline",onClick:f,className:n.activeButton},r.a.createElement($e,null)):r.a.createElement(st,{variant:"outline",onClick:f,className:n.deactiveButton},u.length>0?r.a.createElement(qe.a,{color:"secondary",badgeContent:u.length},r.a.createElement($e,null)):r.a.createElement($e,null)),r.a.createElement(it,{variant:"outline",onClick:m},r.a.createElement(Je,null))):!1===o.sent?r.a.createElement("div",{className:n.buttonGroup},r.a.createElement(ot,{variant:"outline",onClick:d},r.a.createElement(Qe,null))):r.a.createElement("div",{className:n.buttonGroup},r.a.createElement(ot,{variant:"outline"},r.a.createElement(et,null)))):r.a.createElement("div",{className:n.emptyScene},"Not Available")},mt=n(472),ft=n(476),pt=n(465),bt=n(462),ht=n(463),Et=n(461);function gt(e){var t=e.showDialog,n=e.closeDialog,a=e.setStreamUrl,c=r.a.useState(""),i=Object($.a)(c,2),o=i[0],l=i[1];return r.a.createElement(ft.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title"},r.a.createElement(Et.a,{id:"form-dialog-title"},"Youtube Channel"),r.a.createElement(bt.a,null,r.a.createElement(ht.a,null,"Enter Youtube Channel URL."),r.a.createElement(mt.a,{autoFocus:!0,margin:"dense",id:"name",label:"URL",type:"text",onChange:function(e){l(e.target.value)},fullWidth:!0})),r.a.createElement(pt.a,null,r.a.createElement(Ve.a,{onClick:n,color:"default",variant:"contained"},"Cancel"),r.a.createElement(Ve.a,{onClick:function(e){console.log(o),a(o),n()},color:"secondary",variant:"contained"},"OK")))}var vt=n(194),Ot=n.n(vt),jt=Object(v.a)("LOGIN_FAILED"),yt=(Object(v.a)("LOGIN_SUCCESS"),Object(v.a)("DJ_CONNECT_SUCCESS")),xt=Object(ee.a)((function(e){return{mainWrapper:Object(se.a)({height:"100%",backgroundColor:"#333333",border:"1px solid green"},"height","100%"),participantWrapper:{height:"calc(100% - 36px)"},buttonsWrapper:{marginBottom:"0px",height:"50px"}}})),kt=Object(ze.a)({root:{borderRadius:"0px",border:"1px solid grey",backgroundColor:"black",width:"100%",color:"white",fontStyle:"bold"}})(Ve.a),Ct=function(){var e=xt(),t=Object(l.g)(),n=Object(s.b)(),a=Object(s.c)((function(e){return e.room.room})),c=a.localParticipant;return r.a.createElement("div",{className:e.mainWrapper},r.a.createElement("div",{className:e.participantWrapper},r.a.createElement(We,{participant:c,disableAudio:!1})),r.a.createElement("div",{className:e.buttonsWrapper},r.a.createElement(kt,{variant:"outlined",onClick:function(e){a.disconnect(),n((function(e){e(jt()),e(_())})),t.push("/login")}},"Exit Party ",r.a.createElement(Ot.a,null))))},wt=Object(ee.a)({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"calc(100% - 70px)",background:"black",border:"2px solid cyan",borderStyle:"dashed"},isVideoSwitchedOff:{"& video":{filter:"blur(4px) grayscale(1) brightness(0.5)"}},identity:{background:"rgba(0, 0, 0, 0.7)",padding:"0.1em 0.3em",margin:"1em",fontSize:"1.2em",display:"inline-flex","& svg":{marginLeft:"0.3em"}},infoContainer:{position:"absolute",zIndex:1,height:"100%",padding:"0.4em",width:"100%"}});function St(e){var t=e.participant,n=e.children,a=wt(),c=ae(t).find((function(e){return"camera"===e.trackName})),i=Boolean(c),o=De(re(c));return r.a.createElement("div",{"data-cy-main-participant":!0,className:Object(X.a)(a.container,Object(se.a)({},a.isVideoSwitchedOff,o))},r.a.createElement("div",{className:a.infoContainer},r.a.createElement("h4",{className:a.identity},t.identity,!i&&r.a.createElement(Be.a,null))),o&&r.a.createElement(Ce,null),n)}var Nt=Object(ee.a)({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"calc(100% - 70px)",background:"black",border:"2px solid cyan",borderStyle:"dashed"}});function It(){var e=Nt(),t=Object(s.c)((function(e){return e.room})).participants,n=Object(a.useState)(t[Math.floor(Math.random()*t.length)]),c=Object($.a)(n,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){var e=setInterval((function(){o(t[Math.floor(Math.random()*t.length)])}),15e3);return function(){return clearInterval(e)}}),[]),i?r.a.createElement(St,{participant:i},r.a.createElement(ue,{participant:i,disableAudio:!0})):r.a.createElement("div",{className:e.container},"No one selected")}var Tt=n(195),At=n.n(Tt),_t=Object(ee.a)({streamWrapper:{display:function(e){return"dj"===e.tabStatus?"flex":"none"},flexDirection:"row",justifyContent:"center",alignItems:"center",height:"calc(100% - 70px)"}}),Rt=function(e){var t=e.tabStatus,n=_t({tabStatus:t}),a=Object(s.c)((function(e){return e.room})).stream.url;return r.a.createElement("div",{className:n.streamWrapper},r.a.createElement(At.a,{url:a,width:"100%",height:"100%",controls:!1,config:{youtube:{playerVars:{showinfo:1,modestbranding:1}}},onError:function(){console.log("ERROR")},playing:!0}))},Pt=Object(ee.a)((function(e){return{tabControlWrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},tabControlItem:{padding:e.spacing(1),opacity:"0.3","& > img":{width:"100%"}},tabControlItemActive:{padding:e.spacing(1),opacity:1,"& > img":{width:"100%"}}}})),Lt=function(e){var t=e.status,n=e.setTabStatus,a=Pt();return r.a.createElement("div",{className:a.tabControlWrapper},r.a.createElement("div",{className:"".concat("dj"===t?a.tabControlItemActive:a.tabControlItem),onClick:function(){return n("dj")}},r.a.createElement("img",{src:"./assets/live-dj-white.png",alt:"DJ"})),r.a.createElement("div",{className:"".concat("fav"===t?a.tabControlItemActive:a.tabControlItem),onClick:function(){return n("fav")}},r.a.createElement("img",{src:"./assets/fav.png",alt:"fav"})),r.a.createElement("div",{className:"".concat("grid"===t?a.tabControlItemActive:a.tabControlItem),onClick:function(){return n("grid")}},r.a.createElement("img",{src:"./assets/grid.png",alt:"Grid"})))},Mt=n(480),Bt=n(466),Dt=n(196),Ft=n.n(Dt),Ut=n(197),Wt=n.n(Ut),zt=Object(ee.a)((function(e){return{volumeControlWrapper:{display:"block"}}})),Vt=Object(ze.a)({root:{color:"#fff"},thumb:{backgroundColor:"#fff"}})(Mt.a),qt=function(){var e=zt(),t=r.a.useState(30),n=Object($.a)(t,2),a=n[0],c=n[1];return r.a.createElement("div",{className:e.volumeControlWrapper},r.a.createElement(Bt.a,{container:!0,spacing:2},r.a.createElement(Bt.a,{item:!0},r.a.createElement(Ft.a,null)),r.a.createElement(Bt.a,{item:!0,xs:!0},r.a.createElement(Vt,{value:a,onChange:function(e,t){c(t)},"aria-labelledby":"continuous-slider",style:{thumb:{backgroundColor:"#fff"}}})),r.a.createElement(Bt.a,{item:!0},r.a.createElement(Wt.a,null))))},Ht=n(481),Gt=n(198),Yt=n.n(Gt),Kt=n(199),Jt=n.n(Kt);n(20);function Qt(){var e=function(){var e=Object(a.useState)(),t=Object($.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){p.a.createLocalAudioTrack().then((function(e){r(e)}))}),[]),Object(a.useEffect)((function(){var e=function(){return r(void 0)};if(n)return n.on("stopped",e),function(){n.off("stopped",e)}}),[n]),n}(),t=function(){var e=Object(a.useState)(),t=Object($.a)(e,2),n=t[0],r=t[1],c=Object(a.useCallback)((function(){return p.a.createLocalVideoTrack({frameRate:24,height:720,width:1280,name:"camera"}).then((function(e){return r(e),e}))}),[]);return Object(a.useEffect)((function(){c()}),[c]),Object(a.useEffect)((function(){var e=function(){return r(void 0)};if(n)return n.on("stopped",e),function(){n.off("stopped",e)}}),[n]),[n,c]}(),n=Object($.a)(t,2),r=n[0],c=n[1];return{localTracks:[e,r].filter((function(e){return void 0!==e})),getLocalVideoTrack:c}}window.TwilioVideo=p.a;Object(a.createContext)(null);Object(a.createContext)();var $t=Object(ze.a)((function(e){return{root:{width:42,height:26,padding:0,margin:e.spacing(1)},switchBase:{padding:1,"&$checked":{transform:"translateX(16px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#52d869",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[200],opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,n=Object(u.a)(e,["classes"]);return r.a.createElement(Ht.a,Object.assign({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},n))})),Xt=function(){var e=function(){var e=Qt().localTracks.find((function(e){return"audio"===e.kind}));return[be(e),Object(a.useCallback)((function(){e&&(e.isEnabled?e.disable():e.enable())}),[e])]}(),t=Object($.a)(e,2),n=t[0],c=t[1];return r.a.createElement($t,{checked:n,onChange:function(){c()},name:"camera"})},Zt=function(){var e=function(){var e=Qt(),t=e.localTracks,n=e.getLocalVideoTrack,r=t.find((function(e){return"camera"===e.name})),c=Object(s.c)((function(e){return e.room.localParticipant})),i=Object(a.useCallback)((function(){if(r){if(c){var e=c.unpublishTrack(r);c.emit("trackUnpublished",e)}r.stop()}else n().then((function(e){c&&c.publishTrack(e)}))}),[r,c,n]);return[!!r,i]}(),t=Object($.a)(e,2),n=t[0],c=t[1];return r.a.createElement($t,{checked:n,onChange:function(){c()},name:"camera"})},en=function(){var e=r.a.useState({mic:!0,camera:!0}),t=Object($.a)(e,2);t[0],t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bt.a,{container:!0,spacing:2},r.a.createElement(Bt.a,{item:!0},r.a.createElement(Yt.a,null)),r.a.createElement(Bt.a,{item:!0,xs:!0},"Webcam"),r.a.createElement(Bt.a,{item:!0},r.a.createElement(Zt,null))),r.a.createElement(Bt.a,{container:!0,spacing:2},r.a.createElement(Bt.a,{item:!0},r.a.createElement(Jt.a,null)),r.a.createElement(Bt.a,{item:!0,xs:!0},"Microphone"),r.a.createElement(Bt.a,{item:!0},r.a.createElement(Xt,null))))};var tn=Object(ee.a)((function(e){return{participantInfo:{color:"cyan"}}})),nn=function(e){e.tabStatus;var t=tn(),n=Object(s.c)((function(e){return e.room})).participants.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bt.a,{container:!0,spacing:2},r.a.createElement(Bt.a,{item:!0},r.a.createElement(te.a,null,"participants (",r.a.createElement("span",{className:t.participantInfo},n+1),")"))),r.a.createElement(qt,null),r.a.createElement(en,null))},an=Object(ee.a)((function(e){return{randomButton:{marginBottom:e.spacing(1),marginTop:e.spacing(2),color:"cyan",border:"2px solid cyan",borderRadius:"0px",float:"right"},configureButton:{color:"#19ff03",border:"2px solid #19ff03"},buttonGroup:{display:"flex",flexDirection:"row",justifyContent:"flex-end",padding:"5px",alignItems:"flex-end"}}})),rn=function(e){var t=e.role,n=e.onConfigureLiveStream,a=e.onRandomButton,c=an();return r.a.createElement("div",{className:c.buttonGroup},r.a.createElement(Ve.a,{variant:"outlined",className:c.randomButton,onClick:a},"Random Rooms"),"dj"===t?r.a.createElement(Ve.a,{variant:"outlined",className:Object(X.a)(c.randomButton,c.configureButton),style:{marginLeft:"5px"},onClick:n},"Configure Live Stream"):null)},cn=n(34),on=n.n(cn),ln=n(41),un=function(){var e=Object(s.c)((function(e){return e.user})),t="".concat(e.identity,"-mic"),n=Object(s.b)(),a=Object(ln.b)().enqueueSnackbar;return r.a.createElement(on.a,{channel:t,event:"mic-on",onUpdate:function(e){"on"===e.message?(n(U({identity:e.name,isOn:!0})),a("microphone turned on with ".concat(e.name),{variant:"info",anchorOrigin:{vertical:"top",horizontal:"right"}})):(n(U({identity:e.name,isOn:!1})),a("microphone turned off with ".concat(e.name),{variant:"warning",anchorOrigin:{vertical:"top",horizontal:"right"}}))}})},sn=function(){var e=Object(s.c)((function(e){return e.user})),t="".concat(e.identity,"-message"),n=Object(s.b)(),a=Object(ln.b)().enqueueSnackbar;return r.a.createElement(on.a,{channel:t,event:"message",onUpdate:function(e){var t=e.name,r=e.message;n(q({identity:t,message:r,sent:!1})),a("A new message from ".concat(t),{variant:"info",anchorOrigin:{vertical:"top",horizontal:"right"}})}})},dn=function(e){var t=e.isOpen,n=e.senderName,a=e.handleAgree,c=e.handleDecline,i=Object(s.c)((function(e){return e.room})).participants.find((function(e){return e.identity===n}));return r.a.createElement(ft.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(bt.a,null,r.a.createElement("div",null,r.a.createElement(We,{participant:i,disableAudio:!0})),r.a.createElement("div",null,n," wants to lock his room with you.")),r.a.createElement(pt.a,null,r.a.createElement(Ve.a,{onClick:a,color:"secondary",variant:"contained"},"Agree"),r.a.createElement(Ve.a,{onClick:c,color:"default",variant:"contained"},"Decline")))},mn=function(){var e=Object(a.useState)(!1),t=Object($.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),o=Object($.a)(i,2),l=o[0],u=o[1],d=Object(s.c)((function(e){return e.user})).identity,m=Object(s.b)(),f=function(){var e=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m(Q({identity:l})),c(!1)}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(dn,{isOpen:n,senderName:l,handleAgree:f,handleDecline:function(){try{m(function(e){var t=e.identity;return function(){var e=Object(g.a)(E.a.mark((function e(n,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(t);case 3:n(F({identity:t})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}({identity:l})),c(!1)}catch(e){console.log(e)}}}),r.a.createElement(on.a,{channel:"".concat(d,"-unlock"),event:"unlock",onUpdate:function(e){u(e.name),c(!0)}}))},fn=function(){var e=Object(s.c)((function(e){return e.user})),t="".concat(e.identity,"-unlock-accept"),n=Object(s.b)(),a=Object(ln.b)().enqueueSnackbar;return r.a.createElement(on.a,{channel:t,event:"unlock-accept",onUpdate:function(e){var t=e.name;n(D({identity:t})),a("".concat(e.name," accepted your lock request"),{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}})}})},pn=function(){var e=Object(s.c)((function(e){return e.user})),t="".concat(e.identity,"-lock-request"),n=Object(s.b)(),a=Object(ln.b)().enqueueSnackbar;return r.a.createElement(r.a.Fragment,null,r.a.createElement(on.a,{channel:t,event:"lock",onUpdate:function(e){n(F({identity:e.name})),a("".concat(e.name," locked you"),{variant:"warning",anchorOrigin:{vertical:"top",horizontal:"right"}})}}))},bn=function(){var e=Object(s.b)(),t=Object(ln.b)().enqueueSnackbar;return r.a.createElement(r.a.Fragment,null,r.a.createElement(on.a,{channel:"airlock-channel",event:"stream-url-change",onUpdate:function(n){console.log(n.message),e(R(n.message)),t("New stream url set",{variant:"info",anchorOrigin:{vertical:"top",horizontal:"right"}})}}),r.a.createElement(mn,null),r.a.createElement(fn,null),r.a.createElement(pn,null),r.a.createElement(un,null),r.a.createElement(sn,null))},hn=Object(ee.a)((function(e){return{infoBar:{color:"#464646",background:"#F4F4F4",borderRadius:"4px 4px 0 0",height:"10%",alignSelf:"flex-start",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0px 2px 5px rgba(0,0,0,.2)"},leftInnerContainer:{color:"#464646",flex:"0.8",display:"flex",alignItems:"center",marginLeft:"5%",justifyContent:"center",fontWeight:800},rightInnerContainer:{display:"flex",flex:"0.2",justifyContent:"flex-end"}}})),En=Object(ze.a)((function(e){return{root:{minWidth:"auto"}}}))(Ve.a),gn=function(e){var t=e.room,n=e.handleClose,a=hn();return r.a.createElement("div",{className:a.infoBar},r.a.createElement("div",{className:a.leftInnerContainer}," Chat with ",t),r.a.createElement("div",{className:a.rightInnerContainer},r.a.createElement(En,{onClick:n},r.a.createElement(nt,null))))},vn=(n(371),Object(ee.a)((function(e){return{form:{display:"flex",flexDirection:"column",padding:"0px 5px"},sendButton:{backgroundColor:"blue",marginTop:"2px",float:"right",textDecoration:"none",background:"#2979FF",padding:"10px",color:"#fff !important",border:"none",width:"fit-content",alignSelf:"flex-end",borderRadius:"5px","&:focus":{outline:"none"}}}}))),On=function(e){var t=e.sendMessage,n=e.setMessage,a=e.message,c=vn();return r.a.createElement("form",{className:c.form},r.a.createElement("input",{type:"text",placeholder:"Type a message...",value:a,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?t(e):null}}),r.a.createElement("button",{onClick:t,className:c.sendButton},"Send ",r.a.createElement(tt,null)))},jn=(n(372),function(e){var t=e.message;return t.sent?r.a.createElement("div",{className:"messageContainer justifyEnd"},r.a.createElement("div",{className:"messageBox backgroundBlue"},r.a.createElement("p",{className:"messageText colorWhite"},t.text))):r.a.createElement("div",{className:"messageContainer justifyStart"},r.a.createElement("div",{className:"messageBox backgroundLight"},r.a.createElement("p",{className:"messageText colorDark"},t.text)))}),yn=n(200),xn=n.n(yn),kn=Object(ee.a)((function(e){return{messages:{height:"240px",overflowY:"scroll"}}})),Cn=function(e){var t=e.messages,n=kn(),c=Object(a.useRef)(null),i=function(){c.current.scrollIntoView({behavior:"smooth"})};return Object(a.useEffect)(i,[]),Object(a.useEffect)(i,[t]),r.a.createElement("div",{className:n.messages},r.a.createElement(xn.a,null,t.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(jn,{key:t,message:e}))})),r.a.createElement("div",{ref:c})))},wn=Object(ee.a)((function(e){return{chatContainer:{display:"flex",flexDirection:"column",justifyContent:"space-between",background:"#ffffff",borderRadius:"5px",height:"100%",width:"100%"}}})),Sn=function(e){e.me;var t=e.opponent,n=e.messages,c=e.handleSendMessage,i=e.handleClose,o=wn(),l=Object(a.useState)(""),u=Object($.a)(l,2),s=u[0],d=u[1];return r.a.createElement("div",{className:o.chatContainer},r.a.createElement(gn,{room:t,handleClose:i}),r.a.createElement(Cn,{messages:n,name:t}),r.a.createElement(On,{message:s,setMessage:d,sendMessage:function(e){e.preventDefault(),c(s),d("")}}))},Nn=function(){var e=Object(s.c)((function(e){return e.room})),t=Object(s.c)((function(e){return e.user.identity})),n=Object(s.b)(),a=e.pins.find((function(t){return t.identity===e.chatMember})),c=a&&a.chats?a.chats:[];return r.a.createElement(r.a.Fragment,null,a&&e.chatOpen?r.a.createElement(Sn,{me:t,opponent:a.identity,messages:c,handleSendMessage:function(t){n(function(e){var t=e.identity,n=e.message;return function(){var e=Object(g.a)(E.a.mark((function e(a,r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t,n);case 3:a(q({identity:t,message:n,sent:!0})),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}({identity:e.chatMember,message:t}))},handleClose:function(){n(V())}}):null)},In=Object(ee.a)((function(e){return{listItem:Object(se.a)({width:"33%",height:"fit-content"},e.breakpoints.down("xs"),{width:"50%"})}})),Tn=Object(Z.a)("div")((function(e){e.theme;return{display:"flex",flexWrap:"wrap",overflowY:"scroll",height:"calc(100% - 70px)"}})),An=function(){var e=Object(s.c)((function(e){return e.room})),t=(e.room,e.participants),n=(e.room.localParticipant,In());return r.a.createElement(Tn,null,t.map((function(e){return r.a.createElement("div",{className:n.listItem},r.a.createElement(We,{key:e.sid,participant:e,disableAudio:!0}))})))},_n=Object(Z.a)("div")((function(e){e.theme;return{border:"1px solid #757575",position:"relative",display:"grid",width:"100%",height:"100%",gridTemplateColumns:"repeat(6, minmax(0, 1fr))",gridTemplateRows:"repeat(5, minmax(0, 1fr))",gap:"5px 5px",gridTemplateAreas:'"lg mp mp mp mp ct"\n                      "mg mp mp mp mp bt"\n                      "mg mp mp mp mp bt"\n                      "me mp mp mp mp t7"\n                      "t1 t2 t3 t4 t5 t6"'}})),Rn=Object(ee.a)((function(e){return{mainWrapper:{backgroundColor:"#3f3f3f",color:e.palette.primary.contrastText,height:"100vh",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},mainViewer:{gridArea:"mp",padding:e.spacing(1),backgroundColor:"#343334"},logo:{gridArea:"lg",textAlign:"center",paddingTop:"10px"},chat:{gridArea:"mg",paddingLeft:"5px"},me:{gridArea:"me"},tabControl:{gridArea:"ct"},deviceContro:{gridArea:"bt"},t1:{gridArea:"t1"},t2:{gridArea:"t2"},t3:{gridArea:"t3"},t4:{gridArea:"t4"},t5:{gridArea:"t5"},t6:{gridArea:"t6"},t7:{gridArea:"t7"},t8:{gridArea:"t8"},showVideo:{display:"block"},hideVideo:{display:"none"}}})),Pn=function(){var e=Rn(),t=function(){var e=Object(s.c)((function(e){return e.room.room})),t=Object(a.useState)("disconnected"),n=Object($.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=function(){c(e.state||"disconnected"),"connected"===e.state&&console.log(e)};return t(),e.on("disconnected",t).on("reconnected",t).on("reconnecting",t),function(){e.off("disconnected",t).off("reconnected",t).off("reconnecting",t)}}),[e]),r}(),n=Object(a.useState)("dj"),c=Object($.a)(n,2),i=c[0],o=c[1],l=Object(s.c)((function(e){return e.user})),u=Object(a.useState)(!1),d=Object($.a)(u,2),m=d[0],f=d[1],p=Object(s.b)();return r.a.createElement(r.a.Fragment,null,m?r.a.createElement(gt,{showDialog:m,closeDialog:function(){return f(!1)},setStreamUrl:function(e){console.log(e),p(function(e){return function(){var t=Object(g.a)(E.a.mark((function t(n,a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k(e);case 3:n(R(e)),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),n(P(e)),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))}}):null,r.a.createElement("main",{className:e.mainWrapper},"connected"===t?r.a.createElement(r.a.Fragment,null,r.a.createElement(bn,null),r.a.createElement(_n,null,r.a.createElement("div",{className:e.mainViewer},r.a.createElement(Rt,{tabStatus:i}),"dj"===i?null:"fav"===i?r.a.createElement(It,null):r.a.createElement(An,null),r.a.createElement(rn,{role:l.role,onConfigureLiveStream:function(){f(!0)},onRandomButton:function(){p(G()),console.log("asdf")}})),r.a.createElement("div",{className:e.logo},r.a.createElement("img",{src:"./assets/logo.png",alt:"logo"}),r.a.createElement(te.a,{variant:"body2"},"squareparty")),r.a.createElement("div",{className:e.chat},r.a.createElement(Nn,null)),r.a.createElement("div",{className:e.tabControl},r.a.createElement(Lt,{status:i,setTabStatus:o})),r.a.createElement("div",{className:e.deviceControl},r.a.createElement(nn,{tabStatus:i})),r.a.createElement("div",{className:e.me},r.a.createElement(Ct,null)),r.a.createElement("div",{className:e.t1},r.a.createElement(dt,{pinId:0})),r.a.createElement("div",{className:e.t2},r.a.createElement(dt,{pinId:1})),r.a.createElement("div",{className:e.t3},r.a.createElement(dt,{pinId:2})),r.a.createElement("div",{className:e.t4},r.a.createElement(dt,{pinId:3})),r.a.createElement("div",{className:e.t5},r.a.createElement(dt,{pinId:4})),r.a.createElement("div",{className:e.t6},r.a.createElement(dt,{pinId:5})),r.a.createElement("div",{className:e.t7},r.a.createElement(dt,{pinId:6})))):r.a.createElement("div",null," Not Connected !")))},Ln={bandwidthProfile:{video:{mode:"collaboration",dominantSpeakerPriority:"standard",renderDimensions:{high:{height:1080,width:1920},standard:{height:720,width:1280},low:{height:90,width:160}}}},dominantSpeaker:!0,maxAudioBitrate:12e3,networkQuality:{local:1,remote:1},preferredVideoCodecs:[{codec:"VP8",simulcast:!0}]},Mn=function(){var e=b().token,t=Object(s.b)(),n=Qt(),c=n.localTracks,i=(n.getLocalVideoTrack,Object(a.useRef)((function(){}))),o=Object(a.useRef)([]);Object(a.useEffect)((function(){o.current=c}),[c]),Object(a.useEffect)((function(){var n=function(e){console.log(e.identity,"=> connected"),t(L(e))},a=function(e){console.log(e.identity,"=> disconnected"),t(M(e))};return p.a.connect(e,Object(m.a)(Object(m.a)({},Ln),{},{tracks:[]})).then((function(e){t(W(e)),e.once("disconnected",(function(){setTimeout((function(){return t(W(null))})),window.removeEventListener("beforeunload",i.current)})),window.twilioRoom=e,o.current.forEach((function(t){return e.localParticipant.publishTrack(t,{priority:"video"===t.kind?"low":"standard"})})),i.current=function(){console.log("beforeunload hook called!"),e.disconnect()},window.addEventListener("beforeunload",i.current),e.on("participantConnected",n),e.on("participantDisconnected",a),e.participants.forEach(n)})),function(){t(W(null))}}),[]);var l=Object(s.c)((function(e){return e.room.room}));return r.a.createElement("div",{className:"room"},null!==l&&"connected"===l.state?r.a.createElement(Pn,null):r.a.createElement("div",null," Connecting, Please wait for a while ..."))},Bn=n(468),Dn=n(469),Fn=n(467),Un=n(470),Wn=Object(ee.a)((function(e){return{header:{flexGrow:1},title:{flexGrow:1},connectButton:{borderRadius:"45px"},heroSection:{display:"flex"},heroTitle:{alignSelf:"center",marginRight:"-130px",padding:"50px",borderRadius:"20px 0px 0px 20px",boxShadow:"0px 0px 5px rgba(0, 0, 0, .1)","& > *":{margin:e.spacing(1)}},heroTitleBlack:{color:"black",fontFamily:"roboto",fontSize:"40px"},heroTitleBlue:{color:"#2A5FF6",fontFamily:"roboto",fontSize:"55px"},heroImage:{},featureSection:{display:"flex","& > *":{flex:1},borderTop:"1px solid rgba(0, 0, 0, .2)",borderBottom:"1px solid rgba(0, 0, 0, .2)"},feature:{textAlign:"center",padding:"30px 50px","& > .logo":{minHeight:"80px"},"& > h2":{margin:"3px 0px",color:e.palette.primary.main},"& > p":{margin:"5px 0px",color:"#707070"}},buttonSection:{padding:"70px 0px",textAlign:"center","& > button":{padding:"10px 30px"}}}})),zn=function(){var e=Wn(),t=Object(l.g)(),n=function(){t.push("/connect_stream")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.header},r.a.createElement(Bn.a,{position:"static",color:"transparent"},r.a.createElement(Dn.a,null,r.a.createElement(Fn.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement("img",{src:"assets/logo-blue.png",alt:"logo-blue"})),r.a.createElement(te.a,{variant:"h6",className:e.title},"Square"),r.a.createElement(Ve.a,{color:"primary",className:e.connectButton,variant:"outlined",onClick:n},"Connect Your Live")))),r.a.createElement("main",null,r.a.createElement(Un.a,{class:e.container},r.a.createElement("div",{className:e.heroSection},r.a.createElement("div",{className:e.heroTitle},r.a.createElement("h2",{className:e.heroTitleBlack},"Connect around"),r.a.createElement("h1",{className:e.heroTitleBlue},"Live Stream"),r.a.createElement("p",null,"A new way to experience livestream for both artists and participants.")),r.a.createElement("div",{className:e.heroImage},r.a.createElement("img",{src:"assets/Webapp.png",alt:"WebApp"}))),r.a.createElement("div",{className:e.featureSection},r.a.createElement("div",{className:e.feature},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"assets/link-solid.png",alt:"link-solid"})),r.a.createElement("h2",null,"Embed Your Live"),r.a.createElement("p",null,"Embed your live from ",r.a.createElement(at,null),"Youtube or ",r.a.createElement(rt,null)," FaceBook easily.")),r.a.createElement("div",{className:e.feature},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"assets/share-solid.png",alt:"link-solid"})),r.a.createElement("h2",null,"Share Your Link "),r.a.createElement("p",null,"Share Your SquareParty Link to people.")),r.a.createElement("div",{className:e.feature},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"assets/dancing-solid.png",alt:"link-solid",width:"auto",height:"80px"})),r.a.createElement("h2",null,"Connect With Your Fan"),r.a.createElement("p",null,"See participant dance around your Stream and connect with them."))),r.a.createElement("div",{className:e.buttonSection},r.a.createElement(Ve.a,{color:"primary",variant:"contained",disableElevation:!0,onClick:n},"Connect Your LiveStream")))))},Vn=n(464),qn=Object(ee.a)((function(e){return{header:{flexGrow:1},title:{flexGrow:1},mainContainer:{height:"100%"},container:{display:"flex",alignItems:"center",justifyContent:"center"},formContainer:{textAlign:"center",marginTop:"100px","& h2":{color:e.palette.primary.main,fontFamily:"roboto",fontSize:"50px",margin:"10px 0px"},"& p":{display:"flex",alignItems:"center",fontSize:"20px",color:"#707070"},"& p img":{marginTop:"5px"},"& p > .icon-youtube":{color:"red"},"& p > span.font-facebook":{color:"#3b5998",fontFamily:"Helvetica",marginLeft:"10px"}},form:{"& .username  input":{borderRadius:"5px 5px 0px 0px",padding:"20px 10px"},"& .link input":{borderRadius:"0px 0px 5px 5px",padding:"20px 10px"},"& .btn-submit":{marginTop:"10px"},"& .btn-submit button":{padding:"20px 10px"}},submit:{padding:"10px 30px"}}})),Hn=function(){var e=qn(),t=Object(l.g)(),n=Object(s.b)(),c=Object(a.useState)({username:"",dj:""}),i=Object($.a)(c,2),o=i[0],u=i[1],d=function(e){u(Object(m.a)(Object(m.a)({},o),{},Object(se.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.header},r.a.createElement(Bn.a,{position:"static",color:"transparent"},r.a.createElement(Dn.a,null,r.a.createElement(Fn.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){t.push("/home")}},r.a.createElement("img",{src:"assets/logo-blue.png",alt:"logo-blue"})),r.a.createElement(te.a,{variant:"h6",className:e.title},"Square")))),r.a.createElement("main",null,r.a.createElement(Un.a,{className:e.container},r.a.createElement("div",{className:e.formContainer},r.a.createElement("div",{className:e.description},r.a.createElement("img",{src:"assets/link-solid.png",alt:"link-solid"}),r.a.createElement("h2",null,"Embed Your Live"),r.a.createElement("p",null,"Embed your live from",r.a.createElement("span",{className:"icon-youtube"},r.a.createElement("a",{href:"https://youtube.com/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:"assets/youtube.png",alt:"youtube"}))),"&",r.a.createElement("span",{className:"font-facebook"},r.a.createElement("a",{href:"https://facebook.com/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:"assets/facebook.png",alt:"facebook"}))),"easily")),r.a.createElement("form",{className:e.form,onSubmit:function(e){var a,r;e.preventDefault(),n((a=o.username,r=o.link,function(){var e=Object(g.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("DJ CONNECT THUNK ACTION"),e.prev=1,e.next=4,A(a,r);case 4:n=e.sent,t(yt({username:a,link:r,token:n.data.token})),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),t(jt()),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())).then((function(e){t.push("/party"),window.history.replaceState(null,"",window.encodeURI("/room/".concat(o.username," || ").concat(window.location.search||"")))}))}},r.a.createElement("div",{className:"form-control username"},r.a.createElement(Vn.a,{placeholder:"Instagram username",variant:"filled",disableUnderline:!0,fullWidth:!0,name:"username",value:o.username,onChange:d})),r.a.createElement("div",{className:"form-control link"},r.a.createElement(Vn.a,{placeholder:"URL of youtube or facebook live stream",variant:"filled",disableUnderline:!0,required:!0,fullWidth:!0,name:"link",value:o.link,onChange:d})),r.a.createElement("div",{className:"form-control btn-submit"},r.a.createElement(Ve.a,{color:"primary",variant:"contained",disableElevation:!0,className:e.submit,required:!0,fullWidth:!0,type:"submit",disabled:!o.username||!o.link},"START CONNECTING YOUR STREAM")))))))},Gn=function(e){var t=e.children,n=Object(u.a)(e,["children"]),a=Object(s.c)((function(e){return e.user}));return r.a.createElement(l.b,Object.assign({},n,{render:function(e){var n=e.location;return a.token?t:r.a.createElement(l.a,{to:{pathname:"/",state:{from:n}}})}}))};var Yn=function(){return r.a.createElement(ln.a,{maxSnack:3},r.a.createElement(o.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/home"},r.a.createElement(zn,null)),r.a.createElement(l.b,{path:"/connect_stream"},r.a.createElement(Hn,null)),r.a.createElement(d,{path:"/party"},r.a.createElement(Mn,null)),r.a.createElement(Gn,{path:"/room/:RoomName"},r.a.createElement(Mn,null)),r.a.createElement(l.b,{path:"*"},r.a.createElement(l.a,{to:"/home"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Kn,Jn,Qn=n(56),$n=n(473),Xn={identity:"",token:"",link:""},Zn=Object($n.a)((Kn={},Object(se.a)(Kn,"LOGIN_FAILED",(function(){return Xn})),Object(se.a)(Kn,"LOGIN_SUCCESS",(function(e,t){return null===t.payload?Xn:Object(m.a)({},t.payload)})),Object(se.a)(Kn,"DJ_CONNECT_SUCCESS",(function(e,t){return{identity:t.payload.username,token:t.payload.token,link:t.payload.link}})),Kn),Xn),ea={room:null,stream:{url:""},dj:"",pins:[],participants:[],chatOpen:!1,chatMember:"",mainSelection:""},ta=Object($n.a)((Jn={},Object(se.a)(Jn,"INIT_ROOM",(function(e,t){return ea})),Object(se.a)(Jn,"SET_STREAM_URL_SUCCESS",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{stream:{url:t.payload}})})),Object(se.a)(Jn,"SET_STREAM_URL_FAILED",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{stream:{url:""}})})),Object(se.a)(Jn,"PARTICIPANT_JOINED",(function(e,t){var n=[].concat(Object(ne.a)(e.participants),[t.payload]),a=t.payload;return!e.pins.find((function(e){return e.identity===a.identity}))&&e.pins.length<7?Object(m.a)(Object(m.a)({},e),{},{participants:n,pins:[].concat(Object(ne.a)(e.pins),[{identity:a.identity,locked:!1,sent:!1,mic:!1,chat:!1,chats:[]}])}):Object(m.a)(Object(m.a)({},e),{},{participants:n})})),Object(se.a)(Jn,"PARTICIPANT_EXIT",(function(e,t){var n=t.payload,a=Object(ne.a)(e.participants).filter((function(e){return e.identity!==n.identity})),r=e.pins.filter((function(e){return e.identity!==n.identity}));return Object(m.a)(Object(m.a)({},e),{},{participants:a||[],pins:r||[],chatOpen:e.chatMember!==n.identity,chatMember:e.chatMember===n.identity?"":e.chatMember})})),Object(se.a)(Jn,"INIT_PARTICIPANTS",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{participants:Object(ne.a)(t.payload.participants)})})),Object(se.a)(Jn,"SET_TWILIO_ROOM",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{room:t.payload})})),Object(se.a)(Jn,"SET_PIN_SENT",(function(e,t){var n=t.payload.identity,a=Object(ne.a)(e.pins),r=a.findIndex((function(e){return e.identity===n})),c=a[r];return a[r]=Object(m.a)(Object(m.a)({},c),{},{sent:!0}),Object(m.a)(Object(m.a)({},e),{},{pins:a})})),Object(se.a)(Jn,"SET_PIN_UNLOCK",(function(e,t){var n=t.payload.identity,a=Object(ne.a)(e.pins),r=a.findIndex((function(e){return e.identity===n})),c=a[r];return a[r]=Object(m.a)(Object(m.a)({},c),{},{locked:!0}),Object(m.a)(Object(m.a)({},e),{},{pins:a})})),Object(se.a)(Jn,"SET_PIN_LOCK",(function(e,t){var n=t.payload.identity,a=Object(ne.a)(e.pins),r=a.findIndex((function(e){return e.identity===n}));a[r];return a[r]={identity:n,locked:!1,sent:!1,mic:!1,chat:!1,chats:[]},Object(m.a)(Object(m.a)({},e),{},{chatOpen:!1,chatMember:"",pins:a})})),Object(se.a)(Jn,"SET_PIN_MIC",(function(e,t){var n=t.payload.identity,a=Object(ne.a)(e.pins),r=a.findIndex((function(e){return e.identity===n})),c=a[r];return a[r]=Object(m.a)(Object(m.a)({},c),{},{mic:t.payload.isOn}),Object(m.a)(Object(m.a)({},e),{},{pins:a})})),Object(se.a)(Jn,"INIT_CHAT_ROOM",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{chatMember:"",chatOpen:!1})})),Object(se.a)(Jn,"OPEN_CHAT",(function(e,t){var n=Object(ne.a)(e.pins),a=n.findIndex((function(e){return e.identity===t.payload.identity})),r=n[a],c=r.chats.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{read:!0})}));return n[a]=Object(m.a)(Object(m.a)({},r),{},{chats:c}),Object(m.a)(Object(m.a)({},e),{},{chatOpen:!0,chatMember:t.payload.identity,pins:n})})),Object(se.a)(Jn,"CLOSE_CHAT",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{chatOpen:!1,chatMember:""})})),Object(se.a)(Jn,"ADD_MESSAGE",(function(e,t){var n=t.payload.identity,a=Object(ne.a)(e.pins),r=a.findIndex((function(e){return e.identity===n})),c=a[r];return a[r]=Object(m.a)(Object(m.a)({},c),{},{chats:[].concat(Object(ne.a)(c.chats),[{text:t.payload.message,sent:t.payload.sent,read:!!t.payload.sent||e.chatMember===c.identity}])}),Object(m.a)(Object(m.a)({},e),{},{pins:a})})),Object(se.a)(Jn,"SELECT_MAIN",(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{mainSelection:t.payload.identity})})),Object(se.a)(Jn,"RANDOMIZE_PINS",(function(e,t){for(var n=Object(ne.a)(e.pins),a=0;a<7;a++)if(!n[a]||!0!==n[a].locked){var r=e.participants.filter((function(e){return!n.find((function(t){return t.identity===e.identity}))})),c=r[Math.floor(Math.random()*r.length)];c&&(n[a]={identity:c.identity,locked:!1,sent:!1,mic:!1,chat:!1,chats:[]})}return Object(m.a)(Object(m.a)({},e),{},{pins:n})})),Jn),ea),na=Object(Qn.combineReducers)({user:Zn,room:ta}),aa=n(201),ra=n(202),ca=n(204),ia=n(471),oa=Object(ca.a)({type:"dark",palette:{primary:{main:"#235BF6"}},shadows:["none"],sidebarWidth:260,sidebarMobileHeight:90}),la=function(e){var t=e.children;return r.a.createElement(ia.a,{theme:oa}," ",t," ")},ua=n(203),sa=n.n(ua),da=Object(Qn.createStore)(na,Object(ra.composeWithDevTools)(Object(Qn.applyMiddleware)(aa.a))),ma=new sa.a("f4d68f730ac1882d1bb4",{cluster:"us3"});Object(cn.setPusherClient)(ma),i.a.render(r.a.createElement(s.a,{store:da},r.a.createElement(la,null,r.a.createElement(Yn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[223,1,2]]]);
//# sourceMappingURL=main.9e6579cc.chunk.js.map